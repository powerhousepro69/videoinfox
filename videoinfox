#!/bin/bash

#  file : videoinfox v3.4.03								         
#  github and reddit: powerhousepro69
#  GNU General Public License v2.0
#  reddit:  /videoinfox

# This is where Videoinfox's Version Number is set.

ver="Videoinfox v3.4.03"  # Version Number: no blinking dot
der=$(echo -e "Videoinfox v3\033[5m.\033m\033[0m\033[5m\033[5m\033[0m4.03")  # Version Number: with blinking dot


##################################################################################################################################################
#  DEPENDENCIES REQUIRED:  #######################################################################################################################
################################################################################################################################################## 

# - xclip needed for autopaste feature.  xclip only works with Xsession
  
# - ffmpeg is used to extrat Duration in <hrs:min:sec> format
# - ffprobe is used to extract Codec, Resolution and Duration in floating seconds format (x.xxxxxx)
# - ffplay is used to play the video that is in the clipboard.                                        
  
# - bc (already installed on most disrtros)  needed to do floating point math.
  
# - notify-send (already installed on most disrtros) needed to display gui notifications.

 
##########  Videoinfox runs a dependency check at startup. If any dependencies are Not Found, the script will exit. 
##########  Missing dependencies will be displayed.


# YT-DLP is not on the dependeny list becuase Videoinfox will dowload it to:   ~/.config/videoinfox   All calls to yt-dlp are pointed to:   ~/.config/videoinfox/yt-dlp   There is an update option in:   <Set>  Settings to update yt-dlp   (just the copy in ~/.config/videoinfox)   I didn't want to overwrite anyones copy of:   /user/local/bin/yt-dlp     Also, I wanted to make sure all new Videoinfox script installs included the most recent version of Yt-dlp


# THIS SCRIPT HAS BEEN HEAVILY COMMENTED FOR ANYONE INTERESTED IN HOW IT WORKS AND TO MAKE IT EASIER TO EDIT THE CODE.


##################################################################################################################################################
#  START COMMAND LINE OPTIONS  ###################################################################################################################
##################################################################################################################################################

# Note: Command Line Options won't run until First Run (setup)

#-------------------------------------------------------------------------------------------------------------------------------------------------
#  videoinfox -v     DISPLAY VERSION NUMBER THEN EXIT  
#-------------------------------------------------------------------------------------------------------------------------------------------------

if [ "$1" = "-v" ]
  then
      echo "$ver"
      exit

  else
      :
fi


#-------------------------------------------------------------------------------------------------------------------------------------------------
#  videoinfox -l     ADD CLIPBOARD CONTENT ON THE FLY TO:   USER SET LIST   THEN EXIT
#-------------------------------------------------------------------------------------------------------------------------------------------------

# Create a gui keyboard shortcut for:   videoinfox -l
# It isn't necessary to have the Videoinfox running while using this feature.
# Build your set user list on the fly without leaving the gui
# COPY THE URL TO THE BROWSER. THEN USE YOUR SHORTCUT TO WRITE URL TO THE USER SET LIST. Rinse and repeat to keep adding to the list. 


if [ "$1" = "-l" ]
   then

       direxist="$HOME/.config/videoinfox/tmp"

       if [ -d "$direxist" ]  #  if directoty exists goto  <then>
         then


        read -r grabuserlist < ~/.config/videoinfox/videoinfox.set-user-list


             if [ -f "$grabuserlist" ]  # if file exists then 
                then
      
                     pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
                     echo "$pasteclip" >> "$grabuserlist"  # write url to the user set list
                     notify-send "Videoinfox Message: Added link to List "$grabuserlist"  . . ." ""$pasteclip"" # GUI Notification.
                    
                     cat -n "$grabuserlist" | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/videoinfox.ulistfly.tmp  # REMOVE DUPLICATES
                     sed -i '/^$/d' ~/.config/videoinfox/videoinfox.ulistfly.tmp  # remove any blank lines in the list
                     sed -i '/http/!d' ~/.config/videoinfox/videoinfox.ulistfly.tmp  # remove all lines not starting with  http
                   
                     mv ~/.config/videoinfox/videoinfox.ulistfly.tmp "$grabuserlist"

                     echo "" | xclip -sel clip  # clearing out the clipboard
 
                     exit
          
                else
                
                     notify-send "Videoinfox -l Error . . ." "No user list has been set for this feature.  Set User List in Videoinfox first."
                     exit
             fi

       else
           echo
           echo "Videoinfox error: Config directory not found. Run videoinfox first with no command line options to setup."
           echo
           notify-send "Videoinfox error: Config directory not found. Run videoinfox first with no command line options to setup."
           exit
       fi

   else
       :
fi


#-------------------------------------------------------------------------------------------------------------------------------------------------
#  videoinfox -a     ADD CLIPBOARD CONTENT  ON THE FLY TO:   DEFAULT LIST   THEN EXIT
#-------------------------------------------------------------------------------------------------------------------------------------------------

# Create a gui keyboard shortcut for:   videoinfox -a
# It isn't necessary to have the Videoinfox running while using this feature.
# Build your default list on the fly without leaving the gui
# COPY THE URL TO THE BROWSER. THEN USE YOUR SHORTCUT TO WRITE URL TO THE DEFAULT DOWNLOAD LIST. Rinse and repeat to keep adding to the Default List. 

if [ "$1" = "-a" ]
   then

direxist="$HOME/.config/videoinfox/tmp"

if [ -d "$direxist" ]  #  if directoty exists goto  <then>
then

        if [ -f ~/.config/videoinfox/videoinfox-dl-Default ]  # if file exists then 
           then
               :

           else  # This file should always exist:   ~/.config/videoinfox/videoinfox-dl-Default   if it doesn't, it will be created

                 # CREATING EMPTY DEFAULT DOWNLOAD LIST WITH LIST EMPTY MESSAGE
                 echo > ~/.config/videoinfox/videoinfox-dl-Default
                 echo "Default Download List Empty" >> ~/.config/videoinfox/videoinfox-dl-Default

        fi


# ADD TO DEFAULT LIST  <DEFAULT LIST>
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
echo "$pasteclip" >> ~/.config/videoinfox/videoinfox-dl-Default  # write url to the default download list
notify-send "Videoinfox added link to the Default Download List . . ." ""$pasteclip"" # GUI Notification.

# REMOVE DUPLICATES
cat -n ~/.config/videoinfox/videoinfox-dl-Default | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/videoinfox-dl-Default.tmp
mv ~/.config/videoinfox/videoinfox-dl-Default.tmp ~/.config/videoinfox/videoinfox-dl-Default

sed -i '/^$/d' ~/.config/videoinfox/videoinfox-dl-Default 2>/dev/null  # remove any blank lines in the list
sed -i '/http/!d' ~/.config/videoinfox/videoinfox-dl-Default  # remove all lines not starting with  http

echo "" | xclip -sel clip  # clearing out the clipboard

exit


else
    echo
    echo "Videoinfox error: Config directory not found. Run videoinfox first with no command line options to setup."
    echo
    notify-send "Videoinfox error: Config directory not found. Run videoinfox first with no command line options to setup."
    exit
fi


    else
        :
fi


#-------------------------------------------------------------------------------------------------------------------------------------------------
#  videoinfox -h     DISPLAY HELP THEN EXIT  
#-------------------------------------------------------------------------------------------------------------------------------------------------

if [ "$1" = "-h" ]
  then

      direxist="$HOME/.config/videoinfox/tmp"

      if [ -d "$direxist" ]  #  if directoty exists goto  <then>
        then

       echo
       echo "___________________________________________________________________________________________________________________"
       echo  
       echo " ""$ver"" >>> COMMAND LINE OPTIONS >>> HELP              Where Video Play is a Clipboard Copy Away . . ."    
       echo "___________________________________________________________________________________________________________________" 
       echo
       echo " Note: Videoinfox won't accept multiple options. Only one option per instance."
       echo
       echo
       echo "   -h  This help screen."
       echo
       echo "   -v  Display the version number."
       echo
       echo "   -a  Write clipboard content to the Default List. For instructions on use: Yt-dlp >>> Download List >>> Help"
       echo
       echo "   -l  Write clipboard content to the User Set List. For instructions on use: Yt-dlp >>> Download List >>> Help"
       echo
       echo "   -u  This option can be used with your own ready to download url list that can be any name and location."
       echo "       There is no need to use the Videoinfox interface with this option. Videos will be downloaded to the"
       echo "       directory of the list location.  Example: videoinfox -u mylist  Only enter the list filename."
       echo "       The list must be recursively reachable from the current directory."
       echo "       The first line in the list must begin with http to be processed."
       echo
       echo "   -d  Autoplay video files in the current directory."
       echo -e "\n"     
       exit
  
      else
          echo
          echo "Videoinfox error: Config directory not found. Run videoinfox first with no command line options to setup."
          echo
          exit
      fi

   else
      :
fi


#-------------------------------------------------------------------------------------------------------------------------------------------------
#  videoinfox -u     DOWNLOAD ANY LIST THAT IS RECURSIVELY REACHABLE FROM THE CURRENT DIRECORY. ENTER FULL FILENAME ONLY. NO WILDCARD
#-------------------------------------------------------------------------------------------------------------------------------------------------

if [ "$1" = "-u" ]
   then 

  direxist="$HOME/.config/videoinfox/tmp"

  if [ -d "$direxist" ]  #  if directoty exists goto  <then>
  then
       
     clear
     echo
     echo "___________________________________________________________________________________________________________________"
     echo
     echo " ""$ver"" >>> Load a recursively reachable Download List for processing . . ."
     echo "___________________________________________________________________________________________________________________"    
        

     if echo "$2" | grep "/" > /dev/null  # if any slashehes were entered, exit
       then
            echo
            echo " error: No directories. Only a filename. List must be recursively reachable from the current directory."
            echo 
            exit    

       else
            :
     fi


     if echo "$2" | grep "*" > /dev/null  # if any wildcards * were entered, exit
       then
            echo
            echo " error: No wildcards. Only a filename. List must be recursively reachable from the current directory."
            echo 
            exit    

       else
            :
     fi


        filecount=$(find "$PWD" -type f \( -iname "$2" \) | wc -l)
       
        if [ "$filecount" = 1 ]  # IF THE FILE IS FOUND THE COUNT WILL BE: 1
           then
                chkforhttp=$(find "$PWD" -type f \( -iname "$2" \))  # getting list name to check the first line for http
                read chkforhttp2 < "$chkforhttp"  # reading first line into varible $chkforhhtp2
                chkforhttp=$(echo "$chkforhttp2" | cut -c-4)   # cut everything after the 4th character

                if [ "$chkforhttp" = "http" ]  # if the first 4 characters = <http> go then
                   then
                        :
                   else
                        echo
                        echo -e "\033[5m aborted\033m\033[0m: The first 4 characters on the first line don't start with http"
                        echo "          This is a safety feature to prevent accidental deletion of a file that is not a Download list."
                        echo
                        echo "          If this file was processed, The following lines would have been removed:"
                        echo
                        echo "          - All lines that don't begin with: http"
                        echo "          - All duplicate lines"
                        echo "          - All blank lines"
                        echo
                        echo "          ** The first line of all Download Lists must begin with http to be processed with: videoinfox -u"
                        echo 
                        exit
                fi


                ##### GRAB THE PATH FROM THE DOWNLOAD LIST TO CHANGE THE WORKING DIRECTORY TO THAT PATH #####

                find "$PWD" -type f \( -iname "$2" \) > videoinfox-u-option-grabdir.tmp #2> /dev/null # find the list to grab the full path with filename
                sed -i 's%/[^/]*$%%' videoinfox-u-option-grabdir.tmp  # remove last slash and filename from the path for the cd command
                read -r < videoinfox-u-option-grabdir.tmp whatsthepath  # read the path into the varible: $whatsthepath 
                rm videoinfox-u-option-grabdir.tmp  # download list location is no longer needed. so it will be removed
                cd "$whatsthepath"  # cd to the download list location. the code will let you know

     
                #####  ERROR CORRECTION FOR THE USER'S LIST BEFORE DOWNLOAD.  #####

                cat -n "$2" | sort -uk2 | sort -n | cut -f2- > videoinfox-u-option.tmp  # remove duplicates from the user's list
                sed -i '/^$/d' videoinfox-u-option.tmp  # remove all blank lines from the user's list
                sed -i '/http/!d' videoinfox-u-option.tmp  # remove all lines not starting with: http from the user's list
                mv videoinfox-u-option.tmp "$2"  
               

                #####  TAGGING .log ONTO THE USER'S LIST FILENAME TO CREATE A LOG FILE OF THE DOWNLOAD  #####
            
                ulogfile="$2".log  # tag  .log  onto the filename for log creation
                echo "$ver" ">>> videoinfox -u" "$2" ">>> Logfile" > "$ulogfile"  # create the log file header Line 1
                echo >> "$ulogfile"
                echo "Download list:" "$PWD/""$2" >> "$ulogfile"  # create the log file header Line 2
                echo >> "$ulogfile"  # create the log file header Line 3 (blank line)
                echo >> "$ulogfile"  # create the log file header Line 4 (blank line)

                echo
                echo "Processing list:" "$PWD/""$2"
           
             
                #####  DOWNLOAD LIST  #####
                
                input="$2"  # INPUT FOR THE DOWNLOAD LOOP (the download list)


                #####  DOWNLOAD LOOP START  #####

                while read -r line  # read line by line until end of file
                do

                echo
                ~/.config/videoinfox/yt-dlp "$line"  # download url
                echo
                echo "Logging URL and Filename to:" "$PWD/""$ulogfile" 

                # logging yt-dlp output to the log file

                echo "$line" >> "$ulogfile" 
                ~/.config/videoinfox/yt-dlp "$line" | tee >> "$PWD/""$ulogfile"
                echo >> "$ulogfile" 

                done < "$input"

                #####  DOWNLOAD LOOP END  #####


                #####  REMOVE UNWANTED LOG INFO  ##### 

                sed -i '/\[youtube\]/d' "$2".log &> /dev/null  # removing lines that start with  [youtube]
                sed -i '/\[info\]/d' "$2".log &> /dev/null  # removing lines that start with  [info]
                sed -i 's/\[download\]//' "$2".log &> /dev/null  # remove   [download]   from the end of the line.
                sed -i 's/has already been downloaded//' "$2".log &> /dev/null  # remove   has already been downloaded   from the end of the line.
                sed -i -e 's/^[ \t]*//' "$2".log &> /dev/null  # remove spaces at beginning of line.


                #####  DISPLAY AFTER THE LIST IS DONE DOWNLOADING  #####

                echo
                echo
                echo -e "$ver" "\033[5mdone processing download list . . .\033m\033[0m"                 
                echo
                echo "List:" "$PWD/""$2"  # display list filename with full path
                echo "Log :" "$PWD/""$ulogfile"  # display log filename with full path
                echo
                
                notify-send "Videoinfox -u messsage: Done Processing Download List . . ." "$PWD/""$2"
                exit  # exit videoinfox

           else
                echo
                echo " Videoinfox Error: List not found. List must be recursively reachable from the current directory."
                echo
                exit
           fi    

  else
  echo
  echo "Videoinfox error: Config directory not found. Run videoinfox first with no command line options to setup."
  echo
  notify-send "Videoinfox error: Config directory not found. Run videoinfox first with no command line options to setup."
  exit
  fi

   
   else
        :
fi


#-------------------------------------------------------------------------------------------------------------------------------------------------
#  videoinfox -d     PLAY DIRECTORY.  AUTOPLAY VIDEO FILES IN THE CURRENT DIRECTORY
#-------------------------------------------------------------------------------------------------------------------------------------------------

if [ "$1" = "-d" ]
   then


direxist="$HOME/.config/videoinfox/tmp"

  if [ -d "$direxist" ]  #  if directoty exists goto  <then>
  then



# WRITING VIDEO FILE LIST TO FILE: /.config/videoinfox/tmp/videoinfo.nt-play-directory-apa 
find "$PWD" -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) > ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa-work 2>/dev/null

# SORT BACK INTO ORDER
sort -u ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa-work > ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa

#  CHECK FOR AT LEAST ONE LINE THAT STARTS WITH A SLASH /
atleastone=$(grep '^/' ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa 2>/dev/null | wc -l)

#  IF THE NUMBER DOESN"T = 0  THEN PROCESS AUTO PLAY OF PLAYED LIST
if [ $atleastone -ne 0 ]  
   then

#  ASSIGN PLAYED LIST TO VARIABLE: $moddedplayedlist 
moddedplayedlist="$HOME""/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa"

#  PLAYED LIST INPUT FOR LOOP
input="$moddedplayedlist"  

#  CREATE TEMP FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2

#  #  START WRITING
while read -r line  # read line by line and write line by line until end of file
do

   if [ -f "$line" ]
      then # ONLY WRITE LINE TO FILE IF IT IS A VALID PATH AND FILE
           echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2  
      else
           :
   fi        

done < "$input"
#  DONE WRITING ONLY VALID FILES

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
mv ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa 2>/dev/null

#  CREATE FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2  

#  START WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx
while read -r line  # read line by line until end of file
do

   if [[ "$line" == *.mp4 ]] 
        then # IF FILE IS MP4, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2  
     
   elif [[ "$line" == *.webm ]]
        then # IF FILE IS WEBM, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2
      
   elif [[ "$line" == *.mkv ]]
        then # IF FILE IS MKV, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2

   elif [[ "$line" == *.avi ]]
        then # IF FILE IS AVI, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2

   elif [[ "$line" == *.divx ]]
        then  # IF FILE IS DIVX, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2
   else
        :  # IF THERE IS NO FILE MATCH, THERE IS NO WRITE
   fi

done < "$input"
#  END WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
cp ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa 2>/dev/null

# REMOVE PATH ONLY LEAVING FILENAME
sed -i 's/.*\///' ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2

# NUMBER THE LIST
sed '/./='  ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2 | sed '/./N; s/\n/ /' > ~/.config/videoinfox/tmp/videoinfox.numbered-optiond-play-directory-list 2>/dev/null

   
else #  NO LINES START WITH A SLASH /   remove empty files
     rm ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.numbered-optiond-play-directory-list 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa-work 2>/dev/null    
fi


clear

if [ -f ~/.config/videoinfox/tmp/videoinfox.numbered-optiond-play-directory-list ]
   then
        cat ~/.config/videoinfox/tmp/videoinfox.numbered-optiond-play-directory-list 2>/dev/null
   else
        echo
        echo
        echo "$der  No Playable Content in Current Directory . . ."
        echo
fi


linenumber=1

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa > ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa.tmp ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

for line in $(cat "$input" 2>/dev/null)
 do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> Command Line Option -d >>> PLAY DIRECTORY" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      ffplay -fs -autoexit "$line" 2> /dev/null

      echo " To bypass the 3 second wait press enter with no entry"
      echo
      echo -e "\033[5m 3 seconds remaining to quit Played List Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      echo 
      read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           if [[ $playdir ]]                                             
             then                                                        # if no input is entered within 3 seconds the next video will play
                 clear
                 break                                                   # if enter is pressed without any input the next video will play
             else                                                        
                 clear                                                   # press any key then enter within 3 seconds to quit Play Played List
           fi
done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.numbered-optiond-play-directory-list 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.optiond-play-directory-apa-work 2>/dev/null

exit


else
  echo
  echo "Videoinfox error: Config directory not found. Run videoinfox first with no command line options to setup."
  echo
  notify-send "Videoinfox error: Config directory not found. Run videoinfox first with no command line options to setup."
  exit
  fi


else
    :
fi

##################################################################################################################################################
#  END COMMAND LINE OPTIONS  #####################################################################################################################
##################################################################################################################################################



##################################################################################################################################################
##################################################################################################################################################

#  THE BELOW 8 FUNCTIONS RUN ONCE ON EVERY STARTUP THEN INTO THE MAIN LOOP.

#  1. Dependency Check. If any dependencies are not found, the scipt will exit. Script will run when all dependencies are found.
#  2. Start from root check and change to home dir if started from the root directory.   
#  3. Configuration directory check and file creation. If  ~/.config/videoinfox  doesn't exist, directory will be crated along with config files.
#  4. Check for Videoinfox Update and Notify if update is available.
#  5. Create empty Default Download List if one doesn't already exist.
#  6. Created Download List Help file.
#  7. Create Main Help file.
#  8. Create Version History file.

##################################################################################################################################################
##################################################################################################################################################



##################################################################################################################################################
#####  1. DEPENDENCY CHECK  ###################################################################################################################### 
##################################################################################################################################################

clear
echo
echo "___________________________________________________________________________________________________________________"
echo  
echo " $ver >>> DEPENDENCY CHECK"
echo "___________________________________________________________________________________________________________________"
echo "___________________________________________________________________________________________________________________"
echo
echo " If a dependency isn't Found:  App isn't installed or App is installed and not in the path."
echo
echo

####### Check for <notify-send> ########
if ! command -v notify-send &> /dev/null  # if <notify-send> isnt found goto then
then
    echo " notify-send .......... Not Found"
    echo
    d1=1  # Not Found = 1
else
    echo " notify-send .......... Found"
    echo
    d1=0  # Found = 0
fi

####### Check for <bc> ########
if ! command -v bc &> /dev/null  # if <bc> isnt found goto then
then
    echo " bc ................... Not Found"
    echo
    d2=1  # Not Found = 1
else
    echo " bc ................... Found"
    echo
    d2=0  # Found = 0
fi

####### Check for <ffmpeg> ########
if ! command -v ffmpeg &> /dev/null  # if <ffmpeg> isnt found goto then
then
    echo " ffmpeg ............... Not Found"
    echo
    d3=1  # Not Found = 1
else
    echo " ffmpeg ............... Found"
    echo
    d3=0  # Found = 0
fi

####### Check for <ffprobe> ########
if ! command -v ffprobe &> /dev/null  # if <ffprobe> isnt found goto then
then
    echo " ffprobe .............. Not Found"
    echo
    d4=1  # Not Found = 1
else
    echo " ffprobe .............. Found"
    echo
    d4=0  # Found = 0
fi

####### Check for <ffplay> ########
if ! command -v ffplay &> /dev/null  # if <ffplay> isnt found goto then
then
    echo " ffplay ............... Not Found"
    echo
    d5=1  # Not Found = 1
else
    echo " ffplay ............... Found"
    echo
    d5=0  # Found = 0
fi

####### Check for <xclip> ########
if ! command -v xclip &> /dev/null  # if <xclip> isnt found goto then
then
    echo " xclip ................ Not Found"
    echo
    d6=1  # Not Found = 1
else
    echo " xclip ................ Found"
    echo
    d6=0  # Found = 0
fi

##########  Each Dependency:   Found = 0   Not Found = 1  ##########################
#
#   All dependency results are added:  - All dependencies Found = 0
#                                      - One or more dependencies Not Found = Not 0 
####################################################################################
depcount=$((d1 + d2 + d3 + +d4 + d5 + d6))


if [ $depcount == 0 ]  # if all dependencies = 0 (All Found) goto then
  then
      echo
      echo " All dependencies are satisfied."  # sript runs
      echo -e "\n"
  else
      echo
      echo -e " One or more dependencies: \033[5mNot Found\033[5m\033[0m"  # script exits
      echo
      echo " When all dependencies are Found, the script will run."
      echo
      echo "__________________________________________________________________________________________________________________"  
      echo
      echo " $ver >>> EXIT"
      echo "__________________________________________________________________________________________________________________" 
      echo -e "\n"
      exit
fi


##################################################################################################################################################
#####  2. START FROM ROOT CHECK  ################################################################################################################# 
##################################################################################################################################################

whatdir=$PWD  #  current working directory
thisdir="/" #  root directory

if [ "$whatdir" == $thisdir ]  # If the directory the script was run from: / <root> goto then 
  then
      clear
      echo
      echo "__________________________________________________________________________________________________________________"
      echo  
      echo " $ver >>> Videoinfox was started in root"
      echo
      echo " Working Directory: ""$PWD"
      echo "__________________________________________________________________________________________________________________" 
      echo      
      cd "$HOME" 
      echo " This script was started in root. Videoinfo will throw ERRORS when run from ROOT"
      echo
      echo " This Script's Working Directory Was Changed to: $PWD"
      echo
      echo " Change to a Parent Directory of your Video Library"
      echo

      # Timeout was disabled because there was no point in seeing this display.  I ended up just neeeding the <cd> execution from the loop.
      
      #sec=3
           #while [ $sec -ge 0 ]; do  #  This pauses the execution.  It displays and counts down the seconds set in <$sec>
           #echo -ne "     Message Expiring in: $sec\033[0K\r"
           #let "sec=sec-1"
           #sleep 1
           #done              
fi


##################################################################################################################################################
#####  3. DIRECTORY CHECK & FILE CREATION  ####################################################################################################### 
##################################################################################################################################################

# The below check: Does the directory <~/.config/videoinfox> exist ?
# If it doesn't exist, directory is created. Empty files are created to avoid error when running Videoinfo for the first time.

direxist="$HOME/.config/videoinfox"

if [ -d "$direxist" ]  #  if directoty exists goto  <then>
  then
      :  #  goto CHECK FOR  (VIDEOINFOX NOTIFICATION UPDATE)
  else
      
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo  
      echo " $ver >>> FIRST RUN >>> SETUP"
      echo
      echo " Directory and file creation"
      echo "___________________________________________________________________________________________________________________"
      echo "___________________________________________________________________________________________________________________"
      echo         
      echo " Created config directory: "$HOME"/.config/videoinfox and required files "
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " NOTE: Do not randomly paste in Videoinfox.  It will cause unwanted code to run producing"  
      echo " undesired results and can corrupt Videoinfox's data integrity and retention."
      echo
      echo " Everywhere the dot is blinking in the version number, don't paste and Videoinfox will function as intended."
      echo
      echo " ""$der"
      echo "__________________________________________________________________________________________________________________"
      echo
      echo " Yt-dlp will be downloaded to: "$HOME"/.config/videoinfox  "
      echo "__________________________________________________________________________________________________________________"
      echo
      echo -e " A sample video url was copied to the clipboard to show how the \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m feature works."
      echo
      echo " Video playing:  [ f - toggle fullscreen ]   [ spacebar - play/pause ]   [ l/r arrows - fwd/rew ]   [ q -quit ]"
      echo
      echo " Press  p  when Videoinfox starts up. That will download the video url that is in the clipboard and auto play it."
      echo "__________________________________________________________________________________________________________________"
      echo -e "\n" 
      echo " Setup for the first run or if the videoinfox directory gets deleted anytime after the first run."
      
                                        
 
      ###################
      # CREATE DIRECTORY
      ###################
      mkdir ~/.config/videoinfox
      mkdir ~/.config/videoinfox/tmp
      
      ###############
      # CREATE FILES
      ###############
      
      # CREATE FIND RESULT MESSAGE THAT THERE ARE NO STORED RESULTS
#echo "                                                                                                                 " > ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "Select find to search for files.                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
echo > ~/.config/videoinfox/videoinfo.findwork


      # witing header for blank Played List 
      #echo > ~/.config/videoinfox/videoinfo.playedlist
      #echo "PLAYED LIST" >> ~/.config/videoinfox/videoinfo.playedlist
      #echo >> ~/.config/videoinfox/videoinfo.playedlist
      #echo "This File was Created: $(date) by" "$USER" >> ~/.config/videoinfox/videoinfo.playedlist
      #echo >> ~/.config/videoinfox/videoinfo.playedlist


      # SET DEFAULT  LAST SEARCH  to <2> Never Save
      echo "2" > ~/.config/videoinfox/videoinfo.lastsearch-set

      # CHECK FOR  ~/Downloads  If it doesn't exist, create it 
      direxist2="$HOME/Downloads"

      if [ -d "$direxist2" ]  #  if directoty exists goto  <then>
        then
             : 
        else
             mkdir ~/Downloads
      fi


      # SET DEFAULT  yt-dlp  DOWNLOAD DIRECTORY TO  ~/Downloads    It can be changed in the <set> menu
      echo "$HOME"/Downloads > ~/.config/videoinfox/videoinfo.yt-download-dir

      # SET DIR AT EXIT TO THE DEFAULT DOWNLOAD DIRECTORY SO DEFAULT DIR DISPLAY #3 LIGHTS UP ON FIRST RUN 
      echo "$HOME"/Downloads > ~/.config/videoinfox/videoinfo.dir-at-exit
      read -r diratexit < ~/.config/videoinfox/videoinfo.dir-at-exit
      cd "$diratexit" 2>/dev/null 

      # Writing header for new blank Saved Search  playlist  ++++++++ this was added to get around a bug until the bug gets squashed.       
      echo > ~/.config/videoinfox/videoinfo.keptsearch
      echo "PLAYlIST" >> ~/.config/videoinfox/videoinfo.keptsearch
      echo >> ~/.config/videoinfox/videoinfo.keptsearch
      echo "This File was Created: $(date) by" "$USER" >> ~/.config/videoinfox/videoinfo.keptsearch
      echo >> ~/.config/videoinfox/videoinfo.keptsearch

      # CREATING EMPTY FILES SO NO ERRORS ARE PRODUCED ON FIRST RUN
      echo > ~/.config/videoinfox/videoinfo.findwork2
      echo > ~/.config/videoinfox/videoinfo.findwork3
      echo > ~/.config/videoinfox/videoinfo.lastfindtime    
      echo > ~/.config/videoinfox/videoinfo.lastsearchtotal
      echo > ~/.config/videoinfox/videoinfo.lastsearchtotal2
      echo > ~/.config/videoinfox/videoinfo.playedlist
      echo > ~/.config/videoinfox/videoinfo.keptsearch
      echo > ~/.config/videoinfox/videoinfo.tv-dir
      echo > ~/.config/videoinfox/videoinfo.movies-dir
      echo > ~/.config/videoinfox/videoinfo.parent-dir
      echo > ~/.config/videoinfox/videoinfo.lastdownload
      echo > ~/.config/videoinfox/videoinfo.lastfindstring
      echo > ~/.config/videoinfox/videoinfo.lastfinddir
      echo > ~/.config/videoinfox/videoinfo.lastsearchtotal
      echo > ~/.config/videoinfox/videoinfox.set-user-list
          
   
      # SAMPLE URL DOWLOAD LIST BEING CREATED WITH 3 VIDEO URL'S
      echo "https://www.youtube.com/watch?v=d59H0UxhyaY" > $HOME/Downloads/videoinfox-dl-sample-list
      echo "https://www.youtube.com/watch?v=5tSAKS8LRj0" >> $HOME/Downloads/videoinfox-dl-sample-list
      echo "https://www.youtube.com/watch?v=DAPkOxRnh4c" >> $HOME/Downloads/videoinfox-dl-sample-list

      echo

           sec=36
           while [ $sec -ge 0 ]; do  #  This pauses the execution.  It displays and counts down the seconds set in <$sec>
                                
                echo -ne " Downloading Yt-dlp in: $sec\033[0K\r"
                let "sec=sec-1"
                sleep 1
              
           done                  

 
# Yt-dlp initial download attempt on the first run. If it fails, download will be re-attempted when you select the Yt-dlp Menu.
clear
echo
echo 
echo 
echo "___________________________________________________________________________________________________________________"
echo  
echo " $der >>> Attempting to download the most recent version of Yt-dlp"
echo "___________________________________________________________________________________________________________________" 
echo
echo " If Yt-dlp can't be downloaded, the download attempt will be aborted."
echo
echo " If the download fails, it is most likely due to at least 1 of the following reasons:"
echo
echo "    - Your internet connection is down."
echo
echo "    - Github isn't reachable due to technical issues on their end."
echo
echo "    - There is no Yt-dlp release available in:  https://github.com/yt-dlp/yt-dlp/releases/latest/download"
echo
echo
echo " If this download fails, the download attempt will be tried again when you select the Yt-dlp Menu in Videoinfox."
echo
echo
echo " Note: The Yt-dlp Menu will not work until there is a copy of yt-dlp in:"
echo
echo " "$HOME"/.config/videoinfox"
echo
echo

dirtemp="$PWD"  # save dir for restore after ty-dlp download
cd ~/.config/videoinfox
  
timeout 30 wget https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp 2>/dev/null  # download and rename 
 
if [ -f ~/.config/videoinfox/yt-dlp ]  # if yt-dlp exists goto then
   then
        chmod a+rx ~/.config/videoinfox/yt-dlp  # set <yt-dlp-fetched> execute bit
        ~/.config/videoinfox/yt-dlp --version > ~/.config/videoinfox/videoinfo.yt-dlp.version # write yt-dlp ver number to file: yt-dlp.version 
        echo
        echo " Yt-dlp Downloaded . . ."
        echo
        # SAMPLE VIDEO URL BEING COPIED TO CLIPBOARD
        echo "https://www.youtube.com/watch?v=rNWPqfCJDnc" | xclip -sel clip 

        sec=5           
        while [ $sec -ge 0 ]; do  #  This pauses the execution.  It displays and counts down the seconds set in <$sec>                       
             echo -ne " $ver starting in: $sec\033[0K\r"
             let "sec=sec-1"
             sleep 1
        done
        
        rm ~/.config/videoinfox/wget-* 2> /dev/null          


   else
       
        echo
        echo " Yt-dlp Download Failure . . ."
        echo

        sec=20           
        while [ $sec -ge 0 ]; do  #  This pauses the execution.  It displays and counts down the seconds set in <$sec>                       
             echo -ne " $ver starting in: $sec\033[0K\r"
             let "sec=sec-1"
             sleep 1
        done 

        rm ~/.config/videoinfox/wget-* 2> /dev/null    

cd "$dirtemp"  # restore directory

fi

fi

##################################################################################################################################################
#####  You will only see FIRST RUN >>> SETUP again if the  ~/.config/videoinfox directory doesn't exist.  ######################################## 
##################################################################################################################################################


direxist3="$HOME/.config/videoinfox/tmp"

if [ -d "$direxist3" ]  #  if directoty exists goto  <then>
  then
       :
  else
       mkdir ~/.config/videoinfox/tmp
fi


##################################################################################################################################################
#####  4. CHECK FOR  (VIDEOINFOX NOTIFICATION UPDATE)                         routine to get version number from github          #################
########################################################################      and compare it to this scripts version number      #################

clear  # Display while downloading videoinfox from github on startup
echo
echo
echo
echo "___________________________________________________________________________________________________________________"
echo  
echo " $ver >>> Checking for update . . ."
echo "___________________________________________________________________________________________________________________"
echo

dirtemp="$PWD"  # save directory for restore
cd ~/.config/videoinfox/tmp

# download  videoinfox  from github, extract the ver mumber and reformat it
# if the download doesn't come in 2.4 seconds, it will be aborted.  Just for notification.  To prevent script hanging on  wget  during high traffic times.
timeout 2.4 wget -q https://raw.githubusercontent.com/powerhousepro69/videoinfox/main/videoinfox 2>/dev/null

# make script executable to get ver number
chmod +x ~/.config/videoinfox/tmp/videoinfox 2> /dev/null

# get ver number of download
viv=$(~/.config/videoinfox/tmp/videoinfox -v 2> /dev/null)  

# download ver: cut the first 13 characters + sed to remove the dot =  version number minus the dot 
viv2=$(echo "$viv" | cut -c13- | sed -e 's/\.//g' 2> /dev/null) # format: whole number  xxxx

# script ver:   cut the first 13 characters + sed to remove the dot =  version number minus the dot 
viv3=$(echo "$ver" | cut -c13- | sed -e 's/\.//g') # format: whole number  xxxx


# Prevent Update Available notifications from displaying if download fails. 
# If download fails, download version = script version

if [ -f ~/.config/videoinfox/tmp/videoinfox ]  # if file exists goto then
   then  # Downloaded
        :

   else # Download Failure
        viv3="$viv2"
fi


# for the notification just on the home screen

if [ "$viv2" = "$viv3" ]  # If the downloaded version = this script's version goto then
  then
      # Version numbers are the same
      viv4=$(echo -e \ "               ") # dead space place holder for when there is no Update Available in the display
      rm ~/.config/videoinfox/tmp/* 2> /dev/null
      cd "$dirtemp"  # restore directory

  else
      # Version numbers are not the same
      viv4="Update Available"   # update available   notification on home screen
      notify-send "Videoinfox messsage: Update Available" "$viv" # send gui notification with update ver number
      rm ~/.config/videoinfox/tmp/* 2> /dev/null
      cd "$dirtemp"  # restore directory
fi


##################################################################################################################################################
#####  5. IF THE DEFAULT LIST DOESN'T EXIST, CREATE IT  ##########################################################################################
##################################################################################################################################################

if [ -f ~/.config/videoinfox/videoinfox-dl-Default ]  # if file exists then 
then
    :
else  # if file doesn't exist one will be created

# CREATING EMPTY DEFAULT DOWNLOAD LIST WITH LIST EMPTY MESSAGE
echo > ~/.config/videoinfox/videoinfox-dl-Default
echo "Default Download List Empty" >> ~/.config/videoinfox/videoinfox-dl-Default

fi


##################################################################################################################################################
#####  6. CREATE DOWNLOAD LIST HELP FILE  ######################################################################################################## 
##################################################################################################################################################

echo  > ~/.config/videoinfox/videoinfox.download-list-help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help 
echo " "$ver" >>> DOWNLOAD LIST >>> HELP                                                            q - Quit" >> ~/.config/videoinfox/videoinfox.download-list-help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo " There is a Default List and User Created Lists.  If a list is deleted, it's log file will also be deleted." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo " DEFAULT LIST:  - There is just one Default List." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                - The list resides in Videoinfox's .config directory and is maintained by the script." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                - Script Directory location is irrelevant.  The Default List will follow the user." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                - Video URL's' are always downloaded to the default Download Directory." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  Default List Companion: videoinfox -a" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  TO SETUP:  Make a gui shortcut for  videoinfox -a  (no space after the a)" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  The shortcut varies per terminal. I use Mate Terminal and this is my shortcut command:" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  mate-terminal --command=\"videoinfox -a\"" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  TO USE:  Copy a Video URL to the clipboard then use the  videoinfox -a  shortcut." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                           That will add the URL to the Default List.  Rinse and repeat until done." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  Keep pasting your clipboard copies on the fly to the Default List without running Videoinfox." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  When done making the list, start Videoinfox. Load the list and Download." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  Note: Clipboard will be cleared everytime you run the shortcut." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                        Videoinfox doesn't need to be running to use the shortcut." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo " USER LISTS:    - Unlimited User Lists." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                - Lists can be put anywhere and named." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                - Script Directory location is relavant to having access to the User Lists in Videoinfox." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                - Video URL's are always downloaded to the directory of the list's location." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  User Set List Companion: videoinfox -l" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  TO SETUP:  Make a gui shortcut for  videoinfox -l  (no space after the l)" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  The shortcut varies per terminal. I use Mate Terminal and this is my shortcut command:" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  mate-terminal --command=\"videoinfox -l\"" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  TO USE:  Copy a Video URL to the clipboard then use the  videoinfox -l  shortcut." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                           That will add the URL to the User Set List.  Rinse and repeat until done." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  Keep pasting your clipboard copies on the fly to the User Set List without running Videoinfox." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  When done making the list, start Videoinfox. Load the list and Download." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  A User List must be set first for the  videoinfox -l  shortcut to work." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  Create an empty User List.  Select: Create User List.  Give the list a name." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  The new list will be displayed at the top of the screen.  Copy the entire line to the clipboard." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  Then select: Set User List.  Your all set and ready to go.  You can exit Videoinfox if you want." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  Note: Clipboard will be cleared everytime you run the shortcut." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                        Videoinfox doesn't need to be running to use the shortcut." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "   *** The User Lists can be anywhere so lists need to be recursively reachable from the current directory. ***" >> ~/.config/videoinfox/videoinfox.download-list-help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  When a User List is set," >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  It will be stored until 1 of the 3 events happen:  - The list is downloaded" >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                                                                     - The list is deleted" >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                                                                     - Another list is set" >> ~/.config/videoinfox/videoinfox.download-list-help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  You can also make a list with your preferred text editor." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  The download list name always has to beigin with: videoinfox-dl to be accessed by Videoinfox." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  Add anything to the end of the filename." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  Sample download list name: videoinfox-dl-funny-videos" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                  One video URL per line starting at line 1. No Spaces." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo " COMMAND LINE OPTION: videoinfox -u" >> ~/.config/videoinfox/videoinfox.download-list-help       
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo " This option can be used with your own ready to download url list that can be any name and location." >> ~/.config/videoinfox/videoinfox.download-list-help 
echo " There is no need to use the Videoinfox interface with this option. Videos will be downloaded to the" >> ~/.config/videoinfox/videoinfox.download-list-help 
echo " directory of the list location.  Example: videoinfox -u mylist  Only enter the list filename." >> ~/.config/videoinfox/videoinfox.download-list-help 
echo " The list must be recursively reachable from the current directory." >> ~/.config/videoinfox/videoinfox.download-list-help       
echo " The first line in the list must begin with http to be processed." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo " videoinfox -h  will also display the above instuctions for: videoinfox -u" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo " Erorr correction on all Download Lists:  - remove all lines that don't start with  http" >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                                          - remove all duplicate lines." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                                          - remove all empty lines." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                                          * Download lists will be edited if they contain any of the above errors." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo " DOWNLOAD QUEUE: Download multiple Videoinfox Created User Lists." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                 Copy a User List to the clipboard, enter to update then select Add to Queue." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                 When done adding User Lists to the queue, select Download Queue." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "          Notes: Pressing enter before making selection isn't necessary before selecting an option. Pressing enter" >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                 after clipboard copy will update the clipboard display and show what options are available." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                 If there is a User Set List and it gets processed by Download Queue, It will be cleared after" >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                 download. The list will be left untouched. It will just be cleard from User Set List." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                 User Lists will always be downloaded to the directory of the list's location." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo " CREATE DIRECTORY: Easily create directories for your Download Lists with Navigate Tree & Default Dirs Interface." >> ~/.config/videoinfox/videoinfox.download-list-help
echo "                   After directory creation, cd will be applied to the newly created dir. Then Create User List." >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help
echo >> ~/.config/videoinfox/videoinfox.download-list-help


#####  DOWNLOAD LIST HELP COMPLETED  ############################################################################################################# 
##################################################################################################################################################


##################################################################################################################################################
#####  7. CREATE HELP FILE  ###################################################################################################################### 
##################################################################################################################################################

#if [ -f ~/.config/videoinfox/videoinfo.help ]
#  then
#      :

#  else

echo "___________________________________________________________________________________________________________________" > ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " $ver  Where Video Play Is A Clipboard Copy Away" >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Up & Down Arrows or Mouse wheel - scroll                                                             Home - top" >> ~/.config/videoinfox/videoinfo.help
echo " q - quit                                                                                             End - bottom" >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo  >> ~/.config/videoinfox/videoinfo.help
echo " Find local Video Files fast and watch immediately. Download Video Urls effortlessly and watch immediately." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Add URL's to The Default Download list on the fly without leaving your gui or starting up Videoinfox." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Add URL's to unlimited User Set Lists on the fly without leaving your gui or starting up Videoinfox." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Download all of your Videoinfox created url lists with the Download Queue via Yt-dlp." >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Version History is located in:  Settings (set)" >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Find videos to play or get info on: Change to a parent directory of your video library and slect find <f>" >> ~/.config/videoinfox/videoinfo.help
echo " You can also select  <a>  to display all videos recursively." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Search Tips:  The files you search for have to be in the path of the current directory." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Using example filename:   The Reunion Show   and what searches would find it." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " the*      would find files starting with:  the" >> ~/.config/videoinfox/videoinfo.help     
echo >> ~/.config/videoinfox/videoinfo.help
echo " *ion*     would find files with:  ion  anywhere in the file name from the beginning to the end." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " *show     would find files that ended with:  show" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " With search results on the screen, select Play Line and enter the number that you want to play." >> ~/.config/videoinfox/videoinfo.help  
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " 1 2 3 4 5 - Default Dirs  One keypress to change default directories. <Set> to set default directories" >> ~/.config/videoinfox/videoinfo.help     
echo >> ~/.config/videoinfox/videoinfo.help
echo " Default 1-4 have display priority over 5. So if your directory on last exit (5) equals 1-4,  1-4 gets the display.  " >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Last Search  <set>  If search results are not manually deleted <Clear Results> before exit," >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo "                     Three Choices:     1 - Always Save     2 - Never Save     3 - Ask on Exit" >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " To use Play Clipboard:" >> ~/.config/videoinfox/videoinfo.help 
echo >> ~/.config/videoinfox/videoinfo.help 
echo " Copy a video url to the clipboard and press enter to verify the url is valid." >> ~/.config/videoinfox/videoinfo.help  
echo " Then  p  to Download and Autoplay Fullscreen." >> ~/.config/videoinfox/videoinfo.help 
echo >> ~/.config/videoinfox/videoinfo.help 
echo >> ~/.config/videoinfox/videoinfo.help
echo " Clipboard copy is used to interact with Videoinfox in the following areas:" >> ~/.config/videoinfox/videoinfo.help 
echo >> ~/.config/videoinfox/videoinfo.help
echo " Download video url's (yt-dlp) with Play Clipboard, Download Default, Download Choose and Self Destruct." >> ~/.config/videoinfox/videoinfo.help 
echo " Copy a url link (entire line) to the clipboard before selecting any of the above options." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Loading Download List, View Logs, and Add to Queue." >> ~/.config/videoinfox/videoinfo.help
echo " Copy a list (entire line) to the clipboard before selecting any of the above options." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Change Directories in Navigate Tree and Create Directory." >> ~/.config/videoinfox/videoinfo.help
echo " Copy a directory (entire line) to the clipboard before selecting any of the above options." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Note: Optional. Press enter after clipboard copy to update the clipboard display to see available options." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Yt-dlp Menu    d - Download Default... Yt-dlp with no arguements." >> ~/.config/videoinfox/videoinfo.help
echo "                c - Download Choose.... Choose video type and quality before download." >> ~/.config/videoinfox/videoinfo.help
echo "                s - Self Destruct...... Download, auto play then delete when the video player is quit." >> ~/.config/videoinfox/videoinfo.help
echo "                g - Download List...... Instructions in help on the Download List screen." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Last Download works with Play Clipboard, Download Default and Download Choose." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Note: Vidoeinfox keeps its own yt-dlp copy in:  ~/.config/videoinfox" >> ~/.config/videoinfox/videoinfo.help
echo "       On every start of Videoinfox, it will check for its own update and notify if an update is available." >> ~/.config/videoinfox/videoinfo.help
echo "       No auto update checks are done for Yt-dlp.  To check for a Yt-dlp update and install update: Settings (Set)"  >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Autoplay Features:" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Play Clipboard: This option always writes to the Played List." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Play Directory: Autoplay all videos in the current directory from beginning to end of the directory listing." >> ~/.config/videoinfox/videoinfo.help
echo "                 This option never writes to the Played List." >> ~/.config/videoinfox/videoinfo.help
echo "                 Available in: Home Screen, Navigate Tree and View Downloads." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Autoplay Line:  Autoplay from line number entered to the end of the list." >> ~/.config/videoinfox/videoinfo.help
echo "                 This option never writes to the Played List." >> ~/.config/videoinfox/videoinfo.help
echo "                 Available in: Home Screen, Navigate Tree, Played List, Play List and View Downloads." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Play Line:      Only play the line number entered." >> ~/.config/videoinfox/videoinfo.help
echo "                 This option always writes to the Played List." >> ~/.config/videoinfox/videoinfo.help
echo "                 Available in: Home Screen, Navigate Tree, Played List. Play List and View Downloads" >> ~/.config/videoinfox/videoinfo.help
echo "                 Note: One exception. The Playlist will never write to the Played List." >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Playlist:" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Playlist Add: On the Home Screen. Add videos from find results to the Playlist." >>~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Playlist Add: In Navigate Tree. Add videos from directory listings to the Playlist." >>~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Playlist Add: In Played List. Add videos from Played List to the Playlist." >>~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Autoplay Line: Autoplay. Start from any line number and play to the end of the list. " >>~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Play Line: Only play the line number entered. (View Playlist >>> Play Line won't write to the Played List.)" >>~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Planned Feature: Multiple Playlist Capability." >>~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " videoinfox -h to see command line options." >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " When you use:  Videoinfox Update in Settings (Set), the update will always be applied to: /usr/local/bin/  " >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo "  Play Clipboard voodoo wouldn't have been possible without XCLIP" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo "  Download feature wouldn't have been possible without YT-DLP" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo "  Videoinfox Features:" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo "  - Navigation was designed to be robust and efficient. One keypress for all menu selections." >> ~/.config/videoinfox/videoinfo.help 
echo "  - Check for update on startup and notifity if update is available. Download and update in Videoinfox." >> ~/.config/videoinfox/videoinfo.help
echo "  - Play either a local file or a downloadable video url via yt-dlp." >> ~/.config/videoinfox/videoinfo.help
echo "  - Unlimited User Lists: Keep pasting Video URL's on the fly from the clipboard to the User Set List." >> ~/.config/videoinfox/videoinfo.help
echo "  - Default List: Keep pasting Video URL's on the fly from the clipboard to the Default List." >> ~/.config/videoinfox/videoinfo.help
echo "  - See codec, resolution and duration on the playing video." >> ~/.config/videoinfox/videoinfo.help
echo "  - Play Clipboard is available in: Home  Played List  Play List  Yt-dlp Menu  View Downloads" >> ~/.config/videoinfox/videoinfo.help
echo "  - Play Clipboard: Blinking notification when there is a valid video file or video url for play." >> ~/.config/videoinfox/videoinfo.help
echo "  - Play Directory autoplay available on: Home Screen and in Navigate Tree." >> ~/.config/videoinfox/videoinfo.help
echo "  - Blinking Play Directory otification when there are video files in the current directory." >> ~/.config/videoinfox/videoinfo.help
echo "  - Navigate Tree Blinking Change Directory notification when there is a valid directory in the clipboard." >> ~/.config/videoinfox/videoinfo.help
echo "  - Navigate Tree with Play Directory autoplay and Play Line with autoplay. Select line number to start play." >> ~/.config/videoinfox/videoinfo.help
echo "  - Video Player (ffplay) auto closes when the video ends." >> ~/.config/videoinfox/videoinfo.help
echo "  - Auto clear the clipboard after the video player is closed." >> ~/.config/videoinfox/videoinfo.help
echo "  - To watch the last download after Play Clipboard cleared the link select Last Download." >> ~/.config/videoinfox/videoinfo.help
echo "  - Auto clear the clipboard of invalid files and urls." >> ~/.config/videoinfox/videoinfo.help
echo "  - Press enter after your copy to the clipboard to validate clipboard content." >> ~/.config/videoinfox/videoinfo.help
echo "  - File types searched for: .webm   .mp4   .mkv   .avi   .divx" >> ~/.config/videoinfox/videoinfo.help
echo "  - Rapid directory changing by setting default directories (4) in Settings. The 5th is dir at last exit." >> ~/.config/videoinfox/videoinfo.help
echo "  - Default Dirs - 1 2 3 4 5  available in: Home  Navigate Tree  Download List  More Options" >> ~/.config/videoinfox/videoinfo.help
echo "  - Play Line option. Only play the line number entered and write to Pkayed List." >> ~/.config/videoinfox/videoinfo.help
echo "  - Autoplay Line option. Start autoplay from any line in the Played List by entering the line number." >> ~/.config/videoinfox/videoinfo.help
echo "  - Played List will keep track of everything played except for Play Directory and Autoplay Line." >> ~/.config/videoinfox/videoinfo.help
echo "  - Played List: Play All option that will auto play the entire list with option to quit." >> ~/.config/videoinfox/videoinfo.help
echo "  - Playlist: Save a list of videos from find results and directory listings." >> ~/.config/videoinfox/videoinfo.help
echo "  - Remove duplicates from the Playlist and Played List." >> ~/.config/videoinfox/videoinfo.help
echo "  - Enter a video file with full path to get info on and play." >> ~/.config/videoinfox/videoinfo.help
echo "  - Auto save last find result(s) and autoload until deleted. Defaulted to never save. Changed in Settings." >> ~/.config/videoinfox/videoinfo.help
echo "  - Yt-dlp integration for easy download and play of single url's or entire lists." >> ~/.config/videoinfox/videoinfo.help
echo "  - Download Queue: Add unlimited Videoinfox User Download Lists to the queue for download." >> ~/.config/videoinfox/videoinfo.help
echo "  - Download Default: Yt-dlp with no arguments. Download only. No auto play." >> ~/.config/videoinfox/videoinfo.help
echo "  - Download Choose: Choose video type and quality before download. Download only. No auto play." >> ~/.config/videoinfox/videoinfo.help
echo "  - Self Destruct: Download, auto play, delete when the player is closed." >> ~/.config/videoinfox/videoinfo.help
echo "  - Last Download available in: Home and Yt-dlp Menu for Play Clipboard, Download Default and Download Choose." >> ~/.config/videoinfox/videoinfo.help
echo "  - Download List: Blinking notification on list load." >> ~/.config/videoinfox/videoinfo.help
echo "  - View Logs: Blinking notification on log load." >> ~/.config/videoinfox/videoinfo.help
echo "  - Default List companion: Create a gui shortcut for: videoinfox -a  to add to the Default List." >> ~/.config/videoinfox/videoinfo.help
echo "  - User Set List companion: Create a gui shortcut for: videoinfox -l  to add to the User Set list." >> ~/.config/videoinfox/videoinfo.help
echo "  - Download any list. Any name and location. No need to use the Videoinfox interface: videoinfox -u listname" >> ~/.config/videoinfox/videoinfo.help
echo "  - Autoplay video files in the current directory with option to quit. videoinfox -d" >> ~/.config/videoinfox/videoinfo.help
echo "  - Download and update Yt-dlp in Videoinfox." >> ~/.config/videoinfox/videoinfo.help
echo "  - Save directory state on exit to load on next run." >> ~/.config/videoinfox/videoinfo.help
echo "  - Change directory by entering full path." >> ~/.config/videoinfox/videoinfo.help
echo "  - Find directory and change to it by copying it to clipboard." >> ~/.config/videoinfox/videoinfo.help
echo "  - List video info one directory deep. Save per directory." >> ~/.config/videoinfox/videoinfo.help
echo "  - Recursive count of videos broken down by video type." >> ~/.config/videoinfox/videoinfo.help
echo "  - Recursive duration (days:hrs:min:sec) Save per directory." >> ~/.config/videoinfox/videoinfo.help
echo "  - GUI notifications." >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Privacy Policy: Videoinfox will never collect or attempt to transmit any information on it's users." >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo "                 Internet activity will only happen under the following circumstances:" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo "                 - On First Run, Github will be contacted to download Yt-dlp." >> ~/.config/videoinfox/videoinfo.help
echo "                 - On every start, Github will be contacted to download Videoinfox for Update Available Check." >> ~/.config/videoinfox/videoinfo.help
echo "                 - Everytime Videoinfox Update or Yt-dlp Update is selected in Settings, Github will be contacted." >> ~/.config/videoinfox/videoinfo.help
echo "                 - If there isn't a copy of Yt-dlp in Videoinfox's config directory, Github will be contacted" >> ~/.config/videoinfox/videoinfo.help
echo "                   everytime you select the Yt-dlp Menu to attempt a download of Yt-dlp." >> ~/.config/videoinfox/videoinfo.help
echo "                 - Everytime Yt-dlp is used to download a video url." >> ~/.config/videoinfox/videoinfo.help
echo "                   Refer to Yt-dlp's site for their privacy policy. https://github.com/yt-dlp/yt-dlp" >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " Thanks for checking out Videoinfox!  If you encounter any issues: Reddit /videoinfox" >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help
echo " If Videoinfox is removed, the directory  ~/.config/videoinfox  will have to be manually deleted." >> ~/.config/videoinfox/videoinfo.help
echo "___________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo.help
echo >> ~/.config/videoinfox/videoinfo.help

#fi

#####  HELP COMPLETED  ########################################################################################################################### 
##################################################################################################################################################




##################################################################################################################################################
#####  8. CREATE VERSION HISTORY FILE  ########################################################################################################### ################################################################################################################################################## 


echo " _________________________________________________________________________________________________________________________" > ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " $ver  Where Video Play Is A Clipboard Copy Away                                            VERSION HISTORY" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " Up & Down Arrows or Mouse wheel - scroll                                                                    Home - top" >> ~/.config/videoinfox/videoinfo-ver-history
echo " q - quit                                                                                                    End - bottom" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history



# KNOWN ISSUE
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " KNOWN ISSUES: None Reported." >> ~/.config/videoinfox/videoinfo-ver-history

echo >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history

# STILL NEEDS COMPLETED
echo " PLANNED FEATURE: Multiple Playlist Capability." >> ~/.config/videoinfox/videoinfo-ver-history

echo >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history

# NOTE TO ANYONE CHECKING OUT THE CODE
echo " NOTE: There are a lot of redirects to /dev/null only to suppress script errors. Videoinfox does the error handling.">> ~/.config/videoinfox/videoinfo-ver-history 

echo >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history



echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v3.4.03 Fix: Last Download in Yt-dlp Menu wasn't changing back to user set directory after video play." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v3.4.02 Updated Home Help and Version History." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v3.4.01 Change timeout on message: Added to Playlist . . ." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v3.4.00 Added: Playlist Add in Played List. Add videos from the Played List to the Playlist." >> ~/.config/videoinfox/videoinfo-ver-history
echo "                View Playlist added to Played List." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "           Fix: Bug in Played List" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "        Update: Home Help > Autoplay Features and Playlist." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v3.3.03 Fixed an error in Clear Results on Home Screen." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v3.3.02 Switched 2 lines around in Yt-dlp >>> Download List" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v3.3.01 Add: Remove duplicates from the Play List." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v3.3.00 Additions and Changes" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         New feature: PlayList Add: add video selection to the Playlist by entering line number." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history              
echo "         Playlist Add: added to the Home Screen. Add to the Playlist from Search Results." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Playlist Add: added to Navigate Tree. Add to the Playlist from directory listings." >> ~/.config/videoinfox/videoinfo-ver-history
echo "                       View Playlist was added to Navigate Tree." >> ~/.config/videoinfox/videoinfo-ver-history 
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         No more coying to the clipboard to play selections from the Playlist." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         View Playlist look and function was updated to maintain user interface continuity." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Added to View Playlist: Autoplay Line and Play Line. Neither will write to the Played List." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Removed error correction routine for clipboard copy errors. It was no longer needed." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Added error correction to verify file validity before adding selection to the Playlist." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Notes:" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Local video files can no longer be added to the Playlist from the Clipboard." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Local video files played with Play Clipboard will still be added to the Played List." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         All Local video play and autoplay is now done by entering the line number or using Play Directory." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history 
echo >> ~/.config/videoinfox/videoinfo-ver-history    
echo "         The clipboard feature is still used to:" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Download video url's (yt-dlp) with Play Clipboard, Download Default, Download Choose and Self Destruct." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Loading Download List, View Logs, and Add to Queue." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Change Directories in Navigate Tree and Create Directory." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Updated Home Help." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v3.0.00 New features in Yt-dlp >>> Download List. Added: Add to Queue, Download Queue and Create Directory." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.9.52 Updated header in View Downloads." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.9.51 Updated Autoplay Features in Home Help." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.9.50 Fixed Major Faux Pas with Autoplay Line and Play Line." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         I was referencing the absolute path on my machine with the last 2 added features." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Added Play Directory, Autoplay Line and Play Line to View Downloads." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.9.41 Removed play loop exit in Play Line." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.9.40 Played List Menu Updated. No more copying to the clipboard to play a local file. Enter line number to play." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.9.30 Change, Add and Fix." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Change: Renamed Play Line to Autoplay Line. Autoplay from entered line number to end of list." >> ~/.config/videoinfox/videoinfo-ver-history
echo "                 - Home Screen: Moved a few things around. Autoplay Line will not write to the Played List." >> ~/.config/videoinfox/videoinfo-ver-history
echo "                 - Navigate Tree: Moved a few things around. Autoplay Line will not write to the Played List." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "            Add: - Play Line to Home Screen. Only Play Line number entered. This feature will write to the Played List." >> ~/.config/videoinfox/videoinfo-ver-history
echo "                 - Play Line to Navigate Tree. Only Play Line number entered. This feature will write to the Played List." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "                 - Autoplay Features added to Home Help." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "            Fix: Last Search Setting (Ask On Exit) was freezing script on invalid selection." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.9.01 Fix: Video Info on Home Screen. Get info on video in clipboard or by entering the line number." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.9.00 Add: Play Number on Home Screen." >> ~/.config/videoinfox/videoinfo-ver-history
echo "              No more copying a find result to the clipboard to play. Select Play Number and enter the number to play." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.44 Add: Error reporting added to command line options. User notified if videoinfox's config directory is missing." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.42 Add: videoinfox -d  Autoplay video files in the current directory." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.41 Fix: Play Directory alphabetical sorting for directories that include multiple file extensions." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.40 Added: Navigate Tree >>> Play Line. Select line number to start autoplay from directory listing." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Fix: Find results needed sorted alphabetically in: Find Directory and Home Find." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.30 Added: Played List >>> Play Line. Start Autoplay from any line in the Played List by entering the line number." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.26 Fixed: Play Clipboard play notificaton displaying when processing an invalid url." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.25 Fixed: Flawed logic in Last Download and http side of Play Clipboard keeping track of last sucessful download." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.24 Fixed: Play Clipboard and Last download were breaking with file names that contained a [" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.23 Updated: Home Help. Last Download will work with Play Clipboard, Download Default and Download Choose.." >> ~/.config/videoinfox/videoinfo-ver-history
echo "                  I fixed this many updates ago and forgot to update it in help." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.22 Added: Error Reporting for Play Clipboard and Play Directory." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "                If Play Clipboard is selected with no playable content available in the clipboard," >> ~/.config/videoinfox/videoinfo-ver-history
echo "                Error Message Displayed: No playable content in the clipboard . . ." >> ~/.config/videoinfox/videoinfo-ver-history
echo "                With Play Clipboard, you will also see this message right after a Yt-dlp download completes." >> ~/.config/videoinfox/videoinfo-ver-history
echo "                The error shows there because the clipboard is cleared immediately after the download is completed." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "                If Play Directory is selected with no playable content available in the current directory," >> ~/.config/videoinfox/videoinfo-ver-history
echo "                Error Message Displayed: No playable content in the current directory . . ." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Fix: If a User Set List was deleted outside of Videoinfox, It would still display as a Set User List." >> ~/.config/videoinfox/videoinfo-ver-history
echo "              Now when download Download List menu is selected, if a list doesn't exist, it is cleared from User Set List." >> ~/.config/videoinfox/videoinfo-ver-history
echo "              The gui notification will also notify if the user download list is not set or missing when using the" >> ~/.config/videoinfox/videoinfo-ver-history
echo "              videoinfox -l shortcut. " >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.20 Added: Play All option for Played List. Auto play the entire list with option to quit." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         THANKS to Falderol on Reddit for pointing me in the right direction so I was able to get the play loop working." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.14 Fix: Directory at exit was not auto loading on next run." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.13 Added: Privacy Policy added to Home Help" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.12 Edited: Version History. Posted known issue." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "                 If Play Clipboard is selected with an invalid video url in the clipboard, the gui play notification" >> ~/.config/videoinfox/videoinfo-ver-history
echo "                 still displays. This only happens if Play Clipboard is selected before pressing enter." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.11 Updated: Home Help and Download List Help." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.10 Added: Command line option -u" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "                This option can be used with your own ready to download url list that can be any name and location." >> ~/.config/videoinfox/videoinfo-ver-history
echo "                There is no need to use the Videoinfox interface with this option. Videos will be downloaded to the" >> ~/.config/videoinfox/videoinfo-ver-history
echo "                directory of the list location.  Example: videoinfox -u mylist  Only enter the list filename." >> ~/.config/videoinfox/videoinfo-ver-history
echo "                The list must be recursively reachable from the current directory." >> ~/.config/videoinfox/videoinfo-ver-history
echo "                The first line in the list must begin with http to be processed." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "                videoinfox -h  will display the above instructions." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.05 Fixed issues from v2.8.03 and v2.8.04 Had a mess going on here for a minute." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.04 Fix: I was unaware that my cat edited the last update before commit. Forgot to lock the keyboard and auto save" >> ~/.config/videoinfox/videoinfo-ver-history
echo "              got the cat's edit.  The dog really did eat my homework. lol" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.03 Fix: Videoinfox Update Available was showing on download fail." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "              I went back through the download and update routines and found more errors." >> ~/.config/videoinfox/videoinfo-ver-history
echo "              Fixed error checking and reporting. Tested all possible scenarios with download success vs. download fail." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.02 Fix: Videoinfox and Yt-dlp download and update routines." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "              On download fail, notification given." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.01 Fix: a mistake that was in command line option: videoinfox -h" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Error:       -u Write clipboard content to User Set List." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Correction:  -l Write clipboard content to User Set List." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.8.00 Feature Added: videoinfox -l shortcut for User Lists." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Copy your links on the fly without needing to have Videoinfox running." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Complete instructions located in: Yt-dlp >>> Download List >>> Help" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.7.15 Updated: Features List In Help" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.7.14 Added: Command line option -h" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.7.13 Change: Videoinfo Update exit message appearance." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.7.12 Bug Squashed: Download List" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Fix: After downloading a user list, the directory wasn't changing back to what is was before downloading list." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.7.11 Completed Version History." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         It has been a month of heavy coding since I started writing Videoinfox. I initially wrote it because I wanted" >> ~/.config/videoinfox/videoinfo-ver-history
echo "         to learn more about the Linux Shell.  I have been a Linux only user for 18 years.  I have learned more about" >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Linux in the last 30 days than I have in the past 18 years.  Screenshot of first script at bottom of page." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.7.10 Added:  Code Stats  to Settings (set)  Edited Help on home screen.  Cleaned up some comments." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.7.00 Changes, Additions and Bug Squashing." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Cosmetic update on  1 2 3 4 5 - Default Dirs  display." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         When a default directory is selected that number stays normal while the other 4 numbers will be less bold." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         If you change to a directory that is not a default directory 1-5: All 5 numbers will be less bold." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         If directory on exit (5) matches any of the default directories 1-4: 1-4 gets the display." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Download List  - Added:  1 2 3 4 5 - Default Dirs  selector." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         More Options   - Changed look to maintain continuity.  " >> ~/.config/videoinfox/videoinfo-ver-history
echo "                        - Changed options from numbers to letters" >> ~/.config/videoinfox/videoinfo-ver-history
echo "                        - Added:  1 2 3 4 5 - Default Dirs  selector." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Home Screen    - Changed Navigate Tree option from  t  to  n" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         View Downloads - Directory is saved on the way in because the dir is changed to the Default Download Directory." >> ~/.config/videoinfox/videoinfo-ver-history
echo "                          Directory is restored on quit." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Fix: View Downloads   Valid clipboard content was being lost on quit." >> ~/.config/videoinfox/videoinfo-ver-history
echo "                               Valid clipboard content should only be cleared after Video Player exit." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Fix: Navigate Tree -  Directory was getting changed when quitting to the Home screen." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Fix: Self Destruct - After copying to the clipboard, you had to press enter first." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Fix: Download List - After a list was downloaded the directory was changed back to what it was pre download." >> ~/.config/videoinfox/videoinfo-ver-history 
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         First Run now checks for the directory: ~/Downloads  If the directory doesn't exist, it is created." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Directory Policy: Directory will only be change when the user changes the directory." >> ~/.config/videoinfox/videoinfo-ver-history 
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.1.00 Added Default Download List and a command line option  -a  for making a gui shortcut" >> ~/.config/videoinfox/videoinfo-ver-history
echo "         to keep pasting your clipboard copies on the fly to the Default List without needing to run Videoinfox." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Videoinfox will run, paste your clipboard content to the Default List and exit.  Make Shortcut:  "videoinfox -a"  " >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         New feature located in:  Yt-dlp Menu >>> Download List >>> Default List           Help -  Download List >>> Help" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.0.73 Added done downloading gui notification to Download Default.">> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.0.72 View Downloads  and  Last Download.">> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Fix: Valid clipboard content was being cleared after the above options were run then quit.">> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Clipboard Policy: There are only 2 circumstances when valid clipboard content will be cleared.">> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "                           1. User copies to clipboard.     2. Clipboard has been played.">> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.0.71 Play Clipboard handling of invalid urls and an empty clipboard.">> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Fix: Running Play Clipboard with an invalid url would play the Last Download.">> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Add: Play Clipboard won't run if the clipboard is empty.">> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.0.70 Download List menu fixes and change to download Log.">> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Fix: If you would try to Download List with an empty clipboard, it would throw an error.">> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Add: View List won't run if the clipboard is empty.">> ~/.config/videoinfox/videoinfo-ver-history
echo "         Add: View Log  won't run if the clipboard is empty.">> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Change: Download log only shows url and matching filename." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.0.69 Added another decimal to the version number be compliant with Semantic Versioning.">> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.068  Fixed auto play failing with urls in Play Clipboard. This issue also caused Last Download auto play to fail. ">> ~/.config/videoinfox/videoinfo-ver-history
echo "         Below is what would cause the failure." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Only with a URL. If you download a video file and you already have a filename with the same name but a" >> ~/.config/videoinfox/videoinfo-ver-history
echo "         different video extension in the current directory, it would cause Play Clipboard auto play to fail." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Last Download would also fail to play in this situation." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.067  Play Directory will only execute if video files exist in the current directory." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         On the Home Screen, the dash at Play Directory will blink if video files exist in the current directory." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.066  Version History added to Settings  Version History is still under construction." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.065  Auto clear clipboard content after player quit script wide." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history      
echo "         Before Update:  Yty-dlp Menu  Valid video url in the clipboard causes Play Clipboard to blink." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         After Update: Blinking along with Play Clipboard, (just -)  Download Default, Download Choose and Self Destruct" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         They are all available options with a valid video url in the clipboard." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.064  More error handling with clipboard content" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Affected areas: Anywhere there is Play Clipboard. Also, Navigate Tree and Download List" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Any content that is copied to the clipboard that doesn't start with   http   was addressed with this update." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         A file exist check is done on the clipboard content. If the file doesn't exist," >> ~/.config/videoinfox/videoinfo-ver-history
echo "         the clipboard is cleared and the invalid content never makes it to the clipboard display." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         This was already done after you pressed enter.  Now it is also done before pressing enter." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         The above update doesn't include    http   because Yt-dlp validates anything that starts with   http" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.063  Download List Menu fix." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         I forgot to refresh the clipboard variable   pasteclip   in the following options:" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         d - Download List     v - View List     l - View Logs" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         The user was forced to press enter after copying to the clipboard for the above options to work." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Now those 3 features refresh the clipboard variable upon entering those options." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         No need to press enter after copy unless you want to update the clipboard display first." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.062  Bug Squashed in Play Clipboard and Last Download." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         If you downloaded a video file and you already had the same filename in another directory, find was returning" >> ~/.config/videoinfox/videoinfo-ver-history
echo "         more than one result .  This caused Play Clipboard to fail on auto play." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         It also caused Last Download play to fail." >> ~/.config/videoinfox/videoinfo-ver-history 
echo "         FIX: -maxdepth 1 was added to those find lines in Play Clipboard and Last Download." >> ~/.config/videoinfox/videoinfo-ver-history

echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.061  Download List added to the Yt-dlp Menu." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Create download list(s) of video urls with your preferred text editor." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Then use Videoinfox to download the entire list." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         The rel located in:   Download List   explains how the download list feature works." >> ~/.config/videoinfox/videoinfo-ver-history
echo "_________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.060  Fixed typo on Navigate Tree" >> ~/.config/videoinfox/videoinfo-ver-history 
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.059  Blinking Change Directory in Navigate Tree." >> ~/.config/videoinfox/videoinfo-ver-history
echo>> ~/.config/videoinfox/videoinfo-ver-history
echo "         Change Directory blink when valid directory is in clipboard." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Also added a loop to Change Directory in Navigate Tree." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         To prevent changing to clipboard copied directories outside of the Treetop." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.058  Yt-dlp menu update. Now 2 download choices:" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         d - Download Default - Yt-dlp with no arguments." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         c - Download Choose  - Choose video type and quality before download." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.057  1 2 3 4 5 - Default Dirs added to Navigate Tree." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Total Files: added  (file count 1 dir deep)  Navigate Tree" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history 
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.056  Added missing features in Navigate Tree" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Clipboard content is now saved when entering Navigate Tree and restored on quit." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Total Files: (recursive) Was added to the display." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         When navigating in or out of a directory," >> ~/.config/videoinfox/videoinfo-ver-history 
echo "         Play Directory will blink when video files are available in the current directory." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Yt-dlp menu - Clear clipboard after download." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.055  Added Navigate Tree with Play Directory:" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history   
echo "         Change Directory, Up one Level and Treetop" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.054  Play Directory" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Play Directory - Auto play with option to quit every time a video ends (played to end or quit by user)." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Moved options around on the home screen.  The blank space will be for another feature." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         (set) was changed from  d  to  z        - d  is now for Play Directory" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         all  (x - Clear Clipboard) have been removed because Play Clipboard will clear the clipboard" >> ~/.config/videoinfox/videoinfo-ver-history
echo "         everytime there is an invalid valid file or url in the clipboard.  If it is a vald url but not a video url," >> ~/.config/videoinfox/videoinfo-ver-history
echo "         yt-dlp will catch that and the clipboard will be cleared." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.053  Video Player (ffplay) auto closes when the video ends." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Auto exit was added to all ffplay lines." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.052  Added check for update on startup" >> ~/.config/videoinfox/videoinfo-ver-history
echo  >> ~/.config/videoinfox/videoinfo-ver-history
echo "         If update available: Message displayed in Videoinfox only on the home screen right after the version number." >> ~/.config/videoinfox/videoinfo-ver-history
echo "         If wget doesn't get the download in 2.4 seconds, it is aborted," >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Home screen display: update available with gui notification: Update Available & update version number" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.051  Added digit after decimal on version number." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         fix: Help file wasn't  getting updated for existing users." >> ~/.config/videoinfox/videoinfo-ver-history 
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.05   Some code comments fixed. Sample video url loaded for first run." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.04   Play Clipboard now on all content screens." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Squashed a bug in Play Clipboard." >> ~/.config/videoinfox/videoinfo-ver-history 
echo "         That feature would fail when url had a video filename that had a dot before the .ext" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         New feature added in  >>> SETTINGS >>> LAST SEARCH" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         If there are search results on the the home screen on exit, the below always applies to your next run." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         1 - Always Save     2 - Never Save     3 - Ask on Exit" >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.03   Added space below prompt at (play list deleted) and (played list deleted)." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.02   Major Layout changes to remove interface redundancy. + more features." >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "         Home, playlist and played list screens are aware if the clipboard contains a valid file or a valid url link in" >> ~/.config/videoinfox/videoinfo-ver-history
echo "         it and act accordingly. Yt-dlp now tries to extract a fliename from the link in the clipboard. If it is" >> ~/.config/videoinfox/videoinfo-ver-history
echo "         successful, the videos name will be displayed.  Now every time there is a valid file or a valid url in the" >> ~/.config/videoinfox/videoinfo-ver-history 
echo "         clipboard... <Play Clipboard> will blink to let the user know there is playable content in the clipboard." >> ~/.config/videoinfox/videoinfo-ver-history 
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.01   Had to change the timeout on the first run screen from 3 seconds back to 30 seconds." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v2.00   Intoroduction of Play Clipboard." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " v1.99 and earlier versions:  I wasn't keeping track of version history.  At that point in time, I didn't planned on" >> ~/.config/videoinfox/videoinfo-ver-history
echo " Videoinfox having all the features it has now.  It was just a few hundred lines of code to find a video file's codec," >> ~/.config/videoinfox/videoinfo-ver-history
echo " resolution and duration." >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " Videoinfox's Start: Below was the first home screen which is now just another option (More Options) in Videoinfox. " >> ~/.config/videoinfox/videoinfo-ver-history
echo "                     It was named Videoinfo until I found out the word Videoinfo was already in use. " >> ~/.config/videoinfox/videoinfo-ver-history
echo "                     The scripts main feature uses Xclip which only works on Xserver. That is why I added x to Videoinfo. " >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "                     Working Directory:" >> ~/.config/videoinfox/videoinfo-ver-history
echo "                     Clipboard Content:" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "                     Videoinfo" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history               
echo "                     1. List Directory" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "                     2. Change Directory" >> ~/.config/videoinfox/videoinfo-ver-history
echo "                     3. Find Directory" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "                     4. Enter Video File" >> ~/.config/videoinfox/videoinfo-ver-history
echo "                     5. Find Video File" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "                     6. Video Count" >> ~/.config/videoinfox/videoinfo-ver-history
echo "                     7. Video Duration" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo "                     Enter an Option: " >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
echo " _________________________________________________________________________________________________________________________" >> ~/.config/videoinfox/videoinfo-ver-history
echo >> ~/.config/videoinfox/videoinfo-ver-history
###########################  END VERSION HISTORY  ################################################################################################ 
##################################################################################################################################################



read -r diratexit < ~/.config/videoinfox/videoinfo.dir-at-exit
cd "$diratexit" 2>/dev/null 

#   The Line below is what gets the Codec & Resolution from a video file.
codecres="ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1"


##################################################################################################################################################
###########################  HOME LOOP START #####################################################################################################
##################################################################################################################################################

function menuf {

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

grabclip=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

if [ "$grabclip" = "http" ]  # if the first 4 characters = <http> go then
  then
      :

  else      
      if [ -f "$pasteclip" ]
        then
            :
        else
            echo "$pastetemp" | xclip -sel clip  # clearing out the clipboaed
            pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      fi
fi


# playedlist sort routine removed here



pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
                        
dirinhome="$PWD" 

#  Load directory from last exit
echo "$dirinhome" > ~/.config/videoinfox/videoinfo.home.dir

grabdirfornav="$PWD"  # Save tree top before entering  NAVIGATE TREE  loop
echo "$grabdirfornav" > ~/.config/videoinfox/videoinfo.navigate-dir-dat
read -r grabdirfornav2 < ~/.config/videoinfox/videoinfo.navigate-dir-dat

clear

#  read last find total file count
read -r searchtotal < ~/.config/videoinfox/videoinfo.lastsearchtotal

# save date and time of last find
stat -c %y ~/.config/videoinfox/videoinfo.findwork > ~/.config/videoinfox/videoinfo.lastfindtime

# line below  strip tha last 17 characters from <stat> time of file: ~/.config/videoinfox/videoinfo.lastfindtime
cat ~/.config/videoinfox/videoinfo.lastfindtime | awk '{ print substr( $0, 1, length($0)-17 ) }' | cut -c 4- > ~/.config/videoinfox/videoinfo.time
mv ~/.config/videoinfox/videoinfo.time ~/.config/videoinfox/videoinfo.lastfindtime



#  if search total is any number
if [ "$searchtotal" = "" ]  # if the file <~/.config/videoinfox/videoinfo.lastsearchtotal> is empty goto then
  then
      dashj=$(echo "-")  # don't blink dash on home screen @ Play Number
      rm ~/.config/videoinfox/tmp/videoinfo-findwork.tmp 2>/dev/null
      rm ~/.config/videoinfox/tmp/videoinfo-number-findwork.tmp 2>/dev/null 


  else
      dashj=$(echo -e "\033[5m-\033m\033[0m\033[5m\033[5m\033[0m")  # blink dash on home screen @ Play Number

# cat ~/.config/videoinfox/videoinfo.findwork

#  REMOVE BLANK LINES
sed '/^$/d' ~/.config/videoinfox/videoinfo.findwork > ~/.config/videoinfox/tmp/videoinfo-findwork.tmp 2>/dev/null

# REMOVE PATH ONLY LEAVING FILENAME
sed 's/.*\///' ~/.config/videoinfox/tmp/videoinfo-findwork.tmp > ~/.config/videoinfox/tmp/videoinfo-number-findwork.tmp2 2>/dev/null

# CREATE NUMBERED lIST
sed '/./=' ~/.config/videoinfox/tmp/videoinfo-number-findwork.tmp2 | sed '/./N; s/\n/ /' > ~/.config/videoinfox/tmp/videoinfo-number-findwork.tmp 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo-number-findwork.tmp2 2>/dev/null



      cat ~/.config/videoinfox/tmp/videoinfo-number-findwork.tmp  # display numbered find results    
      #echo
      echo      
      echo "Dir: "$(cat ~/.config/videoinfox/videoinfo.lastfinddir 2>/dev/null) # display last directory that last find was run from
      echo "Date: "$(cat ~/.config/videoinfox/videoinfo.lastfindtime 2>/dev/null) # display last find time
      echo "Search: "$(cat ~/.config/videoinfox/videoinfo.lastfindstring 2>/dev/null)  # display last find string that was used
      echo "Results: ""$searchtotal"  # number of files found
      

fi


# LOAD DEFAULT DIRECTORIES
read -r dir1 < ~/.config/videoinfox/videoinfo.tv-dir 2> /dev/null
read -r dir2 < ~/.config/videoinfox/videoinfo.movies-dir 2> /dev/null
read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir 2> /dev/null
read -r dir4 < ~/.config/videoinfox/videoinfo.parent-dir 2> /dev/null
read -r dir5 < ~/.config/videoinfox/videoinfo.dir-at-exit 2> /dev/null

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content                          

##################################################################################
##########  START   1 2 3 4 5 - DEFAULT DIRS   DISPLAY ROUTINE  ##################
################################################################################## 

# DIRECTORY SELECTED IS NORMAL TEXT AND THE OTHER 4 ARE LESS BOLD. 

# DEFAULT DIR NUMBER 1 FORMAT
dirdisplay1=$(echo -e "1\033[2m 2 3 4 5\033[0m")
# DEFAULT DIR NUMBER 2 FORMAT
dirdisplay2=$(echo -e "\033[2m1 \033[0m2 \033[2m3 4 5\033[0m") 
# DEFAULT DIR NUMBER 3 FORMAT
dirdisplay3=$(echo -e "\033[2m1 2 \033[0m3 \033[2m4 5\033[0m")
# DEFAULT DIR NUMBER 4 FORMAT
dirdisplay4=$(echo -e "\033[2m1 2 3 \033[0m4 \033[2m5\033[0m")
# DEFAULT DIR NUMBER 5 FORMAT
dirdisplay5=$(echo -e "\033[2m1 2 3 4 \033[0m5\033[0m")
# NO MATCH ALL LESS BOLD
dirdisplayno=$(echo -e "\033[2m1 2 3 4 5\033[0m")


# FORMAT PWD NAME FOR COMPARISON
echo "$PWD" > ~/.config/videoinfox/videoinfox.pwd.tmp  # write PWD to a tmp file: videoinfox.pwd.tmp
cat ~/.config/videoinfox/videoinfox.pwd.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.pwd  # remove all froward slashes / write file: videoinfox.pwd
rm  ~/.config/videoinfox/videoinfox.pwd.tmp  # remove tmp file: videoinfox.pwd.tmp
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.pwd  # remove horizontal whitespace write file: videoinfox.pwd

# FORMAT DEFAULT DIR 1 NAME FOR COMPARISON
echo "$dir1" > ~/.config/videoinfox/videoinfox.dir1.tmp  # write dir 1 to a tmp file: videoinfox.dir1.tmp
cat ~/.config/videoinfox/videoinfox.dir1.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir1  # remove all froward slashes / write file: videoinfox.dir1
rm ~/.config/videoinfox/videoinfox.dir1.tmp  # remove tmp file: videoinfox.dir1.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir1  # remove horizontal whitespace write file: videoinfox.dir1

# FORMAT DEFAULT DIR 2 NAME FOR COMPARISON
echo "$dir2" > ~/.config/videoinfox/videoinfox.dir2.tmp  # write dir 2 to a tmp file: videoinfox.dir2.tmp
cat ~/.config/videoinfox/videoinfox.dir2.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir2  # remove all froward slashes / write file: videoinfox.dir2
rm ~/.config/videoinfox/videoinfox.dir2.tmp   # remove tmp file: videoinfox.dir2.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir2 # remove horizontal whitespace write file: videoinfox.dir2

# FORMAT DEFAULT DIR 3 NAME FOR COMPARISON
echo "$dirsaved" > ~/.config/videoinfox/videoinfox.dir3.tmp  # write dir 3 to a tmp file: videoinfox.dir3.tmp
cat ~/.config/videoinfox/videoinfox.dir3.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir3  # remove all froward slashes / write file: videoinfox.dir3
rm ~/.config/videoinfox/videoinfox.dir3.tmp   # remove tmp file: videoinfox.dir3.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir3 # remove horizontal whitespace write file: videoinfox.dir3

# FORMAT DEFAULT DIR 4 NAME FOR COMPARISON
echo "$dir4" > ~/.config/videoinfox/videoinfox.dir4.tmp  # write dir 4 to a tmp file: videoinfox.dir4.tmp
cat ~/.config/videoinfox/videoinfox.dir4.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir4  # remove all froward slashes / write file: videoinfox.dir4
rm ~/.config/videoinfox/videoinfox.dir4.tmp   # remove tmp file: videoinfox.dir4.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir4 # remove horizontal whitespace write file: videoinfox.dir4

# FORMAT DEFAULT DIR 5 NAME FOR COMPARISON
echo "$dir5" > ~/.config/videoinfox/videoinfox.dir5.tmp  # write dir 5 to a tmp file: videoinfox.dir5.tmp
cat ~/.config/videoinfox/videoinfox.dir5.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir5  # remove all froward slashes / write file: videoinfox.dir5
rm ~/.config/videoinfox/videoinfox.dir5.tmp   # remove tmp file: videoinfox.dir5.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir5 # remove horizontal whitespace write file: videoinfox.dir5


# LOAD EDITED PWD AND DEFAULT DIRECTORY NAMES FOR BELOW  IF LOOPS   (all frorward slashes / and white spaces removed from the below directory names)

read -r controldir < ~/.config/videoinfox/videoinfox.pwd    # load reformatted current directory name 
read -r dir1display < ~/.config/videoinfox/videoinfox.dir1  # load reformatted default directory 1 name
read -r dir2display < ~/.config/videoinfox/videoinfox.dir2  # load reformatted default directory 2 name
read -r dir3display < ~/.config/videoinfox/videoinfox.dir3  # load reformatted default directory 3 name
read -r dir4display < ~/.config/videoinfox/videoinfox.dir4  # load reformatted default directory 4 name
read -r dir5display < ~/.config/videoinfox/videoinfox.dir5  # load reformatted default directory 5 name


# DEFAULT DIR 5  DISPLAY     IF DIRECTORY ON EXIT  =  DEFAULT DIRECTORIES 1-4 then Display that directory number.

if [[ "$controldir" = "$dir5display" ]]
  then 

      if [[ "$dir5display" = "$dir1display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 1 then display 1 and not 5
        then
             dirdisp="$dirdisplay1"
      fi

      if [[ "$dir5display" = "$dir2display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 2 then display 2 and not 5
        then
             dirdisp="$dirdisplay2"
      fi

      if [[ "$dir5display" = "$dir3display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 3 then display 3 and not 5
        then
             dirdisp="$dirdisplay3"
      fi

      if [[ "$dir5display" = "$dir4display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 4 then display 4 and not 5
        then
             dirdisp="$dirdisplay4"
      fi
fi



# DEFAULT DIR 5 DISPLAY
if [[ "$controldir" = "$dir5display" ]] 
  then
       dirdisp="$dirdisplay5"  # if directory is changed to  Default Dir 5 :  The number 5 is normal text and the other 4 are less bold.
        
  else
       dirdisp="$dirdisplayno" # if directory doesn't match  Default Dirs 1-5 : All 5 numbers are less bold.  
fi 



# DEFAULT DIR 1  DISPLAY
if [[ "$controldir" = "$dir1display" ]]  # IF PWD = DEFAULT DIR 1 then display 1
  then 
       dirdisp="$dirdisplay1"
fi

# DEFAULT DIR 2  DISPLAY
if [[ "$controldir" = "$dir2display" ]]  # IF PWD = DEFAULT DIR 2 then display 2
  then 
       dirdisp="$dirdisplay2"
fi

# DEFAULT DIR 3  DISPLAY
if [[ "$controldir" = "$dir3display" ]]  # IF PWD = DEFAULT DIR 3 then display 3
  then 
       dirdisp="$dirdisplay3"
fi

# DEFAULT DIR 4  DISPLAY
if [[ "$controldir" = "$dir4display" ]]  # IF PWD = DEFAULT DIR 4 then display 4
  then 
       dirdisp="$dirdisplay4"  # if directory is changed to  Default Dir 4 :  The number 4 is normal text and the other 4 are less bold.
fi

################################################################################
##########  END   1 2 3 4 5 - DEFAULT DIRS   DISPLAY ROUTINE  ##################
################################################################################


# CHECKING FOR VIDEOS IN CURRENT DIRECTORY.  if video(s) exist:  the dash @ Play Directory will blink on the home screen
dovideosexist=$(find . -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) 2>/dev/null | wc -l)

if [ $dovideosexist -ne 0 ]  # If the find result doesn't =   0   goto then
  then 
      dash=$(echo -e "\033[5m-\033m\033[0m\033[5m\033[5m\033[0m")  # blink dash on home screen
  else
      dash=$(echo "-")  # don't blink dash on home screen
fi


# if [ "$searchtotal" = "" ]  # if the file <~/.config/videoinfox/videoinfo.lastsearchtotal> is empty goto then
#  then
#      :
#  else
#      echo
#      echo "Copy 1 above result to clipboard then press enter"
# fi

echo
echo "Directory: ""$PWD"
echo "Clipboard: ""$pasteclip"

##################################################################################################################################################

#                           @CHECK TO SEE IF THE CLIPBOARD CONTENTS CONTAIN A URL OR A FILE AND ACT UPON THAT DISPLAY

##################################################################################################################################################

# the 2 lines of below code are creating two new variables for the following loop.
# 1st variable <$grabpaste>   <cut> is used to cut all characters after the 4th character from the variable. Only 4 chatacters are needed to look for <http>
# 2nd variable <$grabpaste2>  <cut> is used to cut all characters after the 1st character from the variable. Only 1 character is needed to look for </>  

# for main if loop - to look for <http>
grabpaste=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

# for nested if loop - to look for </>
grabpaste2=$(echo "$pasteclip" | cut -c-1)  # cut everything after the 1st character

# the following code checks to see if the clipbooard has a url in it by lookin for <http> from <$grabpaste>  
# If it is <http>, YT-DLP will get the clipboard. yt-dlp will check if its a valid link by trying to extract the name of the video file.
# If it isn't <http>  the ytdlp loop will be skipped

if [ "$grabpaste" = "http" ]  # if the first 4 characters = <http> go then
  then
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir 2> /dev/null  # reding default download directory
      ytdlpconfirm=$(~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" 2> /dev/null)

            if [ "$ytdlpconfirm" = "" ]  # if yt-dlp couldn't extract a name goto then
                  then
  
                  echo "" | xclip -sel clip  # clearing out the clipboard
                  pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

                           # Videoinfox v2.00________________________________________ Videoinfox v2.00_________________________________________
                           #________________x________________________________________ _________________________________________________________
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " $der $viv4      Enter - Update Clipboard Display                "$dirdisp" - Default Dirs"
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " f - Find              n - Navigate Tree     p - Play Clipboard     d "$dash" Play Directory     y - Yt-dlp     e - Exit"
                      echo " a - Show All          l - Last Download     s - View Playlist      o "$dashj" Autoplay Line      i - V-Info     z - Set" 
                      echo " c - Clear Results     v - Played List       k "$dashj" Playlist Add       j "$dashj" Play Line          x - Clrclp     h - Help"
                      echo " m - More Options"
                      echo         
                  
                  else  # yt-dlp extracted a filename
                      echo
                      echo "YT-DLP Confirmed: "$ytdlpconfirm""
                      echo
                      echo "Download Directory: $dirsaved"  # dislpay default download directory
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " $der $viv4      Enter - Update Clipboard Display                "$dirdisp" - Default Dirs"
                      echo "___________________________________________________________________________________________________________________"
                      echo

echo -e " f - Find              n - Navigate Tree     p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m     d "$dash" Play Directory     y - Yt-dlp     e - Exit"
 
                      echo " a - Show All          l - Last Download     s - View Playlist      o "$dashj" Autoplay Line      i - V-Info     z - Set" 
                      echo " c - Clear Results     v - Played List       k "$dashj" Playlist Add       j "$dashj" Play Line          x - Clrclp     h - Help"
                      echo " m - More Options"
                      echo                                                             
            fi
    else

if [ -f "$pasteclip" ]  #  if file exists goto <then>
 then
echo      
echo "Valid file in clipboard"
echo "___________________________________________________________________________________________________________________"
echo
echo " $der $viv4      Enter - Update Clipboard Display                "$dirdisp" - Default Dirs"
echo "___________________________________________________________________________________________________________________"
echo

echo -e " f - Find              n - Navigate Tree     p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m     d "$dash" Play Directory     y - Yt-dlp     e - Exit"
 
                      echo " a - Show All          l - Last Download     s - View Playlist      o "$dashj" Autoplay Line      i - V-Info     z - Set" 
                      echo " c - Clear Results     v - Played List       k "$dashj" Playlist Add       j "$dashj" Play Line          x - Clrclp     h - Help"
                      echo " m - More Options"
                      echo                                                             

  else  # file does not exist

echo "" | xclip -sel clip  # clearing out the clipboard
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

echo "___________________________________________________________________________________________________________________"
echo 
echo " $der $viv4      Enter - Update Clipboard Display                "$dirdisp" - Default Dirs"
echo "___________________________________________________________________________________________________________________"
echo
echo " f - Find              n - Navigate Tree     p - Play Clipboard     d "$dash" Play Directory     y - Yt-dlp     e - Exit"
echo " a - Show All          l - Last Download     s - View Playlist      o "$dashj" Autoplay Line      i - V-Info     z - Set" 
echo " c - Clear Results     v - Played List       k "$dashj" Playlist Add       j "$dashj" Play Line          x - Clrclp     h - Help"
echo " m - More Options"
echo         
                                         

fi
fi

echo -en " Enter Option: "
read -r -n1 optionf

}

     while true
     do
     menuf
     case $optionf in


h)  # HELP
     #clear
     less ~/.config/videoinfox/videoinfo.help  # This help file is recreated on every start
     ;;	


e)   # EXIT  
     echo "$PWD" > ~/.config/videoinfox/videoinfo.dir-at-exit  # SAVE DIRECTORY AT EXIT
 
     read -r lsearch < ~/.config/videoinfox/videoinfo.lastsearch-set  # load last search setting
     


if [ "$lsearch" = 1 ]  # ALWAYS SAVE
  then
      :
fi



if [ "$lsearch" = 2 ]  # NEVER SAVE
  then
     
######### CLEAR FIND RESULTS ##########
     echo " " > ~/.config/videoinfox/videoinfo.lastsearchtotal
     echo " " > ~/.config/videoinfox/videoinfo.lastfindstring
     echo " " > ~/.config/videoinfox/videoinfo.lastfinddir

# CREATE FIND RESULT MESSAGE THAT THERE ARE NO STORED FINDS
#echo "                                                                                                                 " > ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "Select find to search for files.                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork     
echo > ~/.config/videoinfox/videoinfo.findwork


fi


if [ "$lsearch" = 3 ]  # ASK TO SAVE
  then         
         function menuq {
         clear
         echo -e "\n"
         echo
         echo "___________________________________________________________________________________________________________________"  
         echo
         echo " $der >>> LAST SEARCH"
         echo "___________________________________________________________________________________________________________________" 
         echo        
         echo -en " 1 - Save Search Results     2 - Clear Search Results "
         read -r -n1 optionq
         echo
         }
              
         while true
         do
         menuq
	   case $optionq in
         
  
         1)  # DO NOTHING SEARCH IS ALREADY SAVED
         
         break
         ;;


         2)
         
######### CLEAR FIND RESULTS ##########
     echo " " > ~/.config/videoinfox/videoinfo.lastsearchtotal
     echo " " > ~/.config/videoinfox/videoinfo.lastfindstring
     echo " " > ~/.config/videoinfox/videoinfo.lastfinddir

# CREATE FIND RESULT MESSAGE THAT THERE ARE NO STORED FINDS
#echo "                                                                                                                 " > ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "Select find to search for files.                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork     

echo > ~/.config/videoinfox/videoinfo.findwork


break;;

*)

esac
done

fi

 
clear
echo -e "\n"
echo
echo "___________________________________________________________________________________________________________________"  
echo
echo " $der >>> EXIT"
echo "___________________________________________________________________________________________________________________" 
echo
echo
echo " Directory state SAVED for next run:" "$PWD"
sleep .7

break ;;


o)
##################################################################################################################################################
###########################   AUTOPLAY LINE  o   <HOME>  #########################################################################################
##################################################################################################################################################

if [ -f ~/.config/videoinfox/tmp/videoinfo-findwork.tmp ]
  then

echo
echo
read -r -p " Autoplay Line Number: " linenumber  # waiting fot user input

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo-findwork.tmp > ~/.config/videoinfox/tmp/videoinfo-home-autoplay.tmp 2>/dev/null
input="$HOME""/.config/videoinfox/tmp/videoinfo-home-autoplay.tmp"

OLDIFS=$IFS
IFS=$'\n'

for line in $(cat "$input" 2>/dev/null)
 do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> SEARCH RESULTS >>> AUTOPLAY LINE" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      ffplay -fs -autoexit "$line" 2> /dev/null

      echo " To bypass the 3 second wait press enter with no entry"
      echo
      echo -e "\033[5m 3 seconds remaining to quit Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      echo 
      read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           if [[ $playdir ]]                                             
             then                                                        # if no input is entered within 3 seconds the next video will play
                 break                                                   # if enter is pressed without any input the next video will play
             else                                                        
                 :                                                       # press any key then enter within 3 seconds to quit                      
           fi
done
 
rm ~/.config/videoinfox/tmp/videoinfo-home-autoplay.tmp 2> /dev/null
IFS=$OLDIFS

else
    echo
    echo
    echo " Select Show All or use Find to acess this feature . . ."
    sleep 1.7
fi

;;


j)
##################################################################################################################################################
###########################   PLAY LINE  j   <HOME>  #############################################################################################
##################################################################################################################################################

if [ -f ~/.config/videoinfox/tmp/videoinfo-findwork.tmp ]  # if file exists goto then
  then
      echo
      echo
      read -r -p " Enter line number to play: " linenumber  # waiting fot user input

      # create file moving selected line number to the top
      tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo-findwork.tmp > ~/.config/videoinfox/tmp/videoinfo-findwork-playnumber.tmp 2>/dev/null
      
      # read first line of file for play
      read playnumber < ~/.config/videoinfox/tmp/videoinfo-findwork-playnumber.tmp

      if [ -z "$playnumber" ]
          then
              :

          else

      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> SEARCH RESULTS >>> PLAY LINE" 
      echo
      echo " [PLAY]>" "$playnumber"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$playnumber")  " Duration:" $(ffmpeg -i "$playnumber" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height & duration
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      
      # video filename with full path <$pasteclip> strip from the bgininning of line to the last slash leaving only the filename <$getfilenameonly>
      getfilenameonly=$(echo "$playnumber" |  awk -F '/' '{print $NF}')  
  
      notify-send "Videoinfox messsage: Playing . . ." "$getfilenameonly"      

      echo "$playnumber" >> ~/.config/videoinfox/videoinfo.playedlist  # write clipboard content to Played List file
      ffplay -fs -autoexit "$playnumber" 2>/dev/null  # play video
      rm ~/.config/videoinfox/tmp/videoinfo-findwork-playnumber.tmp 2>/dev/null

     fi

else
    echo
    echo
    echo " Select Show All or use Find to acess this feature . . ."
    sleep 1.7

fi

;;


n)
##################################################################################################################################################
###########################   (@NAVIGATE TREE)  n  ###############################################################################################
##################################################################################################################################################

pasteclip2=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content   save to restore on option quit
echo "" | xclip -sel clip  # clearing the clipboard


function navtree {

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

if [ -d "$pasteclip" ]  # if the directory exists gto then
  then
      :

  else      
      echo "$pastetemp" | xclip -sel clip  # clearing out the clipboaed
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
     
fi


clear

# recursive list of directories for the user to copy one to the clipboard and press  c   to change to that directory
find "$PWD" -type d -iname "*" | sort -u 2>/dev/null

# recursive number of directories found
ttotal=$(find  "$PWD" -type d -iname "*" 2>/dev/null | wc -l)   

notify-send "Videoinfox is done processing: Directory Tree" "Total Directories Found: "$ttotal" " # GUI Notification.

# recursive number of files found
ttotalnum=$(find "$PWD" -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) 2>/dev/null | wc -l)


##################################################################################
##########  START   1 2 3 4 5 - DEFAULT DIRS   DISPLAY ROUTINE  ##################
################################################################################## 

# DIRECTORY SELECTED IS NORMAL TEXT AND THE OTHER 4 ARE LESS BOLD. 

# DEFAULT DIR NUMBER 1 FORMAT
dirdisplay1=$(echo -e "1\033[2m 2 3 4 5\033[0m")
# DEFAULT DIR NUMBER 2 FORMAT
dirdisplay2=$(echo -e "\033[2m1 \033[0m2 \033[2m3 4 5\033[0m") 
# DEFAULT DIR NUMBER 3 FORMAT
dirdisplay3=$(echo -e "\033[2m1 2 \033[0m3 \033[2m4 5\033[0m")
# DEFAULT DIR NUMBER 4 FORMAT
dirdisplay4=$(echo -e "\033[2m1 2 3 \033[0m4 \033[2m5\033[0m")
# DEFAULT DIR NUMBER 5 FORMAT
dirdisplay5=$(echo -e "\033[2m1 2 3 4 \033[0m5\033[0m")
# NO MATCH ALL LESS BOLD
dirdisplayno=$(echo -e "\033[2m1 2 3 4 5\033[0m")


# FORMAT PWD NAME FOR COMPARISON
echo "$PWD" > ~/.config/videoinfox/videoinfox.pwd.tmp  # write PWD to a tmp file: videoinfox.pwd.tmp
cat ~/.config/videoinfox/videoinfox.pwd.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.pwd  # remove all froward slashes / write file: videoinfox.pwd
rm  ~/.config/videoinfox/videoinfox.pwd.tmp  # remove tmp file: videoinfox.pwd.tmp
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.pwd  # remove horizontal whitespace write file: videoinfox.pwd

# FORMAT DEFAULT DIR 1 NAME FOR COMPARISON
echo "$dir1" > ~/.config/videoinfox/videoinfox.dir1.tmp  # write dir 1 to a tmp file: videoinfox.dir1.tmp
cat ~/.config/videoinfox/videoinfox.dir1.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir1  # remove all froward slashes / write file: videoinfox.dir1
rm ~/.config/videoinfox/videoinfox.dir1.tmp  # remove tmp file: videoinfox.dir1.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir1  # remove horizontal whitespace write file: videoinfox.dir1

# FORMAT DEFAULT DIR 2 NAME FOR COMPARISON
echo "$dir2" > ~/.config/videoinfox/videoinfox.dir2.tmp  # write dir 2 to a tmp file: videoinfox.dir2.tmp
cat ~/.config/videoinfox/videoinfox.dir2.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir2  # remove all froward slashes / write file: videoinfox.dir2
rm ~/.config/videoinfox/videoinfox.dir2.tmp   # remove tmp file: videoinfox.dir2.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir2 # remove horizontal whitespace write file: videoinfox.dir2

# FORMAT DEFAULT DIR 3 NAME FOR COMPARISON
echo "$dirsaved" > ~/.config/videoinfox/videoinfox.dir3.tmp  # write dir 3 to a tmp file: videoinfox.dir3.tmp
cat ~/.config/videoinfox/videoinfox.dir3.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir3  # remove all froward slashes / write file: videoinfox.dir3
rm ~/.config/videoinfox/videoinfox.dir3.tmp   # remove tmp file: videoinfox.dir3.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir3 # remove horizontal whitespace write file: videoinfox.dir3

# FORMAT DEFAULT DIR 4 NAME FOR COMPARISON
echo "$dir4" > ~/.config/videoinfox/videoinfox.dir4.tmp  # write dir 4 to a tmp file: videoinfox.dir4.tmp
cat ~/.config/videoinfox/videoinfox.dir4.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir4  # remove all froward slashes / write file: videoinfox.dir4
rm ~/.config/videoinfox/videoinfox.dir4.tmp   # remove tmp file: videoinfox.dir4.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir4 # remove horizontal whitespace write file: videoinfox.dir4

# FORMAT DEFAULT DIR 5 NAME FOR COMPARISON
echo "$dir5" > ~/.config/videoinfox/videoinfox.dir5.tmp  # write dir 5 to a tmp file: videoinfox.dir5.tmp
cat ~/.config/videoinfox/videoinfox.dir5.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir5  # remove all froward slashes / write file: videoinfox.dir5
rm ~/.config/videoinfox/videoinfox.dir5.tmp   # remove tmp file: videoinfox.dir5.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir5 # remove horizontal whitespace write file: videoinfox.dir5


# LOAD EDITED PWD AND DEFAULT DIRECTORY NAMES FOR BELOW  IF LOOPS   (all frorward slashes / and white spaces removed from the below directory names)

read -r controldir < ~/.config/videoinfox/videoinfox.pwd    # load reformatted current directory name 
read -r dir1display < ~/.config/videoinfox/videoinfox.dir1  # load reformatted default directory 1 name
read -r dir2display < ~/.config/videoinfox/videoinfox.dir2  # load reformatted default directory 2 name
read -r dir3display < ~/.config/videoinfox/videoinfox.dir3  # load reformatted default directory 3 name
read -r dir4display < ~/.config/videoinfox/videoinfox.dir4  # load reformatted default directory 4 name
read -r dir5display < ~/.config/videoinfox/videoinfox.dir5  # load reformatted default directory 5 name


# DEFAULT DIR 5  DISPLAY     IF DIRECTORY ON EXIT  =  DEFAULT DIRECTORIES 1-4 then Display that directory number.

if [[ "$controldir" = "$dir5display" ]]
  then 

      if [[ "$dir5display" = "$dir1display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 1 then display 1 and not 5
        then
             dirdisp="$dirdisplay1"
      fi

      if [[ "$dir5display" = "$dir2display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 2 then display 2 and not 5
        then
             dirdisp="$dirdisplay2"
      fi

      if [[ "$dir5display" = "$dir3display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 3 then display 3 and not 5
        then
             dirdisp="$dirdisplay3"
      fi

      if [[ "$dir5display" = "$dir4display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 4 then display 4 and not 5
        then
             dirdisp="$dirdisplay4"
      fi
fi



# DEFAULT DIR 5 DISPLAY
if [[ "$controldir" = "$dir5display" ]] 
  then
       dirdisp="$dirdisplay5"  # if directory is changed to  Default Dir 5 :  The number 5 is normal text and the other 4 are less bold.
        
  else
       dirdisp="$dirdisplayno" # if directory doesn't match  Default Dirs 1-5 : All 5 numbers are less bold.  
fi 



# DEFAULT DIR 1  DISPLAY
if [[ "$controldir" = "$dir1display" ]]  # IF PWD = DEFAULT DIR 1 then display 1
  then 
       dirdisp="$dirdisplay1"
fi

# DEFAULT DIR 2  DISPLAY
if [[ "$controldir" = "$dir2display" ]]  # IF PWD = DEFAULT DIR 2 then display 2
  then 
       dirdisp="$dirdisplay2"
fi

# DEFAULT DIR 3  DISPLAY
if [[ "$controldir" = "$dir3display" ]]  # IF PWD = DEFAULT DIR 3 then display 3
  then 
       dirdisp="$dirdisplay3"
fi

# DEFAULT DIR 4  DISPLAY
if [[ "$controldir" = "$dir4display" ]]  # IF PWD = DEFAULT DIR 4 then display 4
  then 
       dirdisp="$dirdisplay4"  # if directory is changed to  Default Dir 4 :  The number 4 is normal text and the other 4 are less bold.
fi

################################################################################
##########  END   1 2 3 4 5 - DEFAULT DIRS   DISPLAY ROUTINE  ##################
################################################################################


########## blinking routines for display ##########

# not blinking Play Directory
playdir1=$(echo "Play Directory")
# blinking Play Directory
playdir2=$(echo -e "\033[5mPlay Directory\033m\033[0m\033[5m\033[5m\033[0m")

# not blinking dash
dash0=$(echo "-")
# blinking dash
dash1=$(echo -e "\033[5m-\033m\033[0m\033[5m\033[5m\033[0m")


# get file count of videos one directory deep for blinking   Play Directory
blinkit=$(find "$PWD" -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) 2>/dev/null | wc -l)

# if find results are zero goto then
if [ "$blinkit" = 0 ]
  then
      blinkit2="$playdir1"  # zero files. non bliking  Playdirectory
      bdash="$dash0"
  else
      blinkit2="$playdir2" # not zero files. blinking  Play Directory
      bdash="$dash1"
fi


# not blinking
changedir1=$(echo "Change Directory")
# blinking
changedir2=$(echo -e "\033[5mChange Directory\033m\033[0m\033[5m\033[5m\033[0m")

# if directory exists goto then
if [ -d "$pasteclip" ]
  then
      changedir3="$changedir2"  # if the directory exists, blinking  Change Directory
  else
      changedir3="$changedir1"  # if the directory doesn't exist, non blinking  Change Directory
fi
########## end blinking routines ################## 


echo
echo "Treetop:" "$grabdirfornav2"
echo "Total Directories: "$ttotal" "
echo "Total Video Files:" "$ttotalnum"                                                               	                                         
echo
echo "Current Directory:" "$PWD"
echo "Video Files:" "$blinkit"
echo
echo "Clipboard:" "$pasteclip"
echo "___________________________________________________________________________________________________________________"
echo  
echo " ""$der"" >>> NAVIGATE TREE          Enter - Update Clipboard Display           "$dirdisp" - Default Dirs"
echo "___________________________________________________________________________________________________________________" 
echo
echo " c - "$changedir3"     d "$bdash" Play Directory     s - View Playlist     k "$bdash" Playlist Add                   q - Quit"
echo " u - Up One Level         o "$bdash" Autoplay Line"
echo " t - Treetop              j "$bdash" Play Line"
echo   
echo -en " Enter Option: "
read -r -n1 option
echo
}
  
         while true
         do
         navtree
	    case $option in
         
         q)  # QUIT
    ##############################     cd "$grabdirfornav2" &>/dev/null   # restore directory
         echo "" | xclip -sel clip  # clearing the clipboard
         pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content
         break
         ;;


         1)  # CD DIRECTORY TO TV    
         cd "$dir1" 
         grabdirfornav2="$dir1"
         ;;
    
         2)  # CD DIRECTORY TO MOVIES
         grabdirfornav2="$dir2"
         cd "$dir2" 
         ;;

         3)  # CHANGE DIRECTORY TO DOWNLOADS
         grabdirfornav2="$dirsaved"
         cd "$dirsaved" 
         ;;
   
         4)  # CHANGE DIRECTORY TO EXTRA   
         grabdirfornav2="$dir4"
         cd "$dir4" 
         ;;

         5)  # CHANGE DIRECTORY TO LAST EXIT
         grabdirfornav2="$dir5"
         cd "$dir5" 
         ;;
       
       
         u)  # UP ONE LEVEL 
         if [ "$grabdirfornav2" = "$PWD" ]  # when   Up One Level   reaches the    Treetop    no   cd..   out of the parent directory 
           then
               echo
               echo " At treetop. Can't go any higher . . ."
               sleep .50

           else
               cd .. &>/dev/null
         fi 
         ;;
        

         t)  # TREE TOP
         cd "$grabdirfornav2" &>/dev/null
         ;;          


         c)  # CHANGE TO DIRECTORY IN CLIPBOARD
         echo
         pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content 

         treelength=$(echo "$grabdirfornav2" |awk '{print length}')  # get number of characters in treetop         
         clipdat=$(echo "$pasteclip" | head -c"$treelength")  # grabbing the first  $treelength  characters

         if [ "$clipdat" = "$grabdirfornav2" ]  # if clipboard string = treetop go then
           then
               cd "$pasteclip" 2>/dev/null  # change to the directory in the clipboard
           else
               echo " At treetop. Can't go any higher . . ."
               sleep .50
         fi
        
         echo "" | xclip -sel clip  # clearing the clipboard
         pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content 

         ;;


         ########################################################################################################################################
         d)  # (@PLAY DIRECTORY) NAVIGATE TREE  #################################################################################################
         ########################################################################################################################################

# WRITING VIDEO FILE LIST TO FILE: /.config/videoinfox/tmp/videoinfo.nt-play-directory-apa 
find "$PWD" -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) > ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa-work 2>/dev/null

# SORT BACK INTO ORDER
sort -u ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa-work > ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa

#  CHECK FOR AT LEAST ONE LINE THAT STARTS WITH A SLASH /
atleastone=$(grep '^/' ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa 2>/dev/null | wc -l)

#  IF THE NUMBER DOESN"T = 0  THEN PROCESS AUTO PLAY OF PLAYED LIST
if [ $atleastone -ne 0 ]  
   then

#  ASSIGN PLAYED LIST TO VARIABLE: $moddedplayedlist 
moddedplayedlist="$HOME""/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa"

#  PLAYED LIST INPUT FOR LOOP
input="$moddedplayedlist"  

#  CREATE TEMP FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2

#  #  START WRITING
while read -r line  # read line by line and write line by line until end of file
do

   if [ -f "$line" ]
      then # ONLY WRITE LINE TO FILE IF IT IS A VALID PATH AND FILE
           echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2  
      else
           :
   fi        

done < "$input"
#  DONE WRITING ONLY VALID FILES

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
mv ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa 2>/dev/null

#  CREATE FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2  

#  START WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx
while read -r line  # read line by line until end of file
do

   if [[ "$line" == *.mp4 ]] 
        then # IF FILE IS MP4, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2  
     
   elif [[ "$line" == *.webm ]]
        then # IF FILE IS WEBM, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2
      
   elif [[ "$line" == *.mkv ]]
        then # IF FILE IS MKV, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2

   elif [[ "$line" == *.avi ]]
        then # IF FILE IS AVI, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2

   elif [[ "$line" == *.divx ]]
        then  # IF FILE IS DIVX, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2
   else
        :  # IF THERE IS NO FILE MATCH, THERE IS NO WRITE
   fi

done < "$input"
#  END WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
cp ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa 2>/dev/null

# REMOVE PATH ONLY LEAVING FILENAME
sed -i 's/.*\///' ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2

# NUMBER THE LIST
sed '/./='  ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 | sed '/./N; s/\n/ /' > ~/.config/videoinfox/tmp/videoinfox.numbered-navtree-play-directory-list 2>/dev/null

   
else #  NO LINES START WITH A SLASH /   remove empty files
     rm ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.numbered-navtree-play-directory-list 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa-work 2>/dev/null    
fi


################clear

if [ -f ~/.config/videoinfox/tmp/videoinfox.numbered-navtree-play-directory-list ]
   then
        cat ~/.config/videoinfox/tmp/videoinfox.numbered-navtree-play-directory-list 2>/dev/null
   else
       echo
       echo " No video files in the current directory . . ."
       sleep 1.7
fi


linenumber=1

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa > ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa.tmp ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

for line in $(cat "$input" 2>/dev/null)
 do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> NAVIGATE TREE >>> PLAY DIRECTORY" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      ffplay -fs -autoexit "$line" 2> /dev/null

      echo " To bypass the 3 second wait press enter with no entry"
      echo
      echo -e "\033[5m 3 seconds remaining to quit Played List Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      echo 
      read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           if [[ $playdir ]]                                             
             then                                                        # if no input is entered within 3 seconds the next video will play
                 break                                                   # if enter is pressed without any input the next video will play
             else                                                        
                 :                                                       # press any key then enter within 3 seconds to quit Play Played List
           fi
done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.numbered-navtree-play-directory-list 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa-work 2>/dev/null 

;;           


         ########################################################################################################################################
         o)  # AUTOPLAY LINE (NAVIGATE TREE)  ###################################################################################################
         ########################################################################################################################################

#checking for videos in the current directory.  if no videos exist,   Play Directory   won't execute
dovideosexist=$(find . -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) 2>/dev/null | wc -l)


if [ $dovideosexist -ne 0 ]  # If the find result doesn't =   0   goto then
  then  # IF VIDEOS EXIST IN THE CURRENT DIRECTORY THEN RUN PLAY LINE

function ntplaynum {

# WRITING VIDEO FILE LIST TO FILE: /.config/videoinfox/tmp/videoinfo.nt-play-directory-apa 
find "$PWD" -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) > ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa-work 2>/dev/null

# SORT BACK INTO ORDER
sort -u ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa-work > ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa

#  CHECK FOR AT LEAST ONE LINE THAT STARTS WITH A SLASH /
atleastone=$(grep '^/' ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null | wc -l)

#  IF THE NUMBER DOESN"T = 0  THEN PROCESS AUTO PLAY OF PLAYED LIST
if [ $atleastone -ne 0 ]  
   then

#  ASSIGN PLAYED LIST TO VARIABLE: $moddedplayedlist 
moddedplayedlist="$HOME""/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa"

#  PLAYED LIST INPUT FOR LOOP
input="$moddedplayedlist"  

#  CREATE TEMP FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2

#  #  START WRITING
while read -r line  # read line by line and write line by line until end of file
do

   if [ -f "$line" ]
      then # ONLY WRITE LINE TO FILE IF IT IS A VALID PATH AND FILE
           echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2  
      else
           :
   fi        

done < "$input"
#  DONE WRITING ONLY VALID FILES

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
mv ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null

#  CREATE FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2  

#  START WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx
while read -r line  # read line by line until end of file
do

   if [[ "$line" == *.mp4 ]] 
        then # IF FILE IS MP4, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2  
     
   elif [[ "$line" == *.webm ]]
        then # IF FILE IS WEBM, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2
      
   elif [[ "$line" == *.mkv ]]
        then # IF FILE IS MKV, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2

   elif [[ "$line" == *.avi ]]
        then # IF FILE IS AVI, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2

   elif [[ "$line" == *.divx ]]
        then  # IF FILE IS DIVX, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2
   else
        :  # IF THERE IS NO FILE MATCH, THERE IS NO WRITE
   fi

done < "$input"
#  END WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
cp ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null

# REMOVE PATH ONLY LEAVING FILENAME
sed -i 's/.*\///' ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2

# NUMBER THE LIST
sed '/./='  ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 | sed '/./N; s/\n/ /' > ~/.config/videoinfox/tmp/videoinfox.numbered-nt-play-directory-list 2>/dev/null

   
else #  NO LINES START WITH A SLASH /   remove empty files
     rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.numbered-nt-play-directory-list 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa-work 2>/dev/null    
fi


clear

if [ -f ~/.config/videoinfox/tmp/videoinfox.numbered-nt-play-directory-list ]
   then
        cat ~/.config/videoinfox/tmp/videoinfox.numbered-nt-play-directory-list 2>/dev/null
   else
        echo
        echo " No video files in the current directory . . ."
fi


echo "___________________________________________________________________________________________________________________"
echo  
echo " $der >>> NAVIGATE TREE >>> AUTOPLAY LINE"
echo "___________________________________________________________________________________________________________________" 
echo
echo " o - Autoplay Line                                                                                        q - Quit"
echo
echo -en " Enter Option: "
read -r -n1 optionaplist
}

while true
do
ntplaynum
case $optionaplist in


q) # QUIT
   rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null
   rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 2>/dev/null
   rm ~/.config/videoinfox/tmp/videoinfox.numbered-nt-play-directory-list 2>/dev/null
   rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa-work 2>/dev/null 
   break;;


o) # AUTOPLAY (NAVIGATE TREE)
echo
echo
read -r -p " Autoplay Line Number: " linenumber  # waiting fot user input

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa > ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa.tmp ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

for line in $(cat "$input" 2>/dev/null)
 do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> NAVIGATE TREE >>> AUTOPLAY LINE" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      ffplay -fs -autoexit "$line" 2> /dev/null

      echo " To bypass the 3 second wait press enter with no entry"
      echo
      echo -e "\033[5m 3 seconds remaining to quit Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      echo 
      read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           if [[ $playdir ]]                                             
             then                                                        # if no input is entered within 3 seconds the next video will play
                 break                                                   # if enter is pressed without any input the next video will play
             else                                                        
                 :                                                       # press any key then enter within 3 seconds to quit Play Played List
           fi
done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.numbered-nt-play-directory-list 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa-work 2>/dev/null 
          
esac
done


else
    echo
    echo " No video files in the current directory . . ."
    sleep 1.7

fi

;;


 ########################################################################################################################################
         k)  # PLAYLIST ADD (NAVIGATE TREE)  ############################################################################################
 ########################################################################################################################################

#checking for videos in the current directory.  if no videos exist,   playlistaddnav Directory   won't execute
dovideosexist=$(find . -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) 2>/dev/null | wc -l)


if [ $dovideosexist -ne 0 ]  # If the find result doesn't =   0   goto then
  then  # IF VIDEOS EXIST IN THE CURRENT DIRECTORY THEN RUN playlistaddnav LINE

function ntplaylistaddnavnum {

# WRITING VIDEO FILE LIST TO FILE: /.config/videoinfox/tmp/videoinfo.nt-playlistaddnav-directory-apa 
find "$PWD" -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) > ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa-work 2>/dev/null

# SORT BACK INTO ORDER
sort -u ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa-work > ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa

#  CHECK FOR AT LEAST ONE LINE THAT STARTS WITH A SLASH /
atleastone=$(grep '^/' ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa 2>/dev/null | wc -l)

#  IF THE NUMBER DOESN"T = 0  THEN PROCESS AUTO playlistaddnav OF playlistaddnavED LIST
if [ $atleastone -ne 0 ]  
   then

#  ASSIGN playlistaddnavED LIST TO VARIABLE: $moddedplaylistaddnavedlist 
moddedplaylistaddnavedlist="$HOME""/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa"

#  playlistaddnavED LIST INPUT FOR LOOP
input="$moddedplaylistaddnavedlist"  

#  CREATE TEMP FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2

#  #  START WRITING
while read -r line  # read line by line and write line by line until end of file
do

   if [ -f "$line" ]
      then # ONLY WRITE LINE TO FILE IF IT IS A VALID PATH AND FILE
           echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2  
      else
           :
   fi        

done < "$input"
#  DONE WRITING ONLY VALID FILES


#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
mv ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa 2>/dev/null

#  CREATE FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2  

#  START WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx
while read -r line  # read line by line until end of file
do

   if [[ "$line" == *.mp4 ]] 
        then # IF FILE IS MP4, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2  
     
   elif [[ "$line" == *.webm ]]
        then # IF FILE IS WEBM, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2
      
   elif [[ "$line" == *.mkv ]]
        then # IF FILE IS MKV, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2

   elif [[ "$line" == *.avi ]]
        then # IF FILE IS AVI, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2

   elif [[ "$line" == *.divx ]]
        then  # IF FILE IS DIVX, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2
   else
        :  # IF THERE IS NO FILE MATCH, THERE IS NO WRITE
   fi

done < "$input"
#  END WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
cp ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa 2>/dev/null

# REMOVE PATH ONLY LEAVING FILENAME
sed -i 's/.*\///' ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2

# NUMBER THE LIST
sed '/./='  ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2 | sed '/./N; s/\n/ /' > ~/.config/videoinfox/tmp/videoinfox.numbered-nt-playlistaddnav-directory-list 2>/dev/null

   
else #  NO LINES START WITH A SLASH /   remove empty files
     rm ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.numbered-nt-playlistaddnav-directory-list 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa-work 2>/dev/null    
fi


clear

if [ -f ~/.config/videoinfox/tmp/videoinfox.numbered-nt-playlistaddnav-directory-list ]
   then
        cat ~/.config/videoinfox/tmp/videoinfox.numbered-nt-playlistaddnav-directory-list 2>/dev/null
   else
        echo
        echo " No videos in the current directory . . ."
fi


echo "___________________________________________________________________________________________________________________"
echo  
echo " $der >>> PLAYLIST ADD"
echo "___________________________________________________________________________________________________________________" 
echo
echo " k - Add to Playlist                                                                                       q - Quit"
echo
echo -en " Enter Option: "
read -r -n1 optionaplist
}

while true
do
ntplaylistaddnavnum
case $optionaplist in


   q) # QUIT
   rm ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa 2>/dev/null
   rm ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2 2>/dev/null
   rm ~/.config/videoinfox/tmp/videoinfox.numbered-nt-playlistaddnav-directory-list 2>/dev/null
   rm ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa-work 2>/dev/null 
   break;;


   k) # ADD TO PLAYLIST (NAVIGATE TREE)
echo
echo
read -r -p " Enter Line Number to add to Playlist: " linenumber  # waiting fot user input

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa > ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa.tmp ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

read line < ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa

if [ -z "$linenumber" ]
          then
              :

          else
              echo "$line" >> ~/.config/videoinfox/videoinfo.playlist
              echo
              echo " ""$line" 
              echo
              echo " Added to Playlist . . ."
              sleep .18
      fi
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.numbered-nt-playlistaddnav-directory-list 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.nt-playlistaddnav-directory-apa-work 2>/dev/null 
          
esac
done


else
    echo
    echo " No video files in the current directory . . ."
    sleep 1.7

fi

;;


 ########################################################################################################################################
         j)  # PLAY LINE (NAVIGATE TREE)  ###############################################################################################
 ########################################################################################################################################

#checking for videos in the current directory.  if no videos exist,   Play Directory   won't execute
dovideosexist=$(find . -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) 2>/dev/null | wc -l)


if [ $dovideosexist -ne 0 ]  # If the find result doesn't =   0   goto then
  then  # IF VIDEOS EXIST IN THE CURRENT DIRECTORY THEN RUN PLAY LINE

function ntplaynum {

# WRITING VIDEO FILE LIST TO FILE: /.config/videoinfox/tmp/videoinfo.nt-play-directory-apa 
find "$PWD" -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) > ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa-work 2>/dev/null

# SORT BACK INTO ORDER
sort -u ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa-work > ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa

#  CHECK FOR AT LEAST ONE LINE THAT STARTS WITH A SLASH /
atleastone=$(grep '^/' ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null | wc -l)

#  IF THE NUMBER DOESN"T = 0  THEN PROCESS AUTO PLAY OF PLAYED LIST
if [ $atleastone -ne 0 ]  
   then

#  ASSIGN PLAYED LIST TO VARIABLE: $moddedplayedlist 
moddedplayedlist="$HOME""/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa"

#  PLAYED LIST INPUT FOR LOOP
input="$moddedplayedlist"  

#  CREATE TEMP FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2

#  #  START WRITING
while read -r line  # read line by line and write line by line until end of file
do

   if [ -f "$line" ]
      then # ONLY WRITE LINE TO FILE IF IT IS A VALID PATH AND FILE
           echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2  
      else
           :
   fi        

done < "$input"
#  DONE WRITING ONLY VALID FILES

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
mv ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null

#  CREATE FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2  

#  START WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx
while read -r line  # read line by line until end of file
do

   if [[ "$line" == *.mp4 ]] 
        then # IF FILE IS MP4, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2  
     
   elif [[ "$line" == *.webm ]]
        then # IF FILE IS WEBM, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2
      
   elif [[ "$line" == *.mkv ]]
        then # IF FILE IS MKV, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2

   elif [[ "$line" == *.avi ]]
        then # IF FILE IS AVI, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2

   elif [[ "$line" == *.divx ]]
        then  # IF FILE IS DIVX, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2
   else
        :  # IF THERE IS NO FILE MATCH, THERE IS NO WRITE
   fi

done < "$input"
#  END WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
cp ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null

# REMOVE PATH ONLY LEAVING FILENAME
sed -i 's/.*\///' ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2

# NUMBER THE LIST
sed '/./='  ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 | sed '/./N; s/\n/ /' > ~/.config/videoinfox/tmp/videoinfox.numbered-nt-play-directory-list 2>/dev/null

   
else #  NO LINES START WITH A SLASH /   remove empty files
     rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.numbered-nt-play-directory-list 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa-work 2>/dev/null    
fi


clear

if [ -f ~/.config/videoinfox/tmp/videoinfox.numbered-nt-play-directory-list ]
   then
        cat ~/.config/videoinfox/tmp/videoinfox.numbered-nt-play-directory-list 2>/dev/null
   else
        echo
        echo " No videos in the current directory . . ."
fi


echo "___________________________________________________________________________________________________________________"
echo  
echo " $der >>> NAVIGATE TREE >>> PLAY LINE"
echo "___________________________________________________________________________________________________________________" 
echo
echo " j - Play Line                                                                                            q - Quit"
echo
echo -en " Enter Option: "
read -r -n1 optionaplist
}

while true
do
ntplaynum
case $optionaplist in


   q) # QUIT
   rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null
   rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 2>/dev/null
   rm ~/.config/videoinfox/tmp/videoinfox.numbered-nt-play-directory-list 2>/dev/null
   rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa-work 2>/dev/null 
   break;;


   j) # PLAY LINE (NAVIGATE TREE)
echo
echo
read -r -p " Autoplay Line Number: " linenumber  # waiting fot user input

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa > ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa.tmp ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

read line < ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa

#for line in $(cat "$input" 2>/dev/null)
# do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> NAVIGATE TREE >>> PLAY LINE" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      echo "$line" >> ~/.config/videoinfox/videoinfo.playedlist  # write to the played list 
      ffplay -fs -autoexit "$line" 2> /dev/null

      #echo " To bypass the 3 second wait press enter with no entry"
      #echo
      #echo -e "\033[5m 3 seconds remaining to quit Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      #echo 
      #read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           #if [[ $playdir ]]                                             
             #then                                                        # if no input is entered within 3 seconds the next video will play
             #    break                                                   # if enter is pressed without any input the next video will play
             #else                                                        
             #    :                                                       # press any key then enter within 3 seconds to quit
           #fi
#done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.numbered-nt-play-directory-list 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.nt-play-directory-apa-work 2>/dev/null 
          
esac
done


else
    echo
    echo " No video files in the current directory . . ."
    sleep 1.7

fi

;;


##################################################################################################################################################
s) #######################  PLAYLIST - (Navigate Tree)  ########################################################################################## 
##################################################################################################################################################



function menuv {

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

grabclip=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

if [ "$grabclip" = "http" ]  # if the first 4 characters = <http> go then
  then
      :

  else      
      if [ -f "$pasteclip" ]
        then
            :
        else
            echo "$pastetemp" | xclip -sel clip  # clearing out the clipboaed
            pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      fi
fi


if [ -f ~/.config/videoinfox/videoinfo.playlist ]
  then
      # REMOVE DUPLICATES
      cat -n ~/.config/videoinfox/videoinfo.playlist | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/tmp/videoinfo.playlist.tmp
      mv ~/.config/videoinfox/tmp/videoinfo.playlist.tmp ~/.config/videoinfox/videoinfo.playlist

  else
      echo > ~/.config/videoinfox/videoinfo.playlist
fi

                
clear

cp ~/.config/videoinfox/videoinfo.playlist ~/.config/videoinfox/tmp/videoinfo.playlist-apa


#  CHECK FOR AT LEAST ONE LINE THAT STARTS WITH A SLASH /
atleastone=$(grep '^/' ~/.config/videoinfox/tmp/videoinfo.playlist-apa | wc -l)

#  IF THE NUMBER DOESN"T = 0  THEN PROCESS AUTO PLAY OF PLAYLIST
if [ $atleastone -ne 0 ]  
   then

#  ASSIGN PLAYLIST TO VARIABLE: $moddedplaylist 
moddedplaylist="$HOME""/.config/videoinfox/tmp/videoinfo.playlist-apa"

#  PLAYLIST INPUT FOR LOOP
input="$moddedplaylist"  

#  CREATE TEMP FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfo.playlist-apa2

#  #  START WRITING
while read -r line  # read line by line and write line by line until end of file
do

   if [ -f "$line" ]
      then # ONLY WRITE LINE TO FILE IF IT IS A VALID PATH AND FILE
           echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2  
      else
           :
   fi        

done < "$input"
#  DONE WRITING ONLY VALID FILES

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null








# REMOVE DUPLICATES
cat -n ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/tmp/videoinfo.playlist-apa3

mv ~/.config/videoinfox/tmp/videoinfo.playlist-apa3 ~/.config/videoinfox/tmp/videoinfo.playlist-apa2










#  MOVE apa2 BACK TO apa
mv ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null

#  CREATE FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfo.playlist-apa2  

#  START WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx
while read -r line  # read line by line until end of file
do

   if [[ "$line" == *.mp4 ]] 
        then # IF FILE IS MP4, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2  
     
   elif [[ "$line" == *.webm ]]
        then # IF FILE IS WEBM, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2
      
   elif [[ "$line" == *.mkv ]]
        then # IF FILE IS MKV, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2

   elif [[ "$line" == *.avi ]]
        then # IF FILE IS AVI, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2

   elif [[ "$line" == *.divx ]]
        then  # IF FILE IS DIVX, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2
   else
        :  # IF THERE IS NO FILE MATCH, THERE IS NO WRITE
   fi

done < "$input"
#  END WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
cp ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null

# REMOVE PATH ONLY LEAVING FILENAME
sed -i 's/.*\///' ~/.config/videoinfox/tmp/videoinfo.playlist-apa2

# NUMBER THE LIST
sed '/./=' ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 | sed '/./N; s/\n/ /' > ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null

   
else #  NO LINES START WITH A SLASH /   remove empty files
     rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null     
fi


clear


if [ -f ~/.config/videoinfox/tmp/videoinfo.number.play-list ]
   then
        cat ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null
        dashit=$(echo -e "\033[5m-\033m\033[0m\033[5m\033[5m\033[0m")
   else
        dashit=$(echo "-") # not blinking
        echo
        echo "Playlist Empty . . ."
fi

#cat ~/.config/videoinfox/videoinfo.playlist 

echo
echo "Directory: ""$PWD"
echo "Clipboard: ""$pasteclip"

##################################################################################################################################################

#                           @CHECK TO SEE IF THE CLIPBOARD CONTENTS CONTAIN A URL OR A FILE AND ACT UPON THAT DISPLAY

##################################################################################################################################################

# the 2 lines of below code are creating two new variables for the following loop.
# 1st variable <$grabpaste>   <cut> is used to cut all characters after the 4th character from the variable. Only 4 chatacters are needed to look for <http>
# 2nd variable <$grabpaste2>  <cut> is used to cut all characters after the 1st character from the variable. Only 1 character is needed to look for </>  

# for main if loop - to look for <http>
grabpaste=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

# for nested if loop - to look for </>
grabpaste2=$(echo "$pasteclip" | cut -c-1)  # cut everything after the 1st character

# the following code checks to see if the clipbooard has a url in it by lookin for <http> from <$grabpaste>  
# If it is <http>, YT-DLP will get the clipboard. yt-dlp will check if its a valid link by trying to extract the name of the video file.
# If it isn't <http>  the ytdlp loop will be skipped

if [ "$grabpaste" = "http" ]  # if the first 4 characters = <http> go then
  then
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir 2> /dev/null  # reding default download directory
      ytdlpconfirm=$(~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" 2> /dev/null)

            if [ "$ytdlpconfirm" = "" ]  
                  then

                      echo "" | xclip -sel clip  # clearing out the clipboard
                      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

                           # Videoinfox v2.00________________________________________ Videoinfox v2.00_________________________________________
                           #________________x________________________________________ _________________________________________________________
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " "$der" PLAYLIST"
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " p - Play Clipboard     o "$dashit" Autoplay Line     j "$dashit" Play Line     i - Info     D - Delete PLAYLIST       q - Quit"
                      echo         

                  else 
                      echo
                      echo "YT-DLP Confirmed: "$ytdlpconfirm""
                      echo
                      echo "Download Directory: $dirsaved"  # dislpay default download directory
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " "$der" PLAYLIST"
                      echo "___________________________________________________________________________________________________________________"
                      echo

echo -e " p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m     o "$dashit" Autoplay Line     j "$dashit" Play Line     i - Info     D - Delete PLAYLIST       q - Quit"
        
                      echo                                                                                  
            fi
  else

      if [ -f "$pasteclip" ]  # 
        then
            echo      
            echo "Valid file in clipboard"
            echo "___________________________________________________________________________________________________________________"
            echo
            echo " "$der" PLAYLIST"
            echo "___________________________________________________________________________________________________________________"
            echo

echo -e " p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m     o "$dashit" Autoplay Line     j "$dashit" Play Line     i - Info     D - Delete PLAYLIST       q - Quit"

            echo                                                             

        else 

            echo "" | xclip -sel clip  # clearing out the clipboard
            pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

            echo "___________________________________________________________________________________________________________________"
            echo
            echo " "$der" PLAYLIST"
            echo "___________________________________________________________________________________________________________________"
            echo
            echo " p - Play Clipboard     o "$dashit" Autoplay Line     j "$dashit" Play Line     i - Info     D - Delete Playlist          q - Quit"
            echo                                                             
fi
fi

echo -en " Enter Option: "
read -r -n1 optionv


}

        while true
        do
	    menuv
	    case $optionv in
    
        q)  # QUIT
        rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null
        rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null
        rm ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null
        break;;


        o) # AUTOPLAY LINE  (PLAYLIST)

if [ -f ~/.config/videoinfox/tmp/videoinfo.number.play-list ]
   then

echo
echo
read -r -p " Enter Line Number: " linenumber  # waiting fot user input

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo.playlist-apa > ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

for line in $(cat "$input" 2>/dev/null)
 do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAYLIST >>> AUTOPLAY LINE" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      ffplay -fs -autoexit "$line" 2> /dev/null

      echo " To bypass the 3 second wait press enter with no entry"
      echo
      echo -e "\033[5m 3 seconds remaining to quit Playlist Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      echo 
      read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           if [[ $playdir ]]                                             
             then                                                        # if no input is entered within 3 seconds the next video will play
                 break                                                   # if enter is pressed without any input the next video will play
             else                                                        
                 :                                                       # press any key then enter within 3 seconds to quit Play PLAYLIST
           fi
done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null

   else
       echo
       echo
       echo " PLAYLIST Empty"
       sleep 1.7
fi

;;


        j) # PLAY LINE  (PLAYLIST)

if [ -f ~/.config/videoinfox/tmp/videoinfo.number.play-list ]
   then

echo
echo
read -r -p " Enter Line Number: " linenumber  # waiting fot user input

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo.playlist-apa > ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

read line < ~/.config/videoinfox/tmp/videoinfo.playlist-apa

if [ -z "$line" ]

  then
      :

  else

#for line in $(cat "$input" 2>/dev/null)
# do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAYLIST >>> PLAY LINE" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      echo " Screen will close after video player is quit."

      ffplay -fs -autoexit "$line" 2> /dev/null

      #echo " To bypass the 3 second wait press enter with no entry"
      #echo
      #echo -e "\033[5m 3 seconds remaining to quit PLAYLIST Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      #echo 
      #read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           #if [[ $playdir ]]                                             
           #  then                                                        # if no input is entered within 3 seconds the next video will play
           #      break                                                   # if enter is pressed without any input the next video will play
           #  else                                                        
           #      :                                                       # press any key then enter within 3 seconds to quit Play PLAYLIST
           #fi
# done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null

fi

else
       echo
       echo
       echo " Playlist Empty . . ."
       sleep 1.7
fi

;;


       i)  # INFO - <PLAYLIST>
 
      if [ -f "$pasteclip" ]
        then
            pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content
            echo
            echo
            echo " ""$pasteclip"
            echo  

echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip")  " Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

            echo
            read -r -p " Press enter to Continue" 

        else
            if [ -f ~/.config/videoinfox/tmp/videoinfo.playlist-apa ]  # if file exists goto then
              then
              echo
              echo
              read -r -p " Enter line number to get info: " linenumber  # waiting fot user input

             # create file moving selected line number to the top
             tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo.playlist-apa > ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp 2>/dev/null
      
             # read first line of file for play
             read playnumber < ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp

                 if [ -z "$playnumber" ]
                   then
                       :
 
                   else
                       #echo
                       echo
                       echo "$playnumber"
                       echo
           
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$playnumber")  " Duration:" $(ffmpeg -i "$playnumber" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height & duration

                       echo
                       read -r -p " Press enter to Continue" 
                       rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp 2>/dev/null

                 fi

        else
            :

            fi

      fi

;;       

      
          p) 
          #  @PLAY CLIPBOARD - <PLAYLIST>        

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

if [ "$grabpaste" = "http" ]  # if the 4 characters = <http> go then
  then
      #  DOWNLOAD AND PLAY FILE if <$grabpaste> ONLY IF IT =  http        
   
      grabdir="$PWD"  # storing directory to restore at the end of this function
        
      #  DOWNLOAD LINK AND PLAY
      
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir  # reading download directory 
      cd "$dirsaved"   # change to download directory
 
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      clear
    
      # make a backup copy of:   ~/.config/videoinfox/videoinfo.lastdownload   to restore on Play Clipboard with invalid url
      cp ~/.config/videoinfox/videoinfo.lastdownload ~/.config/videoinfox/videoinfo.lastdownload.bak
   
      ~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" > ~/.config/videoinfox/videoinfo.lastdownload 
      ~/.config/videoinfox/yt-dlp "$pasteclip"     
      
      # remove first dot and everything after it in filename. this was done because file names with dots before the extension were breking find results
      sed "s/\..*//" ~/.config/videoinfox/videoinfo.lastdownload > ~/.config/videoinfox/videoinfo.lastdownload.work

      # remove first [ and everything after it in filename. this was done because file names with [ 
      sed -i "s/\[.*//" ~/.config/videoinfox/videoinfo.lastdownload.work

      # rename videoinfo.lastdownload.work to videoinfox/videoinfo.lastdownload
      mv ~/.config/videoinfox/videoinfo.lastdownload.work ~/.config/videoinfox/videoinfo.lastdownload  
      
      if [ -s ~/.config/videoinfox/videoinfo.lastdownload ]
         then
             # make a backup copy of:   ~/.config/videoinfox/videoinfo.lastdownload to restore on Play Clipboard with invalid url
             cp ~/.config/videoinfox/videoinfo.lastdownload ~/.config/videoinfox/videoinfo.lastdownload.bak
         else
             :
      fi

   
      read -r lastdownload < ~/.config/videoinfox/videoinfo.lastdownload  # reading last download attempt
      read -r lastdownloadbak < ~/.config/videoinfox/videoinfo.lastdownload.bak  # reading last successful download 
             
      ylast=$(find "$PWD" -maxdepth 1 -type f \( -iname "$lastdownload*" \))  # finding the file to play

      echo "$ylast" > ~/.config/videoinfox/videoinfo.find-last-download  # write find result to file

   
      # IF THERE ARE IDENTICAL FILENAMES WITH DIFFERENT FILE EXTENSIONS FIND WILL PRODUCE MORE THAN ONE RESULT      
      correcterror=$(wc -l ~/.config/videoinfox/videoinfo.find-last-download | cut -d' ' -f1)  # getting line count.
          
             if [ "$correcterror" -gt 1 ]  # If line count is greater than 1 goto then. More than 1 was caused from Play Clipboard on invalid url.
                then                
                     if [[ "$lastdownload" == "$lastdownloadbak" ]]                 
                        then
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download  # read first find result from file
                     
                        else
                            echo > ~/.config/videoinfox/videoinfo.find-last-download
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download
                     fi
                               
             else
                  read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download      
                                     
             fi      

           
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY LAST DOWNLOAD"
      echo
      echo " [PLAY]> "$ytdlplast""
      echo "___________________________________________________________________________________________________________________"         
      echo
              
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$ytdlplast")  " Duration:" $(ffmpeg -i "$ytdlplast" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      
      if [ -z "$ytdlplast" ]
          then
              :
          else     
              notify-send "Videoinfox messsage: Playing last yt-dlp download . . ." "Play: $lastdownload"
              echo "$ytdlplast" >> ~/.config/videoinfox/videoinfo.playlist  # write clipboard content to PLAYLIST File  
              ffplay -fs -autoexit &> /dev/null "$ytdlplast"  
      fi 
      
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      
      cd "$grabdir"   # restore dir prior to entering yt-dlp menu              

  else

      if [ -f "$pasteclip" ]
        then
      
      #  PLAY FILE if <$grabpaste> WAS ANYTHING BUT <HTTP> 
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY CLIPBOARD" 
      echo
      echo " [PLAY]> "$pasteclip" "
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip")  " Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      #read -p " Press enter to Continue"
      
       # video filename with full path <$pasteclip> strip from the bgininning of line to the last slash leaving only the filename <$getfilenameonly>
      getfilenameonly=$(echo "$pasteclip" |  awk -F '/' '{print $NF}')  
      notify-send "Videoinfox messsage: Playing . . ." "$getfilenameonly"
     
      echo "$pasteclip" >> ~/.config/videoinfox/videoinfo.playlist  # write clipboard content to PLAYLIST file
      ffplay -fs -autoexit "$pasteclip" 2>/dev/null  # play video in clipboard
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      echo " PLAYLIST Closed"
  
        else
            
            echo
            echo
            echo " No playable content in the clipboard . . ."
            sleep 1.2
      fi   
  fi
  ;;  


                D)  # DELETE PLAYLIST - <find menu>
                rm ~/.config/videoinfox/videoinfo.playlist 2> /dev/null
                # writing empty playlist
                echo > ~/.config/videoinfox/videoinfo.playlist
                echo
                echo
                echo " PLAYLIST DELETED . . ."    
                sleep .7
                ;;

                *)

                esac
                done
                ;;

esac
done
     
echo "$pasteclip2" | xclip -sel clip  # restoring clipboard that was saved when entering this option:  Navigate Tree
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

;;


##################################################################################################################################################
d)  # (@PLAY DIRECTORY) HOME   ###################################################################################################################
##################################################################################################################################################

# WRITING VIDEO FILE LIST TO FILE: /.config/videoinfox/tmp/videoinfo.nt-play-directory-apa 
find "$PWD" -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) > ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa-work 2>/dev/null

# SORT BACK INTO ORDER
sort -u ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa-work > ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa

#  CHECK FOR AT LEAST ONE LINE THAT STARTS WITH A SLASH /
atleastone=$(grep '^/' ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa 2>/dev/null | wc -l)

#  IF THE NUMBER DOESN"T = 0  THEN PROCESS AUTO PLAY OF PLAYED LIST
if [ $atleastone -ne 0 ]  
   then

#  ASSIGN PLAYED LIST TO VARIABLE: $moddedplayedlist 
moddedplayedlist="$HOME""/.config/videoinfox/tmp/videoinfox.home-play-directory-apa"

#  PLAYED LIST INPUT FOR LOOP
input="$moddedplayedlist"  

#  CREATE TEMP FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2

#  #  START WRITING
while read -r line  # read line by line and write line by line until end of file
do

   if [ -f "$line" ]
      then # ONLY WRITE LINE TO FILE IF IT IS A VALID PATH AND FILE
           echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2  
      else
           :
   fi        

done < "$input"
#  DONE WRITING ONLY VALID FILES

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
mv ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa 2>/dev/null

#  CREATE FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2  

#  START WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx
while read -r line  # read line by line until end of file
do

   if [[ "$line" == *.mp4 ]] 
        then # IF FILE IS MP4, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2  
     
   elif [[ "$line" == *.webm ]]
        then # IF FILE IS WEBM, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2
      
   elif [[ "$line" == *.mkv ]]
        then # IF FILE IS MKV, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2

   elif [[ "$line" == *.avi ]]
        then # IF FILE IS AVI, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2

   elif [[ "$line" == *.divx ]]
        then  # IF FILE IS DIVX, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2
   else
        :  # IF THERE IS NO FILE MATCH, THERE IS NO WRITE
   fi

done < "$input"
#  END WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
cp ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa 2>/dev/null

# REMOVE PATH ONLY LEAVING FILENAME
sed -i 's/.*\///' ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2

# NUMBER THE LIST
sed '/./='  ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2 | sed '/./N; s/\n/ /' > ~/.config/videoinfox/tmp/videoinfox.numbered-home-play-directory-list 2>/dev/null

   
else #  NO LINES START WITH A SLASH /   remove empty files
     rm ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.numbered-home-play-directory-list 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa-work 2>/dev/null    
fi


##################clear

if [ -f ~/.config/videoinfox/tmp/videoinfox.numbered-home-play-directory-list ]
   then
        cat ~/.config/videoinfox/tmp/videoinfox.numbered-home-play-directory-list 2>/dev/null
   else
        echo
        echo
        echo " No video files in the current directory . . ."
        sleep 1.7


fi


linenumber=1

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa > ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa.tmp ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

for line in $(cat "$input" 2>/dev/null)
 do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> HOME >>> PLAY DIRECTORY" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      ffplay -fs -autoexit "$line" 2> /dev/null

      echo " To bypass the 3 second wait press enter with no entry"
      echo
      echo -e "\033[5m 3 seconds remaining to quit Played List Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      echo 
      read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           if [[ $playdir ]]                                             
             then                                                        # if no input is entered within 3 seconds the next video will play
                 break                                                   # if enter is pressed without any input the next video will play
             else                                                        
                 :                                                       # press any key then enter within 3 seconds to quit Play Played List
           fi
done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.numbered-home-play-directory-list 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.home-play-directory-apa-work 2>/dev/null 

;;           


#####################################################################################################################################################
l)  # PLAY LAST DOWNLOAD >>> HOME    ################################################################################################################
#####################################################################################################################################################

              grabdir="$PWD"  # storing directory to restore at the end of this function
               
              read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir  # reading download directory 
              cd "$dirsaved"   # change to download directory

                 if [ -s ~/.config/videoinfox/videoinfo.lastdownload ]
                    then
                        read -r lastdownload < ~/.config/videoinfox/videoinfo.lastdownload  # reading last download attempt         
                        ylast=$(find "$PWD" -maxdepth 1 -type f \( -iname "$lastdownload*" \))
                        echo "$ylast" > ~/.config/videoinfox/videoinfo.find-last-download  # write find result to file
                        read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download  # read first find result from file

                    else
                        read -r lastdownloadbak < ~/.config/videoinfox/videoinfo.lastdownload.bak  # reading last successful download
                        ylast=$(find "$PWD" -maxdepth 1 -type f \( -iname "$lastdownloadbak*" \))
                        echo "$ylast" > ~/.config/videoinfox/videoinfo.find-last-download  # write find result to file
                        read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download  # read first find result from file
                 fi   

          
              clear
              echo
              echo "___________________________________________________________________________________________________________________"
              echo
              echo " ""$der"" >>> PLAY LAST DOWNLOAD"
              echo
              echo " [PLAY]> ""$ytdlplast"""
              echo "___________________________________________________________________________________________________________________"         
              echo
              
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$ytdlplast")  " Duration:" $(ffmpeg -i "$ytdlplast" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

              echo
              echo " Video Player Controls:"
              echo                             
              echo " - Fullscreen Toggle: f"
              echo
              echo " - Play/Pause Toggle: space bar"
              echo
              echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
              echo
              echo " - Quit: q"      
              echo -e "\n"
              echo " This screen will exit when the video player is closed."
              echo
         
              notify-send "Videoinfox messsage: Playing last yt-dlp download . . ." "Play: $lastdownload"
                       
              echo "$ytdlplast" >> ~/.config/videoinfox/videoinfo.playedlist  # write clipboard content to file  
              ffplay -fs -autoexit &> /dev/null "$ytdlplast"
              pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
              cd "$grabdir"   # restore dir prior to entering yt-dlp menu
              ;;  


a)  # SHOW ALL VIDEOS

searchtotal=$(find "$PWD" -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) 2>/dev/null | wc -l)    
                                           	                               
                     if [ "$searchtotal" = 0 ]  # if find returned no results goto <then>
      
                       then
                           :
                           #cp ~/.config/videoinfox/videoinfo.findwork3 ~/.config/videoinfox/videoinfo.findwork
                           #cp ~/.config/videoinfox/videoinfo.lastsearchtotal2  ~/.config/videoinfox/videoinfo.lastsearchtotal
                        
                       else
                           echo "*" > ~/.config/videoinfox/videoinfo.lastfindstring   # save last find string used                          
                           read -r fterm < ~/.config/videoinfox/videoinfo.lastfindstring
                           

                           # save find results
find "$PWD" -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) | sort -u > ~/.config/videoinfox/videoinfo.findwork
                           echo "$PWD" > ~/.config/videoinfox/videoinfo.lastfinddir  # save last directory that last find was run in 
                           # write last search total file count
                           echo "$searchtotal" > ~/.config/videoinfox/videoinfo.lastsearchtotal
                           # read last search total file count
                           read -r searchtotal < ~/.config/videoinfox/videoinfo.lastsearchtotal    
                           cp ~/.config/videoinfox/videoinfo.findwork ~/.config/videoinfox/videoinfo.findwork3
                           cp ~/.config/videoinfox/videoinfo.lastsearchtotal ~/.config/videoinfox/videoinfo.lastsearchtotal2                 

                           notify-send  "Videoinfox messsage: Find results in $PWD" "$searchtotal files found using search term: $fterm"
                         
     fi
     ;;



     1)  # CD DIRECTORY TO TV    
     cd "$dir1" 
     ;;
    
     2)  # CD DIRECTORY TO MOVIES
     cd "$dir2" 
     ;;


     3)  # CHANGE DIRECTORY TO DOWNLOADS
     cd "$dirsaved" 
     ;;


     4)  # CHANGE DIRECTORY TO EXTRA   
     cd "$dir4" 
     ;;


     5)  # CHANGE DIRECTORY TO LAST EXIT
     cd "$dir5" 
     ;;


     c)  # CLEAR FIND RESULTS
     # CREATE FIND RESULT MESSAGE THAT THERE ARE NO STORED FINDS
     echo " " > ~/.config/videoinfox/videoinfo.lastsearchtotal
     echo " " > ~/.config/videoinfox/videoinfo.lastfindstring
     echo " " > ~/.config/videoinfox/videoinfo.lastfinddir

     rm ~/.config/videoinfox/tmp/videoinfo-number-findwork.tmp 2> /dev/null
     rm ~/.config/videoinfox/tmp/videoinfo-findwork.tmp 2> /dev/null

#echo "                                                                                                                 " > ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "Select find to search for files.                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork
#echo "                                                                                                                 " >> ~/.config/videoinfox/videoinfo.findwork

echo > ~/.config/videoinfox/videoinfo.findwork
     
     ;;


     x) 
       #CLEAR CLIPBOARD - <HOME> 
       echo "" | xclip -sel clip  # copy message in quotes to the clipboard. clearing out the clipboard
       pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
       ;;

#############################################################################################################################################	
#############################################################################################################################################
     p) 
     #  @PLAY CLIPBOARD - <HOME> !!!!!    MASTER TEMPLATE  This is the one that gets the edits then copied to other places in the code.

#############################################################################################################################################
#############################################################################################################################################
     
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

if [ "$grabpaste" = "http" ]  # if the 4 characters = <http> go then
  then
      #  DOWNLOAD AND PLAY FILE if <$grabpaste> ONLY IF IT =  http        
   
      grabdir="$PWD"  # storing directory to restore at the end of this function
        
      #  DOWNLOAD LINK AND PLAY
      
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir  # reading download directory 
      cd "$dirsaved"   # change to download directory
 
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      clear
   
      ~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" > ~/.config/videoinfox/videoinfo.lastdownload 
      ~/.config/videoinfox/yt-dlp "$pasteclip"    

      
      # remove first dot and everything after it in filename. this was done because file names with dots before the extension were breking find results
      sed "s/\..*//" ~/.config/videoinfox/videoinfo.lastdownload > ~/.config/videoinfox/videoinfo.lastdownload.work

      # remove first [ and everything after it in filename. this was done because file names with [ 
      sed -i "s/\[.*//" ~/.config/videoinfox/videoinfo.lastdownload.work

      # rename videoinfo.lastdownload.work to videoinfox/videoinfo.lastdownload
      mv ~/.config/videoinfox/videoinfo.lastdownload.work ~/.config/videoinfox/videoinfo.lastdownload


      if [ -s ~/.config/videoinfox/videoinfo.lastdownload ]
         then
             # make a backup copy of:   ~/.config/videoinfox/videoinfo.lastdownload to restore on Play Clipboard with invalid url
             cp ~/.config/videoinfox/videoinfo.lastdownload ~/.config/videoinfox/videoinfo.lastdownload.bak
         else
             :
      fi

   
      read -r lastdownload < ~/.config/videoinfox/videoinfo.lastdownload  # reading last download attempt
      read -r lastdownloadbak < ~/.config/videoinfox/videoinfo.lastdownload.bak  # reading last successful download 
             
      ylast=$(find "$PWD" -maxdepth 1 -type f \( -iname "$lastdownload*" \))  # finding the file to play

      echo "$ylast" > ~/.config/videoinfox/videoinfo.find-last-download  # write find result to file

   
      # IF THERE ARE IDENTICAL FILENAMES WITH DIFFERENT FILE EXTENSIONS FIND WILL PRODUCE MORE THAN ONE RESULT      
      correcterror=$(wc -l ~/.config/videoinfox/videoinfo.find-last-download | cut -d' ' -f1)  # getting line count.
          
             if [ "$correcterror" -gt 1 ]  # If line count is greater than 1 goto then. More than 1 was caused from Play Clipboard on invalid url.
                then                
                     if [[ "$lastdownload" == "$lastdownloadbak" ]]                 
                        then
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download  # read first find result from file
                     
                        else
                            echo > ~/.config/videoinfox/videoinfo.find-last-download
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download
                     fi
                               
             else
                  read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download      
                                     
             fi      

           
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY LAST DOWNLOAD"
      echo
      echo " [PLAY]> "$ytdlplast""
      echo "___________________________________________________________________________________________________________________"         
      echo
              
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$ytdlplast")  " Duration:" $(ffmpeg -i "$ytdlplast" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo

      if [ -z "$ytdlplast" ]
         then
             :
         else     
             notify-send "Videoinfox messsage: Playing last yt-dlp download . . ." "Play: $lastdownload"
             echo "$ytdlplast" >> ~/.config/videoinfox/videoinfo.playedlist  # write clipboard content to Played List File  
             ffplay -fs -autoexit &> /dev/null "$ytdlplast"  
      fi
      
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      
      cd "$grabdir"   # restore dir prior to entering yt-dlp menu              

  else

      if [ -f "$pasteclip" ]
        then
     
      #  PLAY FILE if <$grabpaste> WAS ANYTHING BUT <HTTP> 
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY CLIPBOARD" 
      echo
      echo " [PLAY]> "$pasteclip" "
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip")  " Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      #read -p " Press enter to Continue"
      
      # video filename with full path <$pasteclip> strip from the bgininning of line to the last slash leaving only the filename <$getfilenameonly>
      getfilenameonly=$(echo "$pasteclip" |  awk -F '/' '{print $NF}')  
      
      #notify-send "Videoinfox messsage: Playing . . ." "$getfilenameonly"
      notify-send "Videoinfox messsage: Playing . . ." "$getfilenameonly"      

      echo "$pasteclip" >> ~/.config/videoinfox/videoinfo.playedlist  # write clipboard content to Played List file
      ffplay -fs -autoexit "$pasteclip" 2>/dev/null  # play video in clipboard
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

      echo " Played List Closed"

         else
             echo
             echo
             echo " No playable content in the clipboard . . ."
             sleep 1.2

fi
fi
;;  


      i)  # INFO - <HOME>
 
      if [ -f "$pasteclip" ]
        then
            pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content
            echo
            echo
            echo " ""$pasteclip"
            echo  

echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip")  " Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

            echo
            read -r -p " Press enter to Continue" 

        else
            if [ -f ~/.config/videoinfox/tmp/videoinfo-findwork.tmp ]  # if file exists goto then
              then
              echo
              echo
              read -r -p " Enter line number to get info: " linenumber  # waiting fot user input

             # create file moving selected line number to the top
             tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo-findwork.tmp > ~/.config/videoinfox/tmp/videoinfo-findwork-playnumber.tmp 2>/dev/null
      
             # read first line of file for play
             read playnumber < ~/.config/videoinfox/tmp/videoinfo-findwork-playnumber.tmp

                 if [ -z "$playnumber" ]
                   then
                       :
 
                   else
                       #echo
                       echo
                       echo "$playnumber"
                       echo
           
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$playnumber")  " Duration:" $(ffmpeg -i "$playnumber" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height & duration

                       echo
                       read -r -p " Press enter to Continue" 
                       rm ~/.config/videoinfox/tmp/videoinfo-findwork-playnumber.tmp 2>/dev/null

                 fi

        else
            :

            fi

      fi

;;


##################################################################################################################################################
v)                                  ##############################################################################################################    
     #  VIEW/PLAYED LIST - <HOME>   ##############################################################################################################
     
function menuv {

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

grabclip=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

if [ "$grabclip" = "http" ]  # if the first 4 characters = <http> go then
  then
      :

  else      
      if [ -f "$pasteclip" ]
        then
            :
        else
            echo "$pastetemp" | xclip -sel clip  # clearing out the clipboaed
            pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      fi
fi

########################### removed sort routine #########################

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content                  
clear

#  REMOVE PLAYED LIST HEADER AND WRITE NEW FILE FOR PROCESSING: ~/.config/videoinfox/tmp/videoinfo.playedlist-auto-play-all
#awk 'NR>5' ~/.config/videoinfox/videoinfo.playedlist > ~/.config/videoinfox/tmp/videoinfo.playedlist-apa

cp ~/.config/videoinfox/videoinfo.playedlist ~/.config/videoinfox/tmp/videoinfo.playedlist-apa



#  REMOVE DUPLICATES
cat -n ~/.config/videoinfox/tmp/videoinfo.playedlist | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/tmp/videoinfo.playedlist-apa3
mv ~/.config/videoinfox/tmp/videoinfo.playedlist-apa3 cat -n ~/.config/videoinfox/tmp/videoinfo.playedlist



#  CHECK FOR AT LEAST ONE LINE THAT STARTS WITH A SLASH /
atleastone=$(grep '^/' ~/.config/videoinfox/tmp/videoinfo.playedlist-apa | wc -l)

#  IF THE NUMBER DOESN"T = 0  THEN PROCESS AUTO PLAY OF PLAYED LIST
if [ $atleastone -ne 0 ]  
   then

#  ASSIGN PLAYED LIST TO VARIABLE: $moddedplayedlist 
moddedplayedlist="$HOME""/.config/videoinfox/tmp/videoinfo.playedlist-apa"

#  PLAYED LIST INPUT FOR LOOP
input="$moddedplayedlist"  

#  CREATE TEMP FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2

#  #  START WRITING
while read -r line  # read line by line and write line by line until end of file
do

   if [ -f "$line" ]
      then # ONLY WRITE LINE TO FILE IF IT IS A VALID PATH AND FILE
           echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2  
      else
           :
   fi        

done < "$input"
#  DONE WRITING ONLY VALID FILES

#  REMOVE BLANK LINES
###############################################################################sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2 2>/dev/null

# REMOVE DUPLICATES
#############cat -n ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2 | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/tmp/videoinfo.playedlist-apa3
####################################################mv ~/.config/videoinfox/tmp/videoinfo.playedlist-apa3 ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2

#  MOVE apa2 BACK TO apa
mv ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2 ~/.config/videoinfox/tmp/videoinfo.playedlist-apa 2>/dev/null

#  CREATE FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2  

#  START WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx
while read -r line  # read line by line until end of file
do

   if [[ "$line" == *.mp4 ]] 
        then # IF FILE IS MP4, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2  
     
   elif [[ "$line" == *.webm ]]
        then # IF FILE IS WEBM, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2
      
   elif [[ "$line" == *.mkv ]]
        then # IF FILE IS MKV, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2

   elif [[ "$line" == *.avi ]]
        then # IF FILE IS AVI, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2

   elif [[ "$line" == *.divx ]]
        then  # IF FILE IS DIVX, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2
   else
        :  # IF THERE IS NO FILE MATCH, THERE IS NO WRITE
   fi

done < "$input"
#  END WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2 2>/dev/null



#  REMOVE DUPLICATES
cat -n ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2 | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/tmp/videoinfo.playedlist-apa3
mv ~/.config/videoinfox/tmp/videoinfo.playedlist-apa3 ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2





#  MOVE apa2 BACK TO apa
cp ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2 ~/.config/videoinfox/tmp/videoinfo.playedlist-apa 2>/dev/null

# REMOVE PATH ONLY LEAVING FILENAME
sed -i 's/.*\///' ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2





# NUMBER THE LIST
sed '/./=' ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2 | sed '/./N; s/\n/ /' > ~/.config/videoinfox/tmp/videoinfo.number.played-list 2>/dev/null



   
else #  NO LINES START WITH A SLASH /   remove empty files
     rm ~/.config/videoinfox/tmp/videoinfo.playedlist-apa 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfo.number.played-list 2>/dev/null     
fi


clear


if [ -f ~/.config/videoinfox/tmp/videoinfo.number.played-list ]
   then
        cat ~/.config/videoinfox/tmp/videoinfo.number.played-list 2>/dev/null
        dashit=$(echo -e "\033[5m-\033m\033[0m\033[5m\033[5m\033[0m")
   else
        dashit=$(echo "-") # not blinking
        echo
        echo "Played List Empty . . ."
fi

#cat ~/.config/videoinfox/videoinfo.playedlist 

echo
echo "Directory: ""$PWD"
echo "Clipboard: ""$pasteclip"

##################################################################################################################################################

#                           @CHECK TO SEE IF THE CLIPBOARD CONTENTS CONTAIN A URL OR A FILE AND ACT UPON THAT DISPLAY

##################################################################################################################################################

# the 2 lines of below code are creating two new variables for the following loop.
# 1st variable <$grabpaste>   <cut> is used to cut all characters after the 4th character from the variable. Only 4 chatacters are needed to look for <http>
# 2nd variable <$grabpaste2>  <cut> is used to cut all characters after the 1st character from the variable. Only 1 character is needed to look for </>  

# for main if loop - to look for <http>
grabpaste=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

# for nested if loop - to look for </>
grabpaste2=$(echo "$pasteclip" | cut -c-1)  # cut everything after the 1st character

# the following code checks to see if the clipbooard has a url in it by lookin for <http> from <$grabpaste>  
# If it is <http>, YT-DLP will get the clipboard. yt-dlp will check if its a valid link by trying to extract the name of the video file.
# If it isn't <http>  the ytdlp loop will be skipped

if [ "$grabpaste" = "http" ]  # if the first 4 characters = <http> go then
  then
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir 2> /dev/null  # reding default download directory
      ytdlpconfirm=$(~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" 2> /dev/null)

            if [ "$ytdlpconfirm" = "" ]  
                  then

                      echo "" | xclip -sel clip  # clearing out the clipboard
                      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

                           # Videoinfox v2.00________________________________________ Videoinfox v2.00_________________________________________
                           #________________x________________________________________ _________________________________________________________
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " "$der" >>> PLAYED LIST"
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " p - Play Clipboard     o "$dashit" Autoplay Line     s - View Playlist     i - Info                              q - Quit"
                      echo "                        j "$dashit" Play Line         k - Playlist Add      D - Delete Played List"
                      echo         

                  else 
                      echo
                      echo "YT-DLP Confirmed: "$ytdlpconfirm""
                      echo
                      echo "Download Directory: $dirsaved"  # dislpay default download directory
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " "$der" >>> PLAYED LIST"
                      echo "___________________________________________________________________________________________________________________"
                      echo

echo -e " p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m     o "$dashit" Autoplay Line     s - View Playlist     i - Info                              q - Quit"
                      
                      echo "                        j "$dashit" Play Line         k - Playlist Add      D - Delete Played List"
                      echo                                                                                  
            fi
  else

      if [ -f "$pasteclip" ]  # 
        then
            echo      
            echo "Valid file in clipboard"
            echo "___________________________________________________________________________________________________________________"
            echo
            echo " "$der" >>> PLAYED LIST"
            echo "___________________________________________________________________________________________________________________"
            echo

echo -e " p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m     o "$dashit" Autoplay Line     s - View Playlist     i - Info                              q - Quit"
                      
            echo "                        j "$dashit" Play Line         k - Playlist Add      D - Delete Played List"
            echo                                                             

        else 

            echo "" | xclip -sel clip  # clearing out the clipboard
            pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

            echo "___________________________________________________________________________________________________________________"
            echo
            echo " "$der" >>> PLAYED LIST"
            echo "___________________________________________________________________________________________________________________"
            echo
            echo " p - Play Clipboard     o "$dashit" Autoplay Line     s - View Playlist     i - Info                              q - Quit"
            echo "                        j "$dashit" Play Line         k - Playlist Add      D - Delete Played List"
            echo                                                             
fi
fi

echo -en " Enter Option: "
read -r -n1 optionv


}

        while true
        do
	    menuv
	    case $optionv in
    
        q)  # QUIT
        rm ~/.config/videoinfox/tmp/videoinfo.playedlist-apa 2>/dev/null
        rm ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2 2>/dev/null
        rm ~/.config/videoinfox/tmp/videoinfo.number.played-list 2>/dev/null
        break;;


        o) # AUTOPLAY LINE  (PLAYED LIST)

if [ -f ~/.config/videoinfox/tmp/videoinfo.number.played-list ]
   then

echo
echo
read -r -p " Enter Line Number: " linenumber  # waiting fot user input

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo.playedlist-apa > ~/.config/videoinfox/tmp/videoinfo.playedlist-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfo.playedlist-apa.tmp ~/.config/videoinfox/tmp/videoinfo.playedlist-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

for line in $(cat "$input" 2>/dev/null)
 do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAYED LIST >>> AUTOPLAY LINE" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      ffplay -fs -autoexit "$line" 2> /dev/null

      echo " To bypass the 3 second wait press enter with no entry"
      echo
      echo -e "\033[5m 3 seconds remaining to quit Played List Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      echo 
      read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           if [[ $playdir ]]                                             
             then                                                        # if no input is entered within 3 seconds the next video will play
                 break                                                   # if enter is pressed without any input the next video will play
             else                                                        
                 :                                                       # press any key then enter within 3 seconds to quit Play Played List
           fi
done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfo.playedlist-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.number.played-list 2>/dev/null

   else
       echo
       echo
       echo " Played List Empty"
       sleep 1.7
fi

;;


        j) # PLAY LINE  (PLAYED LIST)

if [ -f ~/.config/videoinfox/tmp/videoinfo.number.played-list ]
   then

echo
echo
read -r -p " Enter Line Number: " linenumber  # waiting fot user input

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo.playedlist-apa > ~/.config/videoinfox/tmp/videoinfo.playedlist-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfo.playedlist-apa.tmp ~/.config/videoinfox/tmp/videoinfo.playedlist-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

read line < ~/.config/videoinfox/tmp/videoinfo.playedlist-apa

if [ -z "$line" ]

  then
      :

  else

#for line in $(cat "$input" 2>/dev/null)
# do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAYED LIST >>> PLAY LINE" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      echo " Screen will close after video player is quit."

      ffplay -fs -autoexit "$line" 2> /dev/null

      #echo " To bypass the 3 second wait press enter with no entry"
      #echo
      #echo -e "\033[5m 3 seconds remaining to quit Played List Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      #echo 
      #read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           #if [[ $playdir ]]                                             
           #  then                                                        # if no input is entered within 3 seconds the next video will play
           #      break                                                   # if enter is pressed without any input the next video will play
           #  else                                                        
           #      :                                                       # press any key then enter within 3 seconds to quit Play Played List
           #fi
# done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfo.playedlist-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.playedlist-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.number.played-list 2>/dev/null

fi

else
       echo
       echo
       echo " Played List Empty"
       sleep 1.7
fi

;;


       i)  # INFO - <PLAYED LIST>
 
      if [ -f "$pasteclip" ]
        then
            pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content
            echo
            echo
            echo " ""$pasteclip"
            echo  

echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip")  " Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

            echo
            read -r -p " Press enter to Continue" 

        else
            if [ -f ~/.config/videoinfox/tmp/videoinfo.playedlist-apa ]  # if file exists goto then
              then
              echo
              echo
              read -r -p " Enter line number to get info: " linenumber  # waiting fot user input

             # create file moving selected line number to the top
             tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo.playedlist-apa > ~/.config/videoinfox/tmp/videoinfo.playedlist-apa.tmp 2>/dev/null
      
             # read first line of file for play
             read playnumber < ~/.config/videoinfox/tmp/videoinfo.playedlist-apa.tmp

                 if [ -z "$playnumber" ]
                   then
                       :
 
                   else
                       #echo
                       echo
                       echo "$playnumber"
                       echo
           
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$playnumber")  " Duration:" $(ffmpeg -i "$playnumber" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height & duration

                       echo
                       read -r -p " Press enter to Continue" 
                       rm ~/.config/videoinfox/tmp/videoinfo.playedlist-apa.tmp 2>/dev/null

                 fi

        else
            :

            fi

      fi

;;       



##################################################################################################################################################
s) #######################  PLAYLIST - (PLAYED LIST)  ############################################################################################ 
##################################################################################################################################################



function menuvpd {

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

grabclip=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

if [ "$grabclip" = "http" ]  # if the first 4 characters = <http> go then
  then
      :

  else      
      if [ -f "$pasteclip" ]
        then
            :
        else
            echo "$pastetemp" | xclip -sel clip  # clearing out the clipboaed
            pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      fi
fi


if [ -f ~/.config/videoinfox/videoinfo.playlist ]
  then
      # REMOVE DUPLICATES
      cat -n ~/.config/videoinfox/videoinfo.playlist | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/tmp/videoinfo.playlist.tmp
      mv ~/.config/videoinfox/tmp/videoinfo.playlist.tmp ~/.config/videoinfox/videoinfo.playlist


  else
      echo > ~/.config/videoinfox/videoinfo.playlist
fi

                
clear

cp ~/.config/videoinfox/videoinfo.playlist ~/.config/videoinfox/tmp/videoinfo.playlist-apa


#  CHECK FOR AT LEAST ONE LINE THAT STARTS WITH A SLASH /
atleastone=$(grep '^/' ~/.config/videoinfox/tmp/videoinfo.playlist-apa | wc -l)

#  IF THE NUMBER DOESN"T = 0  THEN PROCESS AUTO PLAY OF PLAYLIST
if [ $atleastone -ne 0 ]  
   then

#  ASSIGN PLAYLIST TO VARIABLE: $moddedplaylist 
moddedplaylist="$HOME""/.config/videoinfox/tmp/videoinfo.playlist-apa"

#  PLAYLIST INPUT FOR LOOP
input="$moddedplaylist"  

#  CREATE TEMP FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfo.playlist-apa2

#  #  START WRITING
while read -r line  # read line by line and write line by line until end of file
do

   if [ -f "$line" ]
      then # ONLY WRITE LINE TO FILE IF IT IS A VALID PATH AND FILE
           echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2  
      else
           :
   fi        

done < "$input"
#  DONE WRITING ONLY VALID FILES

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null



# REMOVE DUPLICATES
cat -n ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/tmp/videoinfo.playlist-apa3

mv ~/.config/videoinfox/tmp/videoinfo.playlist-apa3 ~/.config/videoinfox/tmp/videoinfo.playlist-apa2





#  MOVE apa2 BACK TO apa
mv ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null

#  CREATE FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfo.playlist-apa2  

#  START WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx
while read -r line  # read line by line until end of file
do

   if [[ "$line" == *.mp4 ]] 
        then # IF FILE IS MP4, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2  
     
   elif [[ "$line" == *.webm ]]
        then # IF FILE IS WEBM, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2
      
   elif [[ "$line" == *.mkv ]]
        then # IF FILE IS MKV, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2

   elif [[ "$line" == *.avi ]]
        then # IF FILE IS AVI, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2

   elif [[ "$line" == *.divx ]]
        then  # IF FILE IS DIVX, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2
   else
        :  # IF THERE IS NO FILE MATCH, THERE IS NO WRITE
   fi

done < "$input"
#  END WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
cp ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null

# REMOVE PATH ONLY LEAVING FILENAME
sed -i 's/.*\///' ~/.config/videoinfox/tmp/videoinfo.playlist-apa2

# NUMBER THE LIST
sed '/./=' ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 | sed '/./N; s/\n/ /' > ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null

   
else #  NO LINES START WITH A SLASH /   remove empty files
     rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null     
fi


clear


if [ -f ~/.config/videoinfox/tmp/videoinfo.number.play-list ]
   then
        cat ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null
        dashit=$(echo -e "\033[5m-\033m\033[0m\033[5m\033[5m\033[0m")
   else
        dashit=$(echo "-") # not blinking
        echo
        echo "Playlist Empty . . ."
fi

#cat ~/.config/videoinfox/videoinfo.playlist 

echo
echo "Directory: ""$PWD"
echo "Clipboard: ""$pasteclip"

##################################################################################################################################################

#                           @CHECK TO SEE IF THE CLIPBOARD CONTENTS CONTAIN A URL OR A FILE AND ACT UPON THAT DISPLAY

##################################################################################################################################################

# the 2 lines of below code are creating two new variables for the following loop.
# 1st variable <$grabpaste>   <cut> is used to cut all characters after the 4th character from the variable. Only 4 chatacters are needed to look for <http>
# 2nd variable <$grabpaste2>  <cut> is used to cut all characters after the 1st character from the variable. Only 1 character is needed to look for </>  

# for main if loop - to look for <http>
grabpaste=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

# for nested if loop - to look for </>
grabpaste2=$(echo "$pasteclip" | cut -c-1)  # cut everything after the 1st character

# the following code checks to see if the clipbooard has a url in it by lookin for <http> from <$grabpaste>  
# If it is <http>, YT-DLP will get the clipboard. yt-dlp will check if its a valid link by trying to extract the name of the video file.
# If it isn't <http>  the ytdlp loop will be skipped

if [ "$grabpaste" = "http" ]  # if the first 4 characters = <http> go then
  then
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir 2> /dev/null  # reding default download directory
      ytdlpconfirm=$(~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" 2> /dev/null)

            if [ "$ytdlpconfirm" = "" ]  
                  then

                      echo "" | xclip -sel clip  # clearing out the clipboard
                      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

                           # Videoinfox v2.00________________________________________ Videoinfox v2.00_________________________________________
                           #________________x________________________________________ _________________________________________________________
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " "$der" PLAYLIST"
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " p - Play Clipboard     o "$dashit" Autoplay Line     j "$dashit" Play Line     i - Info     D - Delete PLAYLIST       q - Quit"
                      echo         

                  else 
                      echo
                      echo "YT-DLP Confirmed: "$ytdlpconfirm""
                      echo
                      echo "Download Directory: $dirsaved"  # dislpay default download directory
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " "$der" PLAYLIST"
                      echo "___________________________________________________________________________________________________________________"
                      echo

echo -e " p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m     o "$dashit" Autoplay Line     j "$dashit" Play Line     i - Info     D - Delete PLAYLIST       q - Quit"
        
                      echo                                                                                  
            fi
  else

      if [ -f "$pasteclip" ]  # 
        then
            echo      
            echo "Valid file in clipboard"
            echo "___________________________________________________________________________________________________________________"
            echo
            echo " "$der" PLAYLIST"
            echo "___________________________________________________________________________________________________________________"
            echo

echo -e " p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m     o "$dashit" Autoplay Line     j "$dashit" Play Line     i - Info     D - Delete PLAYLIST       q - Quit"

            echo                                                             

        else 

            echo "" | xclip -sel clip  # clearing out the clipboard
            pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

            echo "___________________________________________________________________________________________________________________"
            echo
            echo " "$der" PLAYLIST"
            echo "___________________________________________________________________________________________________________________"
            echo
            echo " p - Play Clipboard     o "$dashit" Autoplay Line     j "$dashit" Play Line     i - Info     D - Delete Playlist          q - Quit"
            echo                                                             
fi
fi

echo -en " Enter Option: "
read -r -n1 optionv


}

        while true
        do
	    menuvpd
	    case $optionv in
    
        q)  # QUIT
        rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null
        rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null
        rm ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null
        break
        ;;


        o) # AUTOPLAY LINE  (PLAYLIST)

if [ -f ~/.config/videoinfox/tmp/videoinfo.number.play-list ]
   then

echo
echo
read -r -p " Enter Line Number: " linenumber  # waiting fot user input

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo.playlist-apa > ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

for line in $(cat "$input" 2>/dev/null)
 do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAYLIST >>> AUTOPLAY LINE" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      ffplay -fs -autoexit "$line" 2> /dev/null

      echo " To bypass the 3 second wait press enter with no entry"
      echo
      echo -e "\033[5m 3 seconds remaining to quit Playlist Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      echo 
      read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           if [[ $playdir ]]                                             
             then                                                        # if no input is entered within 3 seconds the next video will play
                 break                                                   # if enter is pressed without any input the next video will play
             else                                                        
                 :                                                       # press any key then enter within 3 seconds to quit Play PLAYLIST
           fi
done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null

   else
       echo
       echo
       echo " PLAYLIST Empty"
       sleep 1.7
fi

;;


        j) # PLAY LINE  (PLAYLIST)

if [ -f ~/.config/videoinfox/tmp/videoinfo.number.play-list ]
   then

echo
echo
read -r -p " Enter Line Number: " linenumber  # waiting fot user input

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo.playlist-apa > ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

read line < ~/.config/videoinfox/tmp/videoinfo.playlist-apa

if [ -z "$line" ]

  then
      :

  else

#for line in $(cat "$input" 2>/dev/null)
# do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAYLIST >>> PLAY LINE" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      echo " Screen will close after video player is quit."

      ffplay -fs -autoexit "$line" 2> /dev/null

      #echo " To bypass the 3 second wait press enter with no entry"
      #echo
      #echo -e "\033[5m 3 seconds remaining to quit PLAYLIST Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      #echo 
      #read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           #if [[ $playdir ]]                                             
           #  then                                                        # if no input is entered within 3 seconds the next video will play
           #      break                                                   # if enter is pressed without any input the next video will play
           #  else                                                        
           #      :                                                       # press any key then enter within 3 seconds to quit Play PLAYLIST
           #fi
# done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null

fi

else
       echo
       echo
       echo " Playlist Empty . . ."
       sleep 1.7
fi

;;


       i)  # INFO - <PLAYLIST>
 
      if [ -f "$pasteclip" ]
        then
            pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content
            echo
            echo
            echo " ""$pasteclip"
            echo  

echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip")  " Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

            echo
            read -r -p " Press enter to Continue" 

        else
            if [ -f ~/.config/videoinfox/tmp/videoinfo.playlist-apa ]  # if file exists goto then
              then
              echo
              echo
              read -r -p " Enter line number to get info: " linenumber  # waiting fot user input

             # create file moving selected line number to the top
             tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo.playlist-apa > ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp 2>/dev/null
      
             # read first line of file for play
             read playnumber < ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp

                 if [ -z "$playnumber" ]
                   then
                       :
 
                   else
                       #echo
                       echo
                       echo "$playnumber"
                       echo
           
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$playnumber")  " Duration:" $(ffmpeg -i "$playnumber" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height & duration

                       echo
                       read -r -p " Press enter to Continue" 
                       rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp 2>/dev/null

                 fi

        else
            :

            fi

      fi

;;       

      
          p) 
          #  @PLAY CLIPBOARD - <PLAYLIST>        

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

if [ "$grabpaste" = "http" ]  # if the 4 characters = <http> go then
  then
      #  DOWNLOAD AND PLAY FILE if <$grabpaste> ONLY IF IT =  http        
   
      grabdir="$PWD"  # storing directory to restore at the end of this function
        
      #  DOWNLOAD LINK AND PLAY
      
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir  # reading download directory 
      cd "$dirsaved"   # change to download directory
 
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      clear
    
      # make a backup copy of:   ~/.config/videoinfox/videoinfo.lastdownload   to restore on Play Clipboard with invalid url
      cp ~/.config/videoinfox/videoinfo.lastdownload ~/.config/videoinfox/videoinfo.lastdownload.bak
   
      ~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" > ~/.config/videoinfox/videoinfo.lastdownload 
      ~/.config/videoinfox/yt-dlp "$pasteclip"     
      
      # remove first dot and everything after it in filename. this was done because file names with dots before the extension were breking find results
      sed "s/\..*//" ~/.config/videoinfox/videoinfo.lastdownload > ~/.config/videoinfox/videoinfo.lastdownload.work

      # remove first [ and everything after it in filename. this was done because file names with [ 
      sed -i "s/\[.*//" ~/.config/videoinfox/videoinfo.lastdownload.work

      # rename videoinfo.lastdownload.work to videoinfox/videoinfo.lastdownload
      mv ~/.config/videoinfox/videoinfo.lastdownload.work ~/.config/videoinfox/videoinfo.lastdownload  
      
      if [ -s ~/.config/videoinfox/videoinfo.lastdownload ]
         then
             # make a backup copy of:   ~/.config/videoinfox/videoinfo.lastdownload to restore on Play Clipboard with invalid url
             cp ~/.config/videoinfox/videoinfo.lastdownload ~/.config/videoinfox/videoinfo.lastdownload.bak
         else
             :
      fi

   
      read -r lastdownload < ~/.config/videoinfox/videoinfo.lastdownload  # reading last download attempt
      read -r lastdownloadbak < ~/.config/videoinfox/videoinfo.lastdownload.bak  # reading last successful download 
             
      ylast=$(find "$PWD" -maxdepth 1 -type f \( -iname "$lastdownload*" \))  # finding the file to play

      echo "$ylast" > ~/.config/videoinfox/videoinfo.find-last-download  # write find result to file

   
      # IF THERE ARE IDENTICAL FILENAMES WITH DIFFERENT FILE EXTENSIONS FIND WILL PRODUCE MORE THAN ONE RESULT      
      correcterror=$(wc -l ~/.config/videoinfox/videoinfo.find-last-download | cut -d' ' -f1)  # getting line count.
          
             if [ "$correcterror" -gt 1 ]  # If line count is greater than 1 goto then. More than 1 was caused from Play Clipboard on invalid url.
                then                
                     if [[ "$lastdownload" == "$lastdownloadbak" ]]                 
                        then
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download  # read first find result from file
                     
                        else
                            echo > ~/.config/videoinfox/videoinfo.find-last-download
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download
                     fi
                               
             else
                  read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download      
                                     
             fi      

           
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY LAST DOWNLOAD"
      echo
      echo " [PLAY]> "$ytdlplast""
      echo "___________________________________________________________________________________________________________________"         
      echo
              
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$ytdlplast")  " Duration:" $(ffmpeg -i "$ytdlplast" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      
      if [ -z "$ytdlplast" ]
          then
              :
          else     
              notify-send "Videoinfox messsage: Playing last yt-dlp download . . ." "Play: $lastdownload"
              echo "$ytdlplast" >> ~/.config/videoinfox/videoinfo.playlist  # write clipboard content to PLAYLIST File  
              ffplay -fs -autoexit &> /dev/null "$ytdlplast"  
      fi 
      
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      
      cd "$grabdir"   # restore dir prior to entering yt-dlp menu              

  else

      if [ -f "$pasteclip" ]
        then
      
      #  PLAY FILE if <$grabpaste> WAS ANYTHING BUT <HTTP> 
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY CLIPBOARD" 
      echo
      echo " [PLAY]> "$pasteclip" "
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip")  " Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      #read -p " Press enter to Continue"
      
       # video filename with full path <$pasteclip> strip from the bgininning of line to the last slash leaving only the filename <$getfilenameonly>
      getfilenameonly=$(echo "$pasteclip" |  awk -F '/' '{print $NF}')  
      notify-send "Videoinfox messsage: Playing . . ." "$getfilenameonly"
     
      echo "$pasteclip" >> ~/.config/videoinfox/videoinfo.playlist  # write clipboard content to PLAYLIST file
      ffplay -fs -autoexit "$pasteclip" 2>/dev/null  # play video in clipboard
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      echo " PLAYLIST Closed"
  
        else
            
            echo
            echo
            echo " No playable content in the clipboard . . ."
            sleep 1.2
      fi   
  fi
  ;;  


                D)  # DELETE PLAYLIST - <find menu>
                rm ~/.config/videoinfox/videoinfo.playlist 2> /dev/null
                # writing empty playlist
                echo > ~/.config/videoinfox/videoinfo.playlist
                echo
                echo
                echo " PLAYLIST DELETED . . ."    
                sleep .7
                ;;

                *)

                esac
                done
                ;;

k)
##################################################################################################################################################
###########################   ADD TO PLAYLIST  k   (PLAYED LIST)  ################################################################################
##################################################################################################################################################

if [ -f ~/.config/videoinfox/videoinfo.playlist ]  # if file exists goto then
  then
      :
  else
      echo > ~/.config/videoinfox/videoinfo.playlist
fi


if [ -f ~/.config/videoinfox/videoinfo.playedlist ]  # if file exists goto then
  then
      echo
      echo
      read -r -p " Enter line number to add to Playlist: " linenumber  # waiting fot user input



      # REMOVE BLANK LINES
      sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfo.playedlist-apa 2>/dev/null



      # create file moving selected line number to the top
      tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo.playedlist-apa > ~/.config/videoinfox/tmp/videoinfo.playedlist-playnumber.tmp 2>/dev/null

     
      # read first line of file for play
      read playnumber < ~/.config/videoinfox/tmp/videoinfo.playedlist-playnumber.tmp

      if [ -z "$playnumber" ]
          then
              :

          else
              echo "$playnumber" >> ~/.config/videoinfox/videoinfo.playlist
              
              echo "$playnumber" > ~/.config/videoinfox/videoinfox.zzz

              echo
              echo " ""$playnumber" 
              echo
              echo " Added to Playlist . . ."
              sleep .18
      fi

else
    echo
    echo
    echo " Select Show All or use Find to acess this feature . . ."
    sleep 1.7

fi
;;
      
          p) 
          #  @PLAY CLIPBOARD - <PLAYED LIST>        

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

if [ "$grabpaste" = "http" ]  # if the 4 characters = <http> go then
  then
      #  DOWNLOAD AND PLAY FILE if <$grabpaste> ONLY IF IT =  http        
   
      grabdir="$PWD"  # storing directory to restore at the end of this function
        
      #  DOWNLOAD LINK AND PLAY
      
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir  # reading download directory 
      cd "$dirsaved"   # change to download directory
 
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      clear
    
      # make a backup copy of:   ~/.config/videoinfox/videoinfo.lastdownload   to restore on Play Clipboard with invalid url
      cp ~/.config/videoinfox/videoinfo.lastdownload ~/.config/videoinfox/videoinfo.lastdownload.bak
   
      ~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" > ~/.config/videoinfox/videoinfo.lastdownload 
      ~/.config/videoinfox/yt-dlp "$pasteclip"     
      
      # remove first dot and everything after it in filename. this was done because file names with dots before the extension were breking find results
      sed "s/\..*//" ~/.config/videoinfox/videoinfo.lastdownload > ~/.config/videoinfox/videoinfo.lastdownload.work

      # remove first [ and everything after it in filename. this was done because file names with [ 
      sed -i "s/\[.*//" ~/.config/videoinfox/videoinfo.lastdownload.work

      # rename videoinfo.lastdownload.work to videoinfox/videoinfo.lastdownload
      mv ~/.config/videoinfox/videoinfo.lastdownload.work ~/.config/videoinfox/videoinfo.lastdownload  
      
      if [ -s ~/.config/videoinfox/videoinfo.lastdownload ]
         then
             # make a backup copy of:   ~/.config/videoinfox/videoinfo.lastdownload to restore on Play Clipboard with invalid url
             cp ~/.config/videoinfox/videoinfo.lastdownload ~/.config/videoinfox/videoinfo.lastdownload.bak
         else
             :
      fi

   
      read -r lastdownload < ~/.config/videoinfox/videoinfo.lastdownload  # reading last download attempt
      read -r lastdownloadbak < ~/.config/videoinfox/videoinfo.lastdownload.bak  # reading last successful download 
             
      ylast=$(find "$PWD" -maxdepth 1 -type f \( -iname "$lastdownload*" \))  # finding the file to play

      echo "$ylast" > ~/.config/videoinfox/videoinfo.find-last-download  # write find result to file

   
      # IF THERE ARE IDENTICAL FILENAMES WITH DIFFERENT FILE EXTENSIONS FIND WILL PRODUCE MORE THAN ONE RESULT      
      correcterror=$(wc -l ~/.config/videoinfox/videoinfo.find-last-download | cut -d' ' -f1)  # getting line count.
          
             if [ "$correcterror" -gt 1 ]  # If line count is greater than 1 goto then. More than 1 was caused from Play Clipboard on invalid url.
                then                
                     if [[ "$lastdownload" == "$lastdownloadbak" ]]                 
                        then
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download  # read first find result from file
                     
                        else
                            echo > ~/.config/videoinfox/videoinfo.find-last-download
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download
                     fi
                               
             else
                  read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download      
                                     
             fi      

           
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY LAST DOWNLOAD"
      echo
      echo " [PLAY]> "$ytdlplast""
      echo "___________________________________________________________________________________________________________________"         
      echo
              
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$ytdlplast")  " Duration:" $(ffmpeg -i "$ytdlplast" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      
      if [ -z "$ytdlplast" ]
          then
              :
          else     
              notify-send "Videoinfox messsage: Playing last yt-dlp download . . ." "Play: $lastdownload"
              echo "$ytdlplast" >> ~/.config/videoinfox/videoinfo.playedlist  # write clipboard content to Played List File  
              ffplay -fs -autoexit &> /dev/null "$ytdlplast"  
      fi 
      
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      
      cd "$grabdir"   # restore dir prior to entering yt-dlp menu              

  else

      if [ -f "$pasteclip" ]
        then
      
      #  PLAY FILE if <$grabpaste> WAS ANYTHING BUT <HTTP> 
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY CLIPBOARD" 
      echo
      echo " [PLAY]> "$pasteclip" "
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip")  " Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      #read -p " Press enter to Continue"
      
       # video filename with full path <$pasteclip> strip from the bgininning of line to the last slash leaving only the filename <$getfilenameonly>
      getfilenameonly=$(echo "$pasteclip" |  awk -F '/' '{print $NF}')  
      notify-send "Videoinfox messsage: Playing . . ." "$getfilenameonly"
     
      echo "$pasteclip" >> ~/.config/videoinfox/videoinfo.playedlist  # write clipboard content to Played List file
      ffplay -fs -autoexit "$pasteclip" 2>/dev/null  # play video in clipboard
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      echo " Played List Closed"
  
        else
            
            echo
            echo
            echo " No playable content in the clipboard . . ."
            sleep 1.2
      fi   
  fi
  ;;  


                D)  # DELETE PLAYED LIST - <find menu>
                rm ~/.config/videoinfox/videoinfo.playedlist
                # writing header for new Played List because new file wouldn't be created until return to main HOME
                echo > ~/.config/videoinfox/videoinfo.playedlist
                #echo "PLAYED LIST" >> ~/.config/videoinfox/videoinfo.playedlist
                #echo >> ~/.config/videoinfox/videoinfo.playedlist
                #echo "This File was Created: $(date) by" "$USER" >> ~/.config/videoinfox/videoinfo.playedlist
                #echo >> ~/.config/videoinfox/videoinfo.playedlist      
                echo
                echo
                echo " Played List DELETED . . ."
                echo
                #read -p " Press enter to Continue"    
                sleep .7
                ;;

                *)

                esac
                done
                ;; 


##################################################################################################################################################
s) #######################  PLAYLIST - (HOME)  ################################################################################################### 
##################################################################################################################################################



function menuv {

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

grabclip=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

if [ "$grabclip" = "http" ]  # if the first 4 characters = <http> go then
  then
      :

  else      
      if [ -f "$pasteclip" ]
        then
            :
        else
            echo "$pastetemp" | xclip -sel clip  # clearing out the clipboaed
            pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      fi
fi


if [ -f ~/.config/videoinfox/videoinfo.playlist ]
  then
      # REMOVE DUPLICATES
      cat -n ~/.config/videoinfox/videoinfo.playlist | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/tmp/videoinfo.playlist.tmp
      mv ~/.config/videoinfox/tmp/videoinfo.playlist.tmp ~/.config/videoinfox/videoinfo.playlist

  else
      echo > ~/.config/videoinfox/videoinfo.playlist
fi

                
clear

cp ~/.config/videoinfox/videoinfo.playlist ~/.config/videoinfox/tmp/videoinfo.playlist-apa


#  CHECK FOR AT LEAST ONE LINE THAT STARTS WITH A SLASH /
atleastone=$(grep '^/' ~/.config/videoinfox/tmp/videoinfo.playlist-apa | wc -l)

#  IF THE NUMBER DOESN"T = 0  THEN PROCESS AUTO PLAY OF PLAYLIST
if [ $atleastone -ne 0 ]  
   then

#  ASSIGN PLAYLIST TO VARIABLE: $moddedplaylist 
moddedplaylist="$HOME""/.config/videoinfox/tmp/videoinfo.playlist-apa"

#  PLAYLIST INPUT FOR LOOP
input="$moddedplaylist"  

#  CREATE TEMP FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfo.playlist-apa2

#  #  START WRITING
while read -r line  # read line by line and write line by line until end of file
do

   if [ -f "$line" ]
      then # ONLY WRITE LINE TO FILE IF IT IS A VALID PATH AND FILE
           echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2  
      else
           :
   fi        

done < "$input"
#  DONE WRITING ONLY VALID FILES

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null



# REMOVE DUPLICATES
cat -n ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/tmp/videoinfo.playlist-apa3

mv ~/.config/videoinfox/tmp/videoinfo.playlist-apa3 ~/.config/videoinfox/tmp/videoinfo.playlist-apa2





#  MOVE apa2 BACK TO apa
mv ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null

#  CREATE FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfo.playlist-apa2  

#  START WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx
while read -r line  # read line by line until end of file
do

   if [[ "$line" == *.mp4 ]] 
        then # IF FILE IS MP4, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2  
     
   elif [[ "$line" == *.webm ]]
        then # IF FILE IS WEBM, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2
      
   elif [[ "$line" == *.mkv ]]
        then # IF FILE IS MKV, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2

   elif [[ "$line" == *.avi ]]
        then # IF FILE IS AVI, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2

   elif [[ "$line" == *.divx ]]
        then  # IF FILE IS DIVX, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfo.playlist-apa2
   else
        :  # IF THERE IS NO FILE MATCH, THERE IS NO WRITE
   fi

done < "$input"
#  END WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
cp ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null

# REMOVE PATH ONLY LEAVING FILENAME
sed -i 's/.*\///' ~/.config/videoinfox/tmp/videoinfo.playlist-apa2

# NUMBER THE LIST
sed '/./=' ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 | sed '/./N; s/\n/ /' > ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null

   
else #  NO LINES START WITH A SLASH /   remove empty files
     rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null     
fi


clear


if [ -f ~/.config/videoinfox/tmp/videoinfo.number.play-list ]
   then
        cat ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null
        dashit=$(echo -e "\033[5m-\033m\033[0m\033[5m\033[5m\033[0m")
   else
        dashit=$(echo "-") # not blinking
        echo
        echo "Playlist Empty . . ."
fi

#cat ~/.config/videoinfox/videoinfo.playlist 

echo
echo "Directory: ""$PWD"
echo "Clipboard: ""$pasteclip"

##################################################################################################################################################

#                           @CHECK TO SEE IF THE CLIPBOARD CONTENTS CONTAIN A URL OR A FILE AND ACT UPON THAT DISPLAY

##################################################################################################################################################

# the 2 lines of below code are creating two new variables for the following loop.
# 1st variable <$grabpaste>   <cut> is used to cut all characters after the 4th character from the variable. Only 4 chatacters are needed to look for <http>
# 2nd variable <$grabpaste2>  <cut> is used to cut all characters after the 1st character from the variable. Only 1 character is needed to look for </>  

# for main if loop - to look for <http>
grabpaste=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

# for nested if loop - to look for </>
grabpaste2=$(echo "$pasteclip" | cut -c-1)  # cut everything after the 1st character

# the following code checks to see if the clipbooard has a url in it by lookin for <http> from <$grabpaste>  
# If it is <http>, YT-DLP will get the clipboard. yt-dlp will check if its a valid link by trying to extract the name of the video file.
# If it isn't <http>  the ytdlp loop will be skipped

if [ "$grabpaste" = "http" ]  # if the first 4 characters = <http> go then
  then
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir 2> /dev/null  # reding default download directory
      ytdlpconfirm=$(~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" 2> /dev/null)

            if [ "$ytdlpconfirm" = "" ]  
                  then

                      echo "" | xclip -sel clip  # clearing out the clipboard
                      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

                           # Videoinfox v2.00________________________________________ Videoinfox v2.00_________________________________________
                           #________________x________________________________________ _________________________________________________________
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " "$der" PLAYLIST"
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " p - Play Clipboard     o "$dashit" Autoplay Line     j "$dashit" Play Line     i - Info     D - Delete PLAYLIST       q - Quit"
                      echo         

                  else 
                      echo
                      echo "YT-DLP Confirmed: "$ytdlpconfirm""
                      echo
                      echo "Download Directory: $dirsaved"  # dislpay default download directory
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " "$der" PLAYLIST"
                      echo "___________________________________________________________________________________________________________________"
                      echo

echo -e " p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m     o "$dashit" Autoplay Line     j "$dashit" Play Line     i - Info     D - Delete PLAYLIST       q - Quit"
        
                      echo                                                                                  
            fi
  else

      if [ -f "$pasteclip" ]  # 
        then
            echo      
            echo "Valid file in clipboard"
            echo "___________________________________________________________________________________________________________________"
            echo
            echo " "$der" PLAYLIST"
            echo "___________________________________________________________________________________________________________________"
            echo

echo -e " p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m     o "$dashit" Autoplay Line     j "$dashit" Play Line     i - Info     D - Delete PLAYLIST       q - Quit"

            echo                                                             

        else 

            echo "" | xclip -sel clip  # clearing out the clipboard
            pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

            echo "___________________________________________________________________________________________________________________"
            echo
            echo " "$der" PLAYLIST"
            echo "___________________________________________________________________________________________________________________"
            echo
            echo " p - Play Clipboard     o "$dashit" Autoplay Line     j "$dashit" Play Line     i - Info     D - Delete Playlist          q - Quit"
            echo                                                             
fi
fi

echo -en " Enter Option: "
read -r -n1 optionv


}

        while true
        do
	    menuv
	    case $optionv in
    
        q)  # QUIT
        rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null
        rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null
        rm ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null
        break;;


        o) # AUTOPLAY LINE  (PLAYLIST)

if [ -f ~/.config/videoinfox/tmp/videoinfo.number.play-list ]
   then

echo
echo
read -r -p " Enter Line Number: " linenumber  # waiting fot user input

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo.playlist-apa > ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

for line in $(cat "$input" 2>/dev/null)
 do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAYLIST >>> AUTOPLAY LINE" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      ffplay -fs -autoexit "$line" 2> /dev/null

      echo " To bypass the 3 second wait press enter with no entry"
      echo
      echo -e "\033[5m 3 seconds remaining to quit Playlist Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      echo 
      read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           if [[ $playdir ]]                                             
             then                                                        # if no input is entered within 3 seconds the next video will play
                 break                                                   # if enter is pressed without any input the next video will play
             else                                                        
                 :                                                       # press any key then enter within 3 seconds to quit Play PLAYLIST
           fi
done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null

   else
       echo
       echo
       echo " PLAYLIST Empty"
       sleep 1.7
fi

;;


        j) # PLAY LINE  (PLAYLIST)

if [ -f ~/.config/videoinfox/tmp/videoinfo.number.play-list ]
   then

echo
echo
read -r -p " Enter Line Number: " linenumber  # waiting fot user input

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo.playlist-apa > ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

read line < ~/.config/videoinfox/tmp/videoinfo.playlist-apa

if [ -z "$line" ]

  then
      :

  else

#for line in $(cat "$input" 2>/dev/null)
# do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAYLIST >>> PLAY LINE" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      echo " Screen will close after video player is quit."

      ffplay -fs -autoexit "$line" 2> /dev/null

      #echo " To bypass the 3 second wait press enter with no entry"
      #echo
      #echo -e "\033[5m 3 seconds remaining to quit PLAYLIST Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      #echo 
      #read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           #if [[ $playdir ]]                                             
           #  then                                                        # if no input is entered within 3 seconds the next video will play
           #      break                                                   # if enter is pressed without any input the next video will play
           #  else                                                        
           #      :                                                       # press any key then enter within 3 seconds to quit Play PLAYLIST
           #fi
# done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo.number.play-list 2>/dev/null

fi

else
       echo
       echo
       echo " Playlist Empty . . ."
       sleep 1.7
fi

;;


       i)  # INFO - <PLAYLIST>
 
      if [ -f "$pasteclip" ]
        then
            pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content
            echo
            echo
            echo " ""$pasteclip"
            echo  

echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip")  " Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

            echo
            read -r -p " Press enter to Continue" 

        else
            if [ -f ~/.config/videoinfox/tmp/videoinfo.playlist-apa ]  # if file exists goto then
              then
              echo
              echo
              read -r -p " Enter line number to get info: " linenumber  # waiting fot user input

             # create file moving selected line number to the top
             tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo.playlist-apa > ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp 2>/dev/null
      
             # read first line of file for play
             read playnumber < ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp

                 if [ -z "$playnumber" ]
                   then
                       :
 
                   else
                       #echo
                       echo
                       echo "$playnumber"
                       echo
           
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$playnumber")  " Duration:" $(ffmpeg -i "$playnumber" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height & duration

                       echo
                       read -r -p " Press enter to Continue" 
                       rm ~/.config/videoinfox/tmp/videoinfo.playlist-apa.tmp 2>/dev/null

                 fi

        else
            :

            fi

      fi

;;       

      
          p) 
          #  @PLAY CLIPBOARD - <PLAYLIST>        

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

if [ "$grabpaste" = "http" ]  # if the 4 characters = <http> go then
  then
      #  DOWNLOAD AND PLAY FILE if <$grabpaste> ONLY IF IT =  http        
   
      grabdir="$PWD"  # storing directory to restore at the end of this function
        
      #  DOWNLOAD LINK AND PLAY
      
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir  # reading download directory 
      cd "$dirsaved"   # change to download directory
 
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      clear
    
      # make a backup copy of:   ~/.config/videoinfox/videoinfo.lastdownload   to restore on Play Clipboard with invalid url
      cp ~/.config/videoinfox/videoinfo.lastdownload ~/.config/videoinfox/videoinfo.lastdownload.bak
   
      ~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" > ~/.config/videoinfox/videoinfo.lastdownload 
      ~/.config/videoinfox/yt-dlp "$pasteclip"     
      
      # remove first dot and everything after it in filename. this was done because file names with dots before the extension were breking find results
      sed "s/\..*//" ~/.config/videoinfox/videoinfo.lastdownload > ~/.config/videoinfox/videoinfo.lastdownload.work

      # remove first [ and everything after it in filename. this was done because file names with [ 
      sed -i "s/\[.*//" ~/.config/videoinfox/videoinfo.lastdownload.work

      # rename videoinfo.lastdownload.work to videoinfox/videoinfo.lastdownload
      mv ~/.config/videoinfox/videoinfo.lastdownload.work ~/.config/videoinfox/videoinfo.lastdownload  
      
      if [ -s ~/.config/videoinfox/videoinfo.lastdownload ]
         then
             # make a backup copy of:   ~/.config/videoinfox/videoinfo.lastdownload to restore on Play Clipboard with invalid url
             cp ~/.config/videoinfox/videoinfo.lastdownload ~/.config/videoinfox/videoinfo.lastdownload.bak
         else
             :
      fi

   
      read -r lastdownload < ~/.config/videoinfox/videoinfo.lastdownload  # reading last download attempt
      read -r lastdownloadbak < ~/.config/videoinfox/videoinfo.lastdownload.bak  # reading last successful download 
             
      ylast=$(find "$PWD" -maxdepth 1 -type f \( -iname "$lastdownload*" \))  # finding the file to play

      echo "$ylast" > ~/.config/videoinfox/videoinfo.find-last-download  # write find result to file

   
      # IF THERE ARE IDENTICAL FILENAMES WITH DIFFERENT FILE EXTENSIONS FIND WILL PRODUCE MORE THAN ONE RESULT      
      correcterror=$(wc -l ~/.config/videoinfox/videoinfo.find-last-download | cut -d' ' -f1)  # getting line count.
          
             if [ "$correcterror" -gt 1 ]  # If line count is greater than 1 goto then. More than 1 was caused from Play Clipboard on invalid url.
                then                
                     if [[ "$lastdownload" == "$lastdownloadbak" ]]                 
                        then
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download  # read first find result from file
                     
                        else
                            echo > ~/.config/videoinfox/videoinfo.find-last-download
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download
                     fi
                               
             else
                  read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download      
                                     
             fi      

           
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY LAST DOWNLOAD"
      echo
      echo " [PLAY]> "$ytdlplast""
      echo "___________________________________________________________________________________________________________________"         
      echo
              
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$ytdlplast")  " Duration:" $(ffmpeg -i "$ytdlplast" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      
      if [ -z "$ytdlplast" ]
          then
              :
          else     
              notify-send "Videoinfox messsage: Playing last yt-dlp download . . ." "Play: $lastdownload"
              echo "$ytdlplast" >> ~/.config/videoinfox/videoinfo.playlist  # write clipboard content to PLAYLIST File  
              ffplay -fs -autoexit &> /dev/null "$ytdlplast"  
      fi 
      
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      
      cd "$grabdir"   # restore dir prior to entering yt-dlp menu              

  else

      if [ -f "$pasteclip" ]
        then
      
      #  PLAY FILE if <$grabpaste> WAS ANYTHING BUT <HTTP> 
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY CLIPBOARD" 
      echo
      echo " [PLAY]> "$pasteclip" "
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip")  " Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      #read -p " Press enter to Continue"
      
       # video filename with full path <$pasteclip> strip from the bgininning of line to the last slash leaving only the filename <$getfilenameonly>
      getfilenameonly=$(echo "$pasteclip" |  awk -F '/' '{print $NF}')  
      notify-send "Videoinfox messsage: Playing . . ." "$getfilenameonly"
     
      echo "$pasteclip" >> ~/.config/videoinfox/videoinfo.playlist  # write clipboard content to PLAYLIST file
      ffplay -fs -autoexit "$pasteclip" 2>/dev/null  # play video in clipboard
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      echo " PLAYLIST Closed"
  
        else
            
            echo
            echo
            echo " No playable content in the clipboard . . ."
            sleep 1.2
      fi   
  fi
  ;;  


                D)  # DELETE PLAYLIST - <find menu>
                rm ~/.config/videoinfox/videoinfo.playlist 2> /dev/null
                # writing empty playlist
                echo > ~/.config/videoinfox/videoinfo.playlist
                echo
                echo
                echo " PLAYLIST DELETED . . ."    
                sleep .7
                ;;

                *)

                esac
                done
                ;;

k)
##################################################################################################################################################
###########################   ADD TO PLAYLIST  k   <HOME>  #######################################################################################
##################################################################################################################################################

if [ -f ~/.config/videoinfox/videoinfo.playlist ]  # if file exists goto then
  then
      :
  else
      echo > ~/.config/videoinfox/videoinfo.playlist
fi


if [ -f ~/.config/videoinfox/tmp/videoinfo-findwork.tmp ]  # if file exists goto then
  then
      echo
      echo
      read -r -p " Enter line number to add to Playlist: " linenumber  # waiting fot user input

      # create file moving selected line number to the top
      tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo-findwork.tmp > ~/.config/videoinfox/tmp/videoinfo-findwork-playnumber.tmp 2>/dev/null
      
      # read first line of file for play
      read playnumber < ~/.config/videoinfox/tmp/videoinfo-findwork-playnumber.tmp

      if [ -z "$playnumber" ]
          then
              :

          else
              echo "$playnumber" >> ~/.config/videoinfox/videoinfo.playlist
              echo
              echo " ""$playnumber" 
              echo
              echo " Added to Playlist . . ."
              sleep .18
      fi

else
    echo
    echo
    echo " Select Show All or use Find to acess this feature . . ."
    sleep 1.7

fi
;;


##################################################################################################################################################
    f)  ################  FIND ROUTINE - <HOME>  #################################################################################################
##################################################################################################################################################

    pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

    clear
    echo
    echo "Working Directory: ""$PWD"  # <pwd>  print current working directory to the screen 
    echo "Clipboard Content: ""$pasteclip"
    echo "___________________________________________________________________________________________________________________"
    echo
    echo " ""$ver"" >>> Find Video File - Recursive                                                  wildcard * ok"
    echo "___________________________________________________________________________________________________________________"
    echo
    echo " Find a video file to Play and/or get Info on.  No file extensions." 
    echo
    read -r -p " File Name: " videofind  # waiting fot user input - video file that you want to find

    searchtotal=$(find "$PWD" -type f \( -iname "$videofind.mp4" -o -iname "$videofind.mkv" -o -iname "$videofind.avi" -o -iname "$videofind.webm" -o -iname "$videofind.divx" \) 2>/dev/null | wc -l)    
                                                                                                  	
    if [ -z "$videofind" ]  # if no input was entered goto  <then>  
          then
               echo
               echo " error: Nothing was entered."
               echo
               sleep .7        
          else
                
              if echo "$videofind" | grep "/" > /dev/null  # if any slashehes were entered goto <then>
                then
                    echo
                    echo " error: No directories only filenames."
                    echo
                    sleep .7 
                else
                                
                     if [ "$searchtotal" = 0 ]  # if find returned no results goto <then>
      
                       then
                           #cp ~/.config/videoinfox/videoinfo.findwork3 ~/.config/videoinfox/videoinfo.findwork
                           #cp ~/.config/videoinfox/videoinfo.lastsearchtotal2  ~/.config/videoinfox/videoinfo.lastsearchtotal
                           echo
                           echo " No files found"
                           echo
                           sleep .7 
                          
                       else
                           echo "$videofind" > ~/.config/videoinfox/videoinfo.lastfindstring   # save last find string used                          
                           read -r fterm < ~/.config/videoinfox/videoinfo.lastfindstring

                           # save find results
find "$PWD" -type f \( -iname "$videofind.mp4" -o -iname "$videofind.mkv" -o -iname "$videofind.avi" -o -iname "$videofind.webm" -o -iname "$videofind.divx" \) | sort -u > ~/.config/videoinfox/videoinfo.findwork
                           echo "$PWD" > ~/.config/videoinfox/videoinfo.lastfinddir  # save last directory that last find was run in 
                           # write last search total file count
                           echo "$searchtotal" > ~/.config/videoinfox/videoinfo.lastsearchtotal
                           # read last search total file count
                           read -r searchtotal < ~/.config/videoinfox/videoinfo.lastsearchtotal    
                           cp ~/.config/videoinfox/videoinfo.findwork ~/.config/videoinfox/videoinfo.findwork3
                           cp ~/.config/videoinfox/videoinfo.lastsearchtotal ~/.config/videoinfox/videoinfo.lastsearchtotal2                 
                           echo
                           echo " Total files found: " "$searchtotal"  # number of files found
                           notify-send  "Videoinfox messsage: Find results in $PWD" "$searchtotal files found using search term: $fterm"
                           sleep 1.5
    fi
    fi              
    fi
    ;;


##################################################################################################################################################
z)  # SETTINGS - <HOME>  #########################################################################################################################
##################################################################################################################################################

function menusettings {
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content


# LOAD STORED DIRECTORIES
read -r dir1 < ~/.config/videoinfox/videoinfo.tv-dir 2> /dev/null
read -r dir2 < ~/.config/videoinfox/videoinfo.movies-dir 2> /dev/null
read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir 2> /dev/null
read -r dir4 < ~/.config/videoinfox/videoinfo.parent-dir 2> /dev/null
read -r dir5 < ~/.config/videoinfox/videoinfo.dir-at-exit 2> /dev/null

clear
echo
echo "Directory:" "$PWD"
echo "Clipboard:" "$pasteclip"
echo "___________________________________________________________________________________________________________________"
echo  
echo " $der >>> SETTINGS                                                  Enter - Update Clipboard Display"
echo "___________________________________________________________________________________________________________________" 
echo
echo " Set Default Directories 1-4                                                                 q - Quit"
echo 
echo "                                                                                             v - Videoinfox Update"
echo " 1 - TV:" "$dir1"
echo "                                                                                             y - Yt-dlp Update"
echo " 2 - Movies:" "$dir2"
echo "                                                                                             l - Last Search"
echo " 3 - Download:" "$dirsaved"
echo "                                                                                             h - Version History"
echo " 4 - Extra:" "$dir4"
echo "                                                                                             c - Code Stats"
echo
echo "                                                                                             x - Clear Clipboard"
echo " Last Exit Dir 5:" "$dir5"
echo
echo
echo -en " Enter Option: "
read -r -n1 optionsettings
}

while true
do
menusettings
case $optionsettings in

    q)  # QUIT
    break;;


    x) #  CLEAR CLIPBOARD  <DOWNLOAD LIST> 
    echo "" | xclip -sel clip  # clearing out the clipboard
    pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
    ;;
 

    c)  # CODE STATS

function codestats {

clear
echo
echo #"Directory:" "$PWD"
echo #"Clipboard:" "$pasteclip"
echo "___________________________________________________________________________________________________________________"
echo  
echo " $der >>> SETTINGS >>> CODE STATS                                                           q - Quit"
echo "___________________________________________________________________________________________________________________" 
echo
echo

a=$(grep -c "^$" /usr/local/bin/videoinfox 2> /dev/null)  # NUMBER OF BLANK LINES
b=$(sed -n -e '/#/p' /usr/local/bin/videoinfox | wc -l 2> /dev/null)  # NUMBER OF COMMENT ONLY LINES
c=$(sed -n '$=' /usr/local/bin/videoinfox 2> /dev/null)  # TOTAL LINES

d=$((c - a - b))  # CODE LINES = TOTAL LINES - BLANK LINES - COMMENT ONLY LINES


# GET VIDEOINFOX FILE SIZE AND LOCATION AND WRITE TO FILE:  ~/.config/videoinfox/videoinfox.code-stats.tmp
du -h /usr/local/bin/videoinfox > ~/.config/videoinfox/videoinfox.code-stats.tmp 2> /dev/null

# READ FILE SIZE
vsize=$(sed 's:/.*::' ~/.config/videoinfox/videoinfox.code-stats.tmp)

# READ FILE LOCATION
vlocat=$(cat ~/.config/videoinfox/videoinfox.code-stats.tmp | cut -c 6-)


printf " Code Lines .......  %s\n" "$d"

echo
printf " Comment Lines ....  %s\n" "$b"

echo
printf " Blank Lines ......  %s\n" "$a"

echo " _________________________"

echo
printf " Total Lines ......  %s\n" "$c"
echo
echo
echo " File Size:" "$vsize"
echo
echo " File Location:" "$vlocat"
#echo " White Spaces ....." $(wc -w < /usr/local/bin/videoinfox 2> /dev/null)  # White Space COUNT
echo
echo
echo -en " Enter Option: "
read -r -n1 optionstats
}


while true
do
codestats
case $optionstats in

    q)  # QUIT
    break;;

*)

esac
done
;;

    
    h)  # VERSION HISTORY
    clear
    less ~/.config/videoinfox/videoinfo-ver-history
    ;;

    l)
    
     function lastsearch {
         read -r lsearch < ~/.config/videoinfox/videoinfo.lastsearch-set
         clear
         echo
         echo "___________________________________________________________________________________________________________________"
         echo
         echo " "$der"  >>> SETTINGS >>> LAST SEARCH                                               Current Setting: "$lsearch" "
         echo "___________________________________________________________________________________________________________________"
         echo
         echo
         echo " If there are search results on the the home screen on exit, the below always applies to the next run."
         echo
         echo
         echo " 1 - Always Save                                                                                          q - Quit"  
         echo
         echo " 2 - Never Save"
         echo
         echo " 3 - Ask on Exit"
         echo
         echo
         echo -en " Enter Option: "
         read -r -n1 optionz
         echo
         }
        
              
         while true
         do
         lastsearch
	    case $optionz in

         q)
         break;;
  
         1)
         
         echo "1" > ~/.config/videoinfox/videoinfo.lastsearch-set
         echo
         echo " Always Save . . ."
         sleep .7
         ;;


         2)
         echo "2" > ~/.config/videoinfox/videoinfo.lastsearch-set
         echo
         echo " Never Save . . . "
         sleep .7
         ;;

        
         3)
         echo "3" > ~/.config/videoinfox/videoinfo.lastsearch-set
         echo
         echo " Ask on Exit . . ."
         sleep .7
         ;;

         *)

         esac
         done

         ;;


    1)
    # SET TV DIRECTORY
    grabdir="$PWD"  # grab working directory 
    pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
    clear
    echo
    echo "Working Directory: ""$PWD"  # <pwd>  print current working directory to the screen 
    echo "Clipboard: ""$pasteclip"
    echo "___________________________________________________________________________________________________________________"
    echo
    echo " $ver >>> SET TV DIRECTORY"
    echo "___________________________________________________________________________________________________________________"
    echo
    echo " No quotations needed for paths with spaces. Case sensative."
    echo
    read -r -p " Enter Directory: " specifydir2  # waiting fot user input - the directory you want to chang to 
	
	     if [ -z "$specifydir2" ]  # if no input was entered goto  <then> 
            then
                echo
                echo " error: Nothing was entered"
            else
                if [ -d "$specifydir2" ]  #  if directoty exists goto  <then>
                  then
                      echo
                      echo "$specifydir2" > ~/.config/videoinfox/videoinfo.tv-dir
                      read -r dir1 < ~/.config/videoinfox/videoinfo.tv-dir
                      echo " TV Directory Set to:" "$dir1"                  
                      else
                      echo
                      echo " error: Directory doesn't exist"                    
                fi
          fi       
          
          #read -p "     Press enter to Continue" 
          cd "$grabdir"  # restore working directory
          sleep 1.5
          ;;


    2)
    # SET MOVIES DIRECTORY
    grabdir="$PWD"  # grab working directory 
    pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content 
    clear
    echo
    echo "Working Directory: ""$PWD"  # <pwd>  print current working directory to the screen 
    echo "Clipboard: ""$pasteclip"
    echo "___________________________________________________________________________________________________________________"
    echo 
    echo " ""$ver"" >>> SET MOVIE DIRECTORY"
    echo "___________________________________________________________________________________________________________________"
    echo
    echo " No quotations needed for paths with spaces. Case sensative."
    echo
    read -r -p " Enter Directory: " specifydir2  # waiting fot user input - the directory you want to chang to 
	
	     if [ -z "$specifydir2" ]  # if no input was entered goto  <then> 
            then
                echo
                echo " error: Nothing was entered"
            else
                if [ -d "$specifydir2" ]  #  if directoty exists goto  <then>
                  then
                      echo
                      echo "$specifydir2" > ~/.config/videoinfox/videoinfo.movies-dir
                      read -r dir2 < ~/.config/videoinfox/videoinfo.movies-dir
                      echo " Movie Directory Set to:" "$dir2"                  
                      else
                      echo
                      echo " error: Directory doesn't exist"                    
                fi
          fi       
          
          #read -p "     Press enter to Continue" 
          cd "$grabdir"  # restore working directory
          sleep 1.5
          ;;
           

    3)
    # SET <yt-dlp> DOWNLOAD DIRECTORY
    grabdir="$PWD"  # grab working directory 
    pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
    clear
    echo
    echo "Working Directory: ""$PWD"  # <pwd>  print current working directory to the screen 
    echo "Clipboard: ""$pasteclip"
    echo "___________________________________________________________________________________________________________________"
    echo
    echo " $ver >>> SET YT-DLP DOWNLOAD DIRECTORY"
    echo "___________________________________________________________________________________________________________________"
    echo
    echo " No quotations needed for paths with spaces. Case sensative."
    echo
    read -r -p " Enter Directory: " specifydir2  # waiting fot user input - the directory you want to chang to 
	
	     if [ -z "$specifydir2" ]  # if no input was entered goto  <then> 
            then
                echo
                echo " error: Nothing was entered"
            else
                if [ -d "$specifydir2" ]  #  if directoty exists goto  <then>
                  then
                      echo
                      echo "$specifydir2" > ~/.config/videoinfox/videoinfo.yt-download-dir
                      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir
                      echo " Download Directory Set to:" "$dirsaved"                  
                      else
                      echo
                      echo " error: Directory doesn't exist"                   
                fi
          fi       
          
          #read -p "     Press enter to Continue" 
          cd "$grabdir"  # restore working directory
          sleep 1.5
          ;;


 4)
    # SET PARENT DIRECTORY
    grabdir="$PWD"  # grab working directory 
    pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
    clear
    echo
    echo "Working Directory: ""$PWD"  # <pwd>  print current working directory to the screen 
    echo "Clipboard: ""$pasteclip"
    echo "___________________________________________________________________________________________________________________"
    echo
    echo " $ver >>> SET EXTRA DIRECTORY"
    echo "___________________________________________________________________________________________________________________"
    echo
    echo " No quotations needed for paths with spaces. Case sensative."
    echo
    read -r -p " Enter Directory: " specifydir2  # waiting fot user input - the directory you want to chang to 
	
	     if [ -z "$specifydir2" ]  # if no input was entered goto  <then> 
            then
                echo
                echo " error: Nothing was entered"
            else
                if [ -d "$specifydir2" ]  #  if directoty exists goto  <then>
                  then
                      echo
                      echo "$specifydir2" > ~/.config/videoinfox/videoinfo.parent-dir
                      read -r dir4 < ~/.config/videoinfox/videoinfo.parent-dir
                      echo " Extra Directory Set to:" "$dir4"                  
                      else
                      echo
                      echo " error: Directory doesn't exist"                    
                fi
          fi       
          
          #read -p "     Press enter to Continue" 
          cd "$grabdir"  # restore working directory
          sleep 1.5
          ;;


#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
    
    v)  # CHECK FOR VIDEOINFOX UPDATE
    function menuinfox {

    dirtemp="$PWD"  # save dir for restore
    cd ~/.config/videoinfox/tmp

    timeout 30 wget https://raw.githubusercontent.com/powerhousepro69/videoinfox/main/videoinfox 2>/dev/null
    chmod +x ~/.config/videoinfox/tmp/videoinfox 2>/dev/null


    if [ -f ~/.config/videoinfox/tmp/videoinfox ]  # if file exists goto then
       then
            gver=$(~/.config/videoinfox/tmp/videoinfox -v)

       else
            gver="Download Failure"
    fi
  

    clear     
    clear 
    echo
    echo
    echo
    echo "___________________________________________________________________________________________________________________"
    echo
    echo " ""$der"" >>> CHECK VIDEOINFOX UPDATE"
    echo "___________________________________________________________________________________________________________________"
    echo
    echo " videoinfox Home: https://github.com/powerhousepro69/videoinfox"
    echo 
    echo " Downloaded From: https://raw.githubusercontent.com/powerhousepro69/videoinfox/main/videoinfox"
    echo
    echo
    echo " Version Check Complete"
    echo
    echo " Downloaded: ""$gver"
    echo
    echo " Installed: " "$ver" 
    echo
    echo
    echo " u - Update     d - Don't Update"  
    echo
    echo -en " Enter Option: "
    read -r -n1 optioninfox
    echo
    }
        
              
         while true
         do
         menuinfox
	   case $optioninfox in


         d)
         #  QUIT
         cd "$dirtemp" # restore directory
         rm ~/.config/videoinfox/tmp/* 2> /dev/null
         echo
         echo " Not Updated . . ."
         sleep .6
         break;;
      
         u)
         # UPDATE VIDEOINFOX
     
         if [ -f ~/.config/videoinfox/tmp/videoinfox ]  # if file exists goto then
            then
                 echo
                 sudo mv ~/.config/videoinfox/tmp/videoinfox /usr/local/bin/videoinfox 2> /dev/null
                 rm ~/.config/videoinfox/tmp/* 2> /dev/null
                 echo
                 echo " Downnloaded videoinfox copied to: /usr/local/bin"
                 echo   
    
                 sec=3
                 while [ $sec -ge 0 ]; do  #  This pauses the execution.  It displays and counts down the seconds set in <$sec>
                      echo -ne " UPDATED . . . $sec\033[0K\r"
                      let " sec=sec-1"
                      sleep 1
                 done         


                 clear
                 echo -e "\n"
                 echo
                 echo "___________________________________________________________________________________________________________________"  
                 echo
                 echo " $der >>> EXIT"
                 echo "___________________________________________________________________________________________________________________" 
                 echo
                 echo
                 echo " Videoinfox Updated . . ."
                 sleep 1.5
       
  
                 clear
                 echo -e "\n"
                 echo
                 echo "___________________________________________________________________________________________________________________"
                 echo  
                 echo " $der >>> EXIT >>> Updated to: "$gver"                    Restart to use updated version."
                 echo "___________________________________________________________________________________________________________________" 
                 echo -e "\n"
                
                 cd "$dirtemp"  # restore directory
                 exit
                
            else 
                 :

         fi

      
         cd "$dirtemp"  # restore directory
         ;;

          
         esac
         done
         ;;


#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
        
         y)  # CHECK FOR YT-DLP UPDATE

dirtemp="$PWD"  # save dir for restore after yt-dlp download      

# Yt-dlp download attempt.
clear
echo
echo 
echo 
echo "___________________________________________________________________________________________________________________"
echo  
echo " $der >>> Attempting to download the most recent version of Yt-dlp"
echo "___________________________________________________________________________________________________________________" 
echo
echo " If Yt-dlp can't be downloaded, the download attempt will be aborted."
echo
echo " If the download fails, it is most likely due to at least 1 of the following reasons:"
echo
echo "    - Your internet connection is down."
echo
echo "    - Github isn't reachable due to technical issues on their end."
echo
echo "    - There is no Yt-dlp release available in:  https://github.com/yt-dlp/yt-dlp/releases/latest/download"
echo
echo
echo " If this download fails, the download attempt will be tried again when you select the Yt-dlp Menu in Videoinfox."
echo
echo
echo " Note: The Yt-dlp Menu will not work until there is a copy of yt-dlp in:"
echo
echo " "$HOME"/.config/videoinfox"
echo
echo

cd ~/.config/videoinfox/tmp
 
timeout 30 wget https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp 2>/dev/null  # download yt-dlp 
 

if [ -f ~/.config/videoinfox/tmp/yt-dlp ]  # if yt-dlp exists goto then
   then
        chmod a+rx ~/.config/videoinfox/tmp/yt-dlp  # set <yt-dlp-fetched> execute bit  


        sec=5
             
         while [ $sec -ge 0 ]; do  #  This pauses the execution.  It displays and counts down the seconds set in <$sec>
              echo -ne " Yt-dlp Downloaded . . . $sec\033[0K\r"
              let " sec=sec-1"
              sleep 1
         done

    
   
function chkytdlp {

        

         if [ -f ~/.config/videoinfox/tmp/yt-dlp ]
            then
                 ytexist=$(~/.config/videoinfox/yt-dlp --version)
            else
                 ytexist="Not installed"
         fi

         clear 
         echo
         echo
         echo
         echo "___________________________________________________________________________________________________________________"
         echo
         echo " ""$der"" >>> CHECK YT-DLP UPDATE"
         echo "___________________________________________________________________________________________________________________"
         echo
         echo " Yt-dlp Home: https://github.com/yt-dlp/yt-dlp"
         echo
         echo " Downloaded From: https://github.com/yt-dlp/yt-dlp/releases/latest/download"
         echo
         echo
         echo " Version Check Complete"
         echo
         echo " Downloaded:" $(~/.config/videoinfox/tmp/yt-dlp --version)
         echo
         echo " Installed: " "$ytexist"
         echo
         echo
         echo " u - Update     d - Don't Update"  
         echo
         echo -en " Enter Option: "
         read -r -n1 optionytdlp
         echo         
}        
              
         while true
         do
         chkytdlp
	   case $optionytdlp in


         d)
         #  DON'T UPDATE
         rm ~/.config/videoinfox/tmp/* 2>/dev/null
         cd "$dirtemp"  # restore directory
         echo
         echo " Yt-dlp Not Updated . . ."
         sleep .7
         break;;
      
         u)
         # UPDATE
         rm ~/.config/videoinfox/yt-dlp 2> /dev/null
         mv ~/.config/videoinfox/tmp/yt-dlp ~/.config/videoinfox 2> /dev/null       
         ~/.config/videoinfox/yt-dlp --version > ~/.config/videoinfox/videoinfo.yt-dlp.version
         rm ~/.config/videoinfox/tmp/* 2>/dev/null
         cd "$dirtemp"  # restore directory
         echo
                 
         sec=3
              while [ $sec -ge 0 ]; do  #  This pauses the execution.  It displays and counts down the seconds set in <$sec>
              echo -ne " Yt-dlp UPDATED . . . $sec\033[0K\r"
              let " sec=sec-1"
              sleep 1
              done         
              break;;
   
         esac
         done


   else
         rm ~/.config/videoinfox/tmp/* 2>/dev/null     
         cd "$dirtemp"  # restore directory
         sec=20           
         while [ $sec -ge 0 ]; do  #  This pauses the execution.  It displays and counts down the seconds set in <$sec>                       
              echo -ne " Yt-dlp Download Failure . . . $sec\033[0K\r"
              let "sec=sec-1"
              sleep 1
         done     
fi
;;         
          

esac
done

rm ~/.config/videoinfox/tmp/* 2>/dev/null
;;

   

##################################################################################################################################################
###########################  HOME OPTION  y  Yt-dlp Menu  ########################################################################################
##################################################################################################################################################

y)       

grabdir="$PWD"  # grab working directory
pasteclip3=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content to restore to before this function was run


if ! command -v ~/.config/videoinfox/yt-dlp &> /dev/null  # if <yt-dlp> isnt found goto then

then

# Yt-dlp download attempt.  Yt-dlp Menu won't start untl Yt-dlp is downloaded to: ~/.config/videoinfox/yt-dlp
clear
echo
echo 
echo 
echo "___________________________________________________________________________________________________________________"
echo  
echo " $der >>> Attempting to download the most recent version of Yt-dlp"
echo "___________________________________________________________________________________________________________________" 
echo
echo " If Yt-dlp can't be downloaded, the download attempt will be aborted."
echo
echo " If the download fails, it is most likely due to at least 1 of the following reasons:"
echo
echo "    - Your internet connection is down."
echo
echo "    - Github isn't reachable due to technical issues on their end."
echo
echo "    - There is no Yt-dlp release available in:  https://github.com/yt-dlp/yt-dlp/releases/latest/download"
echo
echo
echo " If this download fails, the download attempt will be tried again when you select the Yt-dlp Menu in Videoinfox."
echo
echo
echo " Note: The Yt-dlp Menu will not work until there is a copy of yt-dlp in:"
echo
echo " "$HOME"/.config/videoinfox"
echo
echo

dirtemp="$PWD"  # save dir for restore after ty-dlp download
cd ~/.config/videoinfox

timeout 30 wget https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp 2>/dev/null  # download yt-dlp 
 
if [ -f ~/.config/videoinfox/yt-dlp ]  # if yt-dlp exists goto then
   then
        chmod a+rx ~/.config/videoinfox/yt-dlp  # set <yt-dlp-fetched> execute bit
        ~/.config/videoinfox/yt-dlp --version > ~/.config/videoinfox/videoinfo.yt-dlp.version # write yt-dlp ver number to file: yt-dlp.version 
        

        echo
        echo " Yt-dlp Downloaded . . ."
        echo
        # SAMPLE VIDEO URL BEING COPIED TO CLIPBOARD
        echo "https://www.youtube.com/watch?v=rNWPqfCJDnc" | xclip -sel clip 

        sec=5           
        while [ $sec -ge 0 ]; do  #  This pauses the execution.  It displays and counts down the seconds set in <$sec>                       
             echo -ne " $ver starting in: $sec\033[0K\r"
             let "sec=sec-1"
             sleep 1
        done

        cd "$dirtemp"  # restore directory
        rm ~/.config/videoinfox/wget-* 2> /dev/null  


   else
       
        echo
        echo " Yt-dlp Download Failure . . ."
        echo

        sec=20           
        while [ $sec -ge 0 ]; do  #  This pauses the execution.  It displays and counts down the seconds set in <$sec>                       
             echo -ne " $ver starting in: $sec\033[0K\r"
             let "sec=sec-1"
             sleep 1
        done     

        cd "$dirtemp"  # restore directory
        rm ~/.config/videoinfox/wget-* 2> /dev/null
fi


############################

else  # IF YT-DLP IS FOUND    >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

###########################

read -r ytdlpver < ~/.config/videoinfox/videoinfo.yt-dlp.version


function menuy {

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

grabclip=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

if [ "$grabclip" = "http" ]  # if the first 4 characters = <http> go then
  then
      :

  else      
      if [ -f "$pasteclip" ]
        then
            :
        else
            echo "$pastetemp" | xclip -sel clip  # clearing out the clipboaed
            pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      fi
fi


read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir
#######################  cd "$dirsaved" 

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

clear
echo
echo "Directory: ""$PWD"
echo "Clipboard:" "$pasteclip"


##################################################################################################################################################
#=================================================================================================================================================
#                           @CHECK TO SEE IF THE CLIPBOARD CONTENTS CONTAIN A URL OR A FILE AND ACT UPON THAT DISPLAY
#=================================================================================================================================================
##################################################################################################################################################

# the 2 lines of below code are creating two new variables for the following loop.
# 1st variable <$grabpaste>   <cut> is used to cut all characters after the 4th character from the variable. Only 4 chatacters are needed to look for <http>
# 2nd variable <$grabpaste2>  <cut> is used to cut all characters after the 1st character from the variable. Only 1 character is needed to look for </>  

# for main if loop - to look for <http>
grabpaste=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

# for nested if loop - to look for </>
grabpaste2=$(echo "$pasteclip" | cut -c-1)  # cut everything after the 1st character

# the following code checks to see if the clipbooard has a url in it by lookin for <http> from <$grabpaste>  
# If it is <http>, YT-DLP will get the clipboard. yt-dlp will check if its a valid link by trying to extract the name of the video file.
# If it isn't <http>  the ytdlp loop will be skipped

if [ "$grabpaste" = "http" ]  # if the first 4 characters = <http> go then
  then
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir 2> /dev/null  # reding default download directory
      ytdlpconfirm=$(~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" 2> /dev/null)

            if [ "$ytdlpconfirm" = "" ]  
                  then

                      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
                      dash0=$(echo "-") # not blinking

                           # Videoinfox v2.00________________________________________ Videoinfox v2.00_________________________________________
                           #________________x________________________________________ _________________________________________________________
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " ""$der"" >>> YT-DLP MENU         Enter - Update Clipboard Display         yt-dlp Version: $ytdlpver"
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " d "$dash0" Download Default     l - Last Download     v - View Downloads     p - Play Clipboard                 q - Quit"
                      echo " c "$dash0" Download Choose"
                      echo " s "$dash0" Self Destruct        g - Download List"
                      echo
                  
                      echo "" | xclip -sel clip  # clearing out the clipboard
                      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content


                  else 
                      
                      dash1=$(echo -e "\033[5m-\033m\033[0m\033[5m\033[5m\033[0m")
                      
                      echo
                      echo "YT-DLP Confirmed: "$ytdlpconfirm""
                      echo
                      echo "Download Directory: $dirsaved"  # dislpay default download directory
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " ""$der"" >>> YT-DLP MENU         Enter - Update Clipboard Display         yt-dlp Version: $ytdlpver"
                      echo "___________________________________________________________________________________________________________________"
                      echo

echo -e " d "$dash1" Download Default     l - Last Download     v - View Downloads     p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m          q - Quit "

                      echo " c "$dash1" Download Choose"
                      echo " s "$dash1" Self Destruct        g - Download List"
                      echo                                                                                  
            fi
  else

      if [ -f "$pasteclip" ]  # Valid file in the clipboard
        then
            echo      
            echo "Valid file in clipboard"
            echo "___________________________________________________________________________________________________________________"
            echo
            echo " ""$der"" >>> YT-DLP MENU         Enter - Update Clipboard Display         yt-dlp Version: $ytdlpver"
            echo "___________________________________________________________________________________________________________________"
            echo

echo -e " d - Download Default     l - Last Download     v - View Downloads     p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m                 q - Quit "
                                                      
            echo " c - Download Choose"
            echo " s - Self Destruct        g - Download List"
            echo                                                             

        else 

            echo "" | xclip -sel clip  # clearing out the clipboard
            pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

            echo "___________________________________________________________________________________________________________________"
            echo
            echo " ""$der"" >>> YT-DLP MENU         Enter - Update Clipboard Display         yt-dlp Version: $ytdlpver"        
            echo "___________________________________________________________________________________________________________________"
            echo
            echo " d - Download Default     l - Last Download     v - View Downloads     p - Play Clipboard                 q - Quit"
            echo " c - Download Choose"
            echo " s - Self Destruct        g - Download List"
            echo
fi
fi

echo -en " Enter Option: "                             
read -r -n1 optiony

}


     while true
     do
     menuy
	case $optiony in


     q)  # QUIT
     clear
     break;;


     g)  # DOWNLOAD LIST  <YT-DLP MENU>

rm ~/.config/videoinfox/videoinfox-dl-Default~ 2> /dev/null  # tmp fix

echo "" | xclip -sel clip  # clearing out the clipboard
pasteclip=$(xclip -o -selection clipboard 2> /dev/null) # grab clipboard content


function dwnlist {

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

if [ -f "$pasteclip" ]
then
:
else
echo "" | xclip -sel clip  # clearing out the clipboard
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
fi
 
# find default download list and write to file.
find ~/.config/videoinfox/videoinfox-dl-Default > ~/.config/videoinfox/videoinfox.dowload.list.default

# find user created download lists and write to file. these results also include the log files which shouldn't be listed here
find "$PWD" -type f \( -iname "videoinfox-dl*" \) > ~/.config/videoinfox/videoinfox.dowload.list

# removing all lines that contain  .log   this removes all  */.videoinfox-dl*.log listings from results. write file: videoinfox.dowload.list  
sed -i '/.log/d' ~/.config/videoinfox/videoinfox.dowload.list 
sed -i '/videoinfox-dl-Default/d' ~/.config/videoinfox/videoinfox.dowload.list  # remove default list from user list and write file

# count lines file for message display below:  (Copy 1 above User List to the the clipboard to: Download or Set...) 
copymessage=$(sed -n '$=' ~/.config/videoinfox/videoinfox.dowload.list 2> /dev/null)  # only reading, no writing


##################################################################################
##########  START   1 2 3 4 5 - DEFAULT DIRS   DISPLAY ROUTINE  ##################
################################################################################## 

# DIRECTORY SELECTED IS NORMAL TEXT AND THE OTHER 4 ARE LESS BOLD. 

# DEFAULT DIR NUMBER 1 FORMAT
dirdisplay1=$(echo -e "1\033[2m 2 3 4 5\033[0m")
# DEFAULT DIR NUMBER 2 FORMAT
dirdisplay2=$(echo -e "\033[2m1 \033[0m2 \033[2m3 4 5\033[0m") 
# DEFAULT DIR NUMBER 3 FORMAT
dirdisplay3=$(echo -e "\033[2m1 2 \033[0m3 \033[2m4 5\033[0m")
# DEFAULT DIR NUMBER 4 FORMAT
dirdisplay4=$(echo -e "\033[2m1 2 3 \033[0m4 \033[2m5\033[0m")
# DEFAULT DIR NUMBER 5 FORMAT
dirdisplay5=$(echo -e "\033[2m1 2 3 4 \033[0m5\033[0m")
# NO MATCH ALL LESS BOLD
dirdisplayno=$(echo -e "\033[2m1 2 3 4 5\033[0m")


# FORMAT PWD NAME FOR COMPARISON
echo "$PWD" > ~/.config/videoinfox/videoinfox.pwd.tmp  # write PWD to a tmp file: videoinfox.pwd.tmp
cat ~/.config/videoinfox/videoinfox.pwd.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.pwd  # remove all froward slashes / write file: videoinfox.pwd
rm  ~/.config/videoinfox/videoinfox.pwd.tmp  # remove tmp file: videoinfox.pwd.tmp
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.pwd  # remove horizontal whitespace write file: videoinfox.pwd

# FORMAT DEFAULT DIR 1 NAME FOR COMPARISON
echo "$dir1" > ~/.config/videoinfox/videoinfox.dir1.tmp  # write dir 1 to a tmp file: videoinfox.dir1.tmp
cat ~/.config/videoinfox/videoinfox.dir1.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir1  # remove all froward slashes / write file: videoinfox.dir1
rm ~/.config/videoinfox/videoinfox.dir1.tmp  # remove tmp file: videoinfox.dir1.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir1  # remove horizontal whitespace write file: videoinfox.dir1

# FORMAT DEFAULT DIR 2 NAME FOR COMPARISON
echo "$dir2" > ~/.config/videoinfox/videoinfox.dir2.tmp  # write dir 2 to a tmp file: videoinfox.dir2.tmp
cat ~/.config/videoinfox/videoinfox.dir2.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir2  # remove all froward slashes / write file: videoinfox.dir2
rm ~/.config/videoinfox/videoinfox.dir2.tmp   # remove tmp file: videoinfox.dir2.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir2 # remove horizontal whitespace write file: videoinfox.dir2

# FORMAT DEFAULT DIR 3 NAME FOR COMPARISON
echo "$dirsaved" > ~/.config/videoinfox/videoinfox.dir3.tmp  # write dir 3 to a tmp file: videoinfox.dir3.tmp
cat ~/.config/videoinfox/videoinfox.dir3.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir3  # remove all froward slashes / write file: videoinfox.dir3
rm ~/.config/videoinfox/videoinfox.dir3.tmp   # remove tmp file: videoinfox.dir3.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir3 # remove horizontal whitespace write file: videoinfox.dir3

# FORMAT DEFAULT DIR 4 NAME FOR COMPARISON
echo "$dir4" > ~/.config/videoinfox/videoinfox.dir4.tmp  # write dir 4 to a tmp file: videoinfox.dir4.tmp
cat ~/.config/videoinfox/videoinfox.dir4.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir4  # remove all froward slashes / write file: videoinfox.dir4
rm ~/.config/videoinfox/videoinfox.dir4.tmp   # remove tmp file: videoinfox.dir4.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir4 # remove horizontal whitespace write file: videoinfox.dir4

# FORMAT DEFAULT DIR 5 NAME FOR COMPARISON
echo "$dir5" > ~/.config/videoinfox/videoinfox.dir5.tmp  # write dir 5 to a tmp file: videoinfox.dir5.tmp
cat ~/.config/videoinfox/videoinfox.dir5.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir5  # remove all froward slashes / write file: videoinfox.dir5
rm ~/.config/videoinfox/videoinfox.dir5.tmp   # remove tmp file: videoinfox.dir5.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir5 # remove horizontal whitespace write file: videoinfox.dir5


# LOAD EDITED PWD AND DEFAULT DIRECTORY NAMES FOR BELOW  IF LOOPS   (all frorward slashes / and white spaces removed from the below directory names)

read -r controldir < ~/.config/videoinfox/videoinfox.pwd    # load reformatted current directory name 
read -r dir1display < ~/.config/videoinfox/videoinfox.dir1  # load reformatted default directory 1 name
read -r dir2display < ~/.config/videoinfox/videoinfox.dir2  # load reformatted default directory 2 name
read -r dir3display < ~/.config/videoinfox/videoinfox.dir3  # load reformatted default directory 3 name
read -r dir4display < ~/.config/videoinfox/videoinfox.dir4  # load reformatted default directory 4 name
read -r dir5display < ~/.config/videoinfox/videoinfox.dir5  # load reformatted default directory 5 name


# DEFAULT DIR 5  DISPLAY     IF DIRECTORY ON EXIT  =  DEFAULT DIRECTORIES 1-4 then Display that directory number.

if [[ "$controldir" = "$dir5display" ]]
  then 

      if [[ "$dir5display" = "$dir1display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 1 then display 1 and not 5
        then
             dirdisp="$dirdisplay1"
      fi

      if [[ "$dir5display" = "$dir2display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 2 then display 2 and not 5
        then
             dirdisp="$dirdisplay2"
      fi

      if [[ "$dir5display" = "$dir3display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 3 then display 3 and not 5
        then
             dirdisp="$dirdisplay3"
      fi

      if [[ "$dir5display" = "$dir4display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 4 then display 4 and not 5
        then
             dirdisp="$dirdisplay4"
      fi
fi



# DEFAULT DIR 5 DISPLAY
if [[ "$controldir" = "$dir5display" ]] 
  then
       dirdisp="$dirdisplay5"  # if directory is changed to  Default Dir 5 :  The number 5 is normal text and the other 4 are less bold.
        
  else
       dirdisp="$dirdisplayno" # if directory doesn't match  Default Dirs 1-5 : All 5 numbers are less bold.  
fi 



# DEFAULT DIR 1  DISPLAY
if [[ "$controldir" = "$dir1display" ]]  # IF PWD = DEFAULT DIR 1 then display 1
  then 
       dirdisp="$dirdisplay1"
fi

# DEFAULT DIR 2  DISPLAY
if [[ "$controldir" = "$dir2display" ]]  # IF PWD = DEFAULT DIR 2 then display 2
  then 
       dirdisp="$dirdisplay2"
fi

# DEFAULT DIR 3  DISPLAY
if [[ "$controldir" = "$dir3display" ]]  # IF PWD = DEFAULT DIR 3 then display 3
  then 
       dirdisp="$dirdisplay3"
fi

# DEFAULT DIR 4  DISPLAY
if [[ "$controldir" = "$dir4display" ]]  # IF PWD = DEFAULT DIR 4 then display 4
  then 
       dirdisp="$dirdisplay4"  # if directory is changed to  Default Dir 4 :  The number 4 is normal text and the other 4 are less bold.
fi

################################################################################
##########  END   1 2 3 4 5 - DEFAULT DIRS   DISPLAY ROUTINE  ##################
################################################################################
########## blinking routine for display ##########

# blinking
downloadlist1=$(echo -e "\033[5mDOWNLOAD LIST\033m\033[0m\033[5m\033[5m\033[0m")

# not blinking
downloadlist0=$(echo "DOWNLOAD LIST")

# blinking
dash1=$(echo -e "\033[5m-\033m\033[0m\033[5m\033[5m\033[0m")

# not blinking
dash0=$(echo "-")

# if file exists goto then
if [ -f "$pasteclip" ]
  then
      finalresult="$downloadlist1"  # if the file exists: blinking   DOWNLOAD LIST
      finalresult2="$dash1"  #                            blinking   -
  else
      finalresult="$downloadlist0"  # if the file doesn't exist: non blinking   DOWNLOAD LIST
      finalresult2="$dash0"  # if                                non blinking   -
fi

########## end blinking routine #################


#########################################################################################################################################################
# START Routine to find out if clipboard contents  =  The default download list or a user list - dash blink or not:  Set User List and Delete User List
#########################################################################################################################################################

# REFORMAT PASTECLIP VARIBLE FOR COMPARISON TO CONTROL VARIBLE
echo "$pasteclip" > ~/.config/videoinfox/videoinfox.c.tmp  # write clipboard contents to to file
cat ~/.config/videoinfox/videoinfox.c.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.c.tmp2  # remove all froward slashes / and write file
rm ~/.config/videoinfox/videoinfox.c.tmp   # remove .c.tmp file
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.c.tmp2 # remove horizontal whitespace from file an write
# REFORMATTED PASTECLIP
read -r ctmp2 < ~/.config/videoinfox/videoinfox.c.tmp2  # clipboard content with default list or user list.
                                                        # list name with full path: with slashes and spaces removed
# CONTROL VARIABLE
ctmpprefformat=""$HOME"/.config/videoinfox/videoinfox-dl-Default"
# REFORMAT CONTROL VARIABLE FOR COMPARISON TO PASTECLIP VARIBLE
echo "$ctmpprefformat" > ~/.config/videoinfox/videoinfox.dlname.tmp  # write clipboard contents to to file
cat ~/.config/videoinfox/videoinfox.dlname.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dlname.tmp2  # remove all froward slashes / and write file
rm ~/.config/videoinfox/videoinfox.dlname.tmp   # remove .dlname.tmp file
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dlname.tmp2  # remove horizontal whitespace from file an write
# REFORMATTED CONTROL VARIABLE
read -r ctmp3 < ~/.config/videoinfox/videoinfox.dlname.tmp2  # default list name with full path: with slashes and spaces removed


if [ -z "$pasteclip" ]  # if clipboard is empty goto then
   then
        dashit2="$dash0"  # no blink dash for: Set User List and Delete User List

   else
   
        if [[ "$ctmp2" = "$ctmp3" ]]  # if clipbaord  = Default List goto then because the default list can't: Set User List or Delete User List
           then
                dashit2="$dash0"  # no blink dash for: Set User List and Delete User List

           else
                dashit2="$dash1"  #    blink dash for: Set User List and Delete User List
        fi
fi


# CONTROL VARIABLE 2  (clear Set User List filename)
read -r chkulistset < ~/.config/videoinfox/videoinfox.set-user-list
# REFORMAT CONTROL VARIABLE 2 FOR COMPARISON TO PASTECLIP VARIBLE
echo "$chkulistset" > ~/.config/videoinfox/videoinfox.chkulist.tmp  # write clipboard contents to to file
cat ~/.config/videoinfox/videoinfox.chkulist.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.chkulist.tmp2  # remove all froward slashes / and write file
rm ~/.config/videoinfox/videoinfox.chkulist.tmp   # remove .dlname.tmp file
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.chkulist.tmp2  # remove horizontal whitespace from file an write
# REFORMATTED CONTROL VARIABLE 2
read -r ctmp4 < ~/.config/videoinfox/videoinfox.chkulist.tmp2  # default list name with full path: with slashes and spaces removed


#  REMOVE TMP2 FILES
rm ~/.config/videoinfox/videoinfox.c.tmp2
rm ~/.config/videoinfox/videoinfox.dlname.tmp2 

#########################################################################################################################################################
# END Routine to find out if clipboard contents  =  The default download list or a user list - dash blink or not:  Set User List and Delete User List
#########################################################################################################################################################

clear
cat ~/.config/videoinfox/videoinfox.dowload.list  # display user created download lists recursively reachable fron current directory.
echo
cat ~/.config/videoinfox/videoinfox.dowload.list.default  # display default download list name with full path

#if [ -z "$copymessage" ]  # if the count is null, then the below message won't display 
#  then  # empty user list  (no user lists recursively reachable from the curent directory)
#       :

#  else  # at least 1 list  (1 or more user lists recursively reachable from the curent directory)        
      # echo
      # echo "Copy 1 above List to the the clipboard."
#fi

read -r ulistset < ~/.config/videoinfox/videoinfox.set-user-list  # set user list for videoinfox -u shortcut
echo


# CEAR USER SET LIST IF IT GETS DELETED OUTSIDE OF THE VIDEOINFOX INTERFACE
if [ -f "$chkulistset" ]  # if the user set list exists goto then
   then
       :
   else  # if the user set list doesn't exist, clear the user set list.
       echo > ~/.config/videoinfox/videoinfox.set-user-list
       ctmp4=""
fi



if [ -z "$ctmp4" ]  # if the set user list = null goto then
    then
         :  # don't display anything

    else
         echo "User Set List:" "$ulistset"  # display if there is at least one line
         echo 
fi
    


echo "Copy 1 above List to the the clipboard."
echo



echo "Directory:" "$PWD"
echo "Clipboard:" "$pasteclip"          #
echo "___________________________________________________________________________________________________________________"
echo  
echo " ""$der"" >>> DOWNLOAD LIST       Enter - Update Clipboard Display              "$dirdisp" - Default Dirs"
echo "___________________________________________________________________________________________________________________" 
echo
echo " d "$finalresult2" Download List     s "$dashit2" Set User List        k - Default List       n - Create Directory               q - Quit"
echo " v "$finalresult2" View List         c - Create User List     a "$dashit2" Add to Queue       x - Clear Clipboard"    
echo " l - View Logs         r "$dashit2" Delete User List     b - Download Queue                                        h - Help"
echo 
echo -en " Enter Option: "
read -r -n1 optiond
echo

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

if [ -z "$pasteclip" ]
   then
       echo
       echo " Clipboard is empty . . ."
       sleep .18
     
   else
       :
fi


}

while true
do
dwnlist
case $optiond in

# LOAD STORED DIRECTORIES
#read -r dir1 < ~/.config/videoinfox/videoinfo.tv-dir 2> /dev/null
#read -r dir2 < ~/.config/videoinfox/videoinfo.movies-dir 2> /dev/null
#read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir 2> /dev/null
#read -r dir4 < ~/.config/videoinfox/videoinfo.parent-dir 2> /dev/null
#read -r dir5 < ~/.config/videoinfox/videoinfo.dir-at-exit 2> /dev/null

1)
cd "$dir1"
;;


2)
cd "$dir2"
;;


3)
cd "$dirsaved"
;;

4)
cd "$dir4"
;;


5)
cd "$dir5"
;;


         
q)  # QUIT (DOWNLOAD LIST)
echo "$pasteclip3" | xclip -sel clip  # restore clipboard
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
break;;


x)  # CLEAR CLIPBOARD  (DOWNLOAD LIST)
echo "" | xclip -sel clip  # clearing out the clipboard
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
;;


n)
##################################################################################################################################################
###########################   CREATE DIRECTORY  n   (DOWNLOAD LIST)   ############################################################################
##################################################################################################################################################

pasteclip2=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content   save to restore on option quit
echo "" | xclip -sel clip  # clearing the clipboard


function navtree {

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

if [ -d "$pasteclip" ]  # if the directory exists gto then
  then
      :

  else      
      echo "$pastetemp" | xclip -sel clip  # clearing out the clipboaed
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
     
fi


clear

# recursive list of directories for the user to copy one to the clipboard and press  c   to change to that directory
find "$PWD" -type d -iname "*" | sort -u 2>/dev/null

# recursive number of directories found
ttotal=$(find  "$PWD" -type d -iname "*" 2>/dev/null | wc -l)   

notify-send "Videoinfox is done processing: Directory Tree" "Total Directories Found: "$ttotal" " # GUI Notification.

# recursive number of files found
#ttotalnum=$(find "$PWD" -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) 2>/dev/null | wc -l)


##################################################################################
##########  START   1 2 3 4 5 - DEFAULT DIRS   DISPLAY ROUTINE  ##################
################################################################################## 

# DIRECTORY SELECTED IS NORMAL TEXT AND THE OTHER 4 ARE LESS BOLD. 

# DEFAULT DIR NUMBER 1 FORMAT
dirdisplay1=$(echo -e "1\033[2m 2 3 4 5\033[0m")
# DEFAULT DIR NUMBER 2 FORMAT
dirdisplay2=$(echo -e "\033[2m1 \033[0m2 \033[2m3 4 5\033[0m") 
# DEFAULT DIR NUMBER 3 FORMAT
dirdisplay3=$(echo -e "\033[2m1 2 \033[0m3 \033[2m4 5\033[0m")
# DEFAULT DIR NUMBER 4 FORMAT
dirdisplay4=$(echo -e "\033[2m1 2 3 \033[0m4 \033[2m5\033[0m")
# DEFAULT DIR NUMBER 5 FORMAT
dirdisplay5=$(echo -e "\033[2m1 2 3 4 \033[0m5\033[0m")
# NO MATCH ALL LESS BOLD
dirdisplayno=$(echo -e "\033[2m1 2 3 4 5\033[0m")


# FORMAT PWD NAME FOR COMPARISON
echo "$PWD" > ~/.config/videoinfox/videoinfox.pwd.tmp  # write PWD to a tmp file: videoinfox.pwd.tmp
cat ~/.config/videoinfox/videoinfox.pwd.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.pwd  # remove all froward slashes / write file: videoinfox.pwd
rm  ~/.config/videoinfox/videoinfox.pwd.tmp  # remove tmp file: videoinfox.pwd.tmp
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.pwd  # remove horizontal whitespace write file: videoinfox.pwd

# FORMAT DEFAULT DIR 1 NAME FOR COMPARISON
echo "$dir1" > ~/.config/videoinfox/videoinfox.dir1.tmp  # write dir 1 to a tmp file: videoinfox.dir1.tmp
cat ~/.config/videoinfox/videoinfox.dir1.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir1  # remove all froward slashes / write file: videoinfox.dir1
rm ~/.config/videoinfox/videoinfox.dir1.tmp  # remove tmp file: videoinfox.dir1.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir1  # remove horizontal whitespace write file: videoinfox.dir1

# FORMAT DEFAULT DIR 2 NAME FOR COMPARISON
echo "$dir2" > ~/.config/videoinfox/videoinfox.dir2.tmp  # write dir 2 to a tmp file: videoinfox.dir2.tmp
cat ~/.config/videoinfox/videoinfox.dir2.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir2  # remove all froward slashes / write file: videoinfox.dir2
rm ~/.config/videoinfox/videoinfox.dir2.tmp   # remove tmp file: videoinfox.dir2.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir2 # remove horizontal whitespace write file: videoinfox.dir2

# FORMAT DEFAULT DIR 3 NAME FOR COMPARISON
echo "$dirsaved" > ~/.config/videoinfox/videoinfox.dir3.tmp  # write dir 3 to a tmp file: videoinfox.dir3.tmp
cat ~/.config/videoinfox/videoinfox.dir3.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir3  # remove all froward slashes / write file: videoinfox.dir3
rm ~/.config/videoinfox/videoinfox.dir3.tmp   # remove tmp file: videoinfox.dir3.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir3 # remove horizontal whitespace write file: videoinfox.dir3

# FORMAT DEFAULT DIR 4 NAME FOR COMPARISON
echo "$dir4" > ~/.config/videoinfox/videoinfox.dir4.tmp  # write dir 4 to a tmp file: videoinfox.dir4.tmp
cat ~/.config/videoinfox/videoinfox.dir4.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir4  # remove all froward slashes / write file: videoinfox.dir4
rm ~/.config/videoinfox/videoinfox.dir4.tmp   # remove tmp file: videoinfox.dir4.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir4 # remove horizontal whitespace write file: videoinfox.dir4

# FORMAT DEFAULT DIR 5 NAME FOR COMPARISON
echo "$dir5" > ~/.config/videoinfox/videoinfox.dir5.tmp  # write dir 5 to a tmp file: videoinfox.dir5.tmp
cat ~/.config/videoinfox/videoinfox.dir5.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir5  # remove all froward slashes / write file: videoinfox.dir5
rm ~/.config/videoinfox/videoinfox.dir5.tmp   # remove tmp file: videoinfox.dir5.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir5 # remove horizontal whitespace write file: videoinfox.dir5


# LOAD EDITED PWD AND DEFAULT DIRECTORY NAMES FOR BELOW  IF LOOPS   (all frorward slashes / and white spaces removed from the below directory names)

read -r controldir < ~/.config/videoinfox/videoinfox.pwd    # load reformatted current directory name 
read -r dir1display < ~/.config/videoinfox/videoinfox.dir1  # load reformatted default directory 1 name
read -r dir2display < ~/.config/videoinfox/videoinfox.dir2  # load reformatted default directory 2 name
read -r dir3display < ~/.config/videoinfox/videoinfox.dir3  # load reformatted default directory 3 name
read -r dir4display < ~/.config/videoinfox/videoinfox.dir4  # load reformatted default directory 4 name
read -r dir5display < ~/.config/videoinfox/videoinfox.dir5  # load reformatted default directory 5 name


# DEFAULT DIR 5  DISPLAY     IF DIRECTORY ON EXIT  =  DEFAULT DIRECTORIES 1-4 then Display that directory number.

if [[ "$controldir" = "$dir5display" ]]
  then 

      if [[ "$dir5display" = "$dir1display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 1 then display 1 and not 5
        then
             dirdisp="$dirdisplay1"
      fi

      if [[ "$dir5display" = "$dir2display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 2 then display 2 and not 5
        then
             dirdisp="$dirdisplay2"
      fi

      if [[ "$dir5display" = "$dir3display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 3 then display 3 and not 5
        then
             dirdisp="$dirdisplay3"
      fi

      if [[ "$dir5display" = "$dir4display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 4 then display 4 and not 5
        then
             dirdisp="$dirdisplay4"
      fi
fi



# DEFAULT DIR 5 DISPLAY
if [[ "$controldir" = "$dir5display" ]] 
  then
       dirdisp="$dirdisplay5"  # if directory is changed to  Default Dir 5 :  The number 5 is normal text and the other 4 are less bold.
        
  else
       dirdisp="$dirdisplayno" # if directory doesn't match  Default Dirs 1-5 : All 5 numbers are less bold.  
fi 



# DEFAULT DIR 1  DISPLAY
if [[ "$controldir" = "$dir1display" ]]  # IF PWD = DEFAULT DIR 1 then display 1
  then 
       dirdisp="$dirdisplay1"
fi

# DEFAULT DIR 2  DISPLAY
if [[ "$controldir" = "$dir2display" ]]  # IF PWD = DEFAULT DIR 2 then display 2
  then 
       dirdisp="$dirdisplay2"
fi

# DEFAULT DIR 3  DISPLAY
if [[ "$controldir" = "$dir3display" ]]  # IF PWD = DEFAULT DIR 3 then display 3
  then 
       dirdisp="$dirdisplay3"
fi

# DEFAULT DIR 4  DISPLAY
if [[ "$controldir" = "$dir4display" ]]  # IF PWD = DEFAULT DIR 4 then display 4
  then 
       dirdisp="$dirdisplay4"  # if directory is changed to  Default Dir 4 :  The number 4 is normal text and the other 4 are less bold.
fi

################################################################################
##########  END   1 2 3 4 5 - DEFAULT DIRS   DISPLAY ROUTINE  ##################
################################################################################


########## blinking routines for display ##########

# not blinking Play Directory
playdir1=$(echo "Play Directory")
# blinking Play Directory
playdir2=$(echo -e "\033[5mPlay Directory\033m\033[0m\033[5m\033[5m\033[0m")

# not blinking dash
dash0=$(echo "-")
# blinking dash
dash1=$(echo -e "\033[5m-\033m\033[0m\033[5m\033[5m\033[0m")


# get file count of videos one directory deep for blinking   Play Directory
blinkit=$(find "$PWD" -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) 2>/dev/null | wc -l)

# if find results are zero goto then
if [ "$blinkit" = 0 ]
  then
      blinkit2="$playdir1"  # zero files. non bliking  Playdirectory
      bdash="$dash0"
  else
      blinkit2="$playdir2" # not zero files. blinking  Play Directory
      bdash="$dash1"
fi


# not blinking
changedir1=$(echo "Change Directory")
# blinking
changedir2=$(echo -e "\033[5mChange Directory\033m\033[0m\033[5m\033[5m\033[0m")

# if directory exists goto then
if [ -d "$pasteclip" ]
  then
      changedir3="$changedir2"  # if the directory exists, blinking  Change Directory
  else
      changedir3="$changedir1"  # if the directory doesn't exist, non blinking  Change Directory
fi
########## end blinking routines ################## 


echo
echo "Treetop:" "$grabdirfornav2"
echo "Total Directories: "$ttotal" "
#echo "Total Video Files:" "$ttotalnum"                                                               	                                         
echo
echo "Current Directory:" "$PWD"
#echo "Video Files:" "$blinkit"
#echo
echo "Clipboard:" "$pasteclip"
echo "___________________________________________________________________________________________________________________"
echo  
echo " ""$der"" >>> CREATE DIRECTORY       Enter - Update Clipboard Display           "$dirdisp" - Default Dirs"
echo "___________________________________________________________________________________________________________________" 
echo
echo " c - "$changedir3"     u - Up One Level     t - Treetop     n - Create Directory                       q - Quit"
echo
echo -en " Enter Option: "
read -r -n1 option
echo
}
  
         while true
         do
         navtree
	    case $option in
         
         q)  # QUIT
    ##############################     cd "$grabdirfornav2" &>/dev/null   # restore directory
         echo "" | xclip -sel clip  # clearing the clipboard
         pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content
         break
         ;;


         1)  # CD DIRECTORY TO TV    
         cd "$dir1" 
         grabdirfornav2="$dir1"
         ;;
    
         2)  # CD DIRECTORY TO MOVIES
         grabdirfornav2="$dir2"
         cd "$dir2" 
         ;;

         3)  # CHANGE DIRECTORY TO DOWNLOADS
         grabdirfornav2="$dirsaved"
         cd "$dirsaved" 
         ;;
   
         4)  # CHANGE DIRECTORY TO EXTRA   
         grabdirfornav2="$dir4"
         cd "$dir4" 
         ;;

         5)  # CHANGE DIRECTORY TO LAST EXIT
         grabdirfornav2="$dir5"
         cd "$dir5" 
         ;;
       
       
         u)  # UP ONE LEVEL 
         if [ "$grabdirfornav2" = "$PWD" ]  # when   Up One Level   reaches the    Treetop    no   cd..   out of the parent directory 
           then
               echo
               echo " At treetop. Can't go any higher . . ."
               sleep .50

           else
               cd .. &>/dev/null
         fi 
         ;;
        

         t)  # TREE TOP
         cd "$grabdirfornav2" &>/dev/null
         ;;          


         c)  # CHANGE TO DIRECTORY IN CLIPBOARD
         echo
         pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content 

         treelength=$(echo "$grabdirfornav2" |awk '{print length}')  # get number of characters in treetop         
         clipdat=$(echo "$pasteclip" | head -c"$treelength")  # grabbing the first  $treelength  characters

         if [ "$clipdat" = "$grabdirfornav2" ]  # if clipboard string = treetop go then
           then
               cd "$pasteclip" 2>/dev/null  # change to the directory in the clipboard
           else
               echo " At treetop. Can't go any higher . . ."
               sleep .50
         fi
        
         echo "" | xclip -sel clip  # clearing the clipboard
         pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content 

         ;;

     
         n)  # CREATE DIRECTORY  (CREATE DIRECTORY)
         echo
         echo " Enter name for new directory or enter with no entry to abort . . ."
         echo
         read -r -p " Create Directory: " newdir  # waiting fot user input.

         if [ -z "$newdir" ]
           then
               echo
               echo " Directory Creation Aborted . . ."
               sleep 1.7
           else
               mkdir "$newdir" 2> /dev/null
               cd "$newdir" 2> /dev/null
               echo
               echo " Directory Created: " "$PWD"
               sleep 1.7
         fi

         ;;


         esac
         done
         ;;


a)  # ADD TO QUEUE (DOWNLOAD LIST)
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

ddlist=~/.config/videoinfox/videoinfox-dl-Default

if [ -f "$pasteclip" ]
  then
      if [[ "$pasteclip" == "$ddlist" ]]
        then
            :
        else
            echo "$pasteclip" >> ~/.config/videoinfox/videoinfox-download.queue
            echo
            echo " ""$pasteclip"
            echo
            echo " Download list added to queue . . ."
            echo "" | xclip -sel clip  # clearing out the clipboard
            sleep 1.7
      fi

  else
      :
fi

;;


    b)   # DOWNLOAD QUEUE  (DOWNLOAD LIST)

# SAVE CURRENT DIRECTORY FOR RESTORE ON FUNCTION
savethedir="$PWD"

function dwnque {

clear

if [ -f ~/.config/videoinfox/videoinfox-download.queue ]
  then
      # REMOVE DUPLICATES
      cat -n ~/.config/videoinfox/videoinfox-download.queue | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/videoinfox-download.queue.tmp
      mv ~/.config/videoinfox/videoinfox-download.queue.tmp ~/.config/videoinfox/videoinfox-download.queue
      
      # REMOVE BLAMK LINES
      sed -i '/^$/d' ~/.config/videoinfox/videoinfox-download.queue
      
      cat ~/.config/videoinfox/videoinfox-download.queue

  else
      echo
      echo " Download queue empty . . ."
      echo
fi
      
echo "___________________________________________________________________________________________________________________"
echo
echo " ""$der"" >>> DOWNLOAD QUEUE"        
echo "___________________________________________________________________________________________________________________"
echo
echo " b - Download Queue     d - Delete Queue                                                                  q - Quit"
echo 
echo -en " Enter Option: "
read -r -n1 optiondq
echo
}


while true
do
dwnque
case $optiondq in


        q)  # QUIT   (DOWNLOAD QUEUE)
        break ;;

      
        d)  # DELETE QUEUE LIST  (DOWNLOAD QUEUE)
        function menudelq {
   
        echo
        echo " Delete Download Queue?"
        echo
        echo " y - Yes     n - No"  
        echo 
        echo -en " Enter Option: "
        read -r -n1 optiondelq
        echo
        }

        while true
        do
	  menudelq
	  case $optiondelq in

	  y)  # YES
        if [ -f ~/.config/videoinfox/videoinfox-download.queue ]
          then
              rm ~/.config/videoinfox/videoinfox-download.queue 2> /dev/null
              echo
              echo " Download Queue Deleted . . ."
              sleep 1.7
          else
              echo
              echo " Download Queue Was Already Deleted . . ."
              sleep 1.7
        fi
        break
        ;;


        n)  # NO
        break;;

        *)
        
        esac
        done
        ;;


        b)  # DOWNLOAD QUEUE  (DOWNLOAD QUEUE)

# READ USER SET LIST FOR REMOVAL IF IT IS IN THE DOWNLOAD QUEUE
read usersetlist < ~/.config/videoinfox/videoinfox.set-user-list

#################################################
##########  START DOWNLOAD QUEUE LOOP  ########## 
#################################################

if [ -f ~/.config/videoinfox/videoinfox-download.queue ]
  then

clear

# DOWNLOAD QUEUE FILE
input1=~/.config/videoinfox/videoinfox-download.queue


# LOOP 1 READ LINE BY LINE DOWNLOAD QUEUE LIST
while read -r line
do

input2="$line"

echo
echo 
echo -e "Processing Download List:" "\033[5m"$line"\033m\033[0m"

# WRITE LINE TO TEMP FILE.  DOWNLOAD LIST WITH FULL PATH
echo "$line" > ~/.config/videoinfox/tmp/videoinfox-queue.tmp

# REMOVE FILE NAME FROM PATH AND WRITE FILE
sed -i 's%/[^/]*$%%' ~/.config/videoinfox/tmp/videoinfox-queue.tmp 

# READ FILE WHICH IS PATH ONLY
read -r abc < ~/.config/videoinfox/tmp/videoinfox-queue.tmp

# CHANGE TO READ PATH
cd "$abc"

# CREATE LOG FILE FOE CURRENT DOWNLOAD LIST 
logfile="$line".log  # tag  .log  onto the users Download List  */.videoinfox-dl*.log 
echo ""$ver" >>> DOWNLOAD LIST >>> Logfile:" "$line"".log" > "$logfile"  # create file
echo >> "$logfile"

# IF DOWNLOAD LIST = SET USER LIST THEN REMOVE
if [ "$line" == "$usersetlist" ]
  then
      echo > ~/.config/videoinfox/videoinfox.set-user-list
  else
      :
fi


# LOOP 2 READ LINE BY LINE FROM CURRENT DOWNLOAD LIST
    while read -r line  
    do

    echo

    ~/.config/videoinfox/yt-dlp "$line"  # download url

    echo
    echo "Logging URL and Filename to:" "$logfile"

    # logging yt-dlp output
    echo "$line" >> "$logfile" 
    ~/.config/videoinfox/yt-dlp "$line" | tee >> "$logfile"
    echo >> "$logfile" 

    ############  REMOVE UNWANTED LOG INFO  ############# 
    sed -i '/\[youtube\]/d' "$logfile" &> /dev/null  # removing lines that start with  [youtube]
    sed -i '/\[info\]/d' "$logfile" &> /dev/null  # removing lines that start with  [info]
    sed -i 's/\[download\]//' "$logfile" &> /dev/null  # remove   [download]   from the end of the line.
    sed -i 's/has already been downloaded//' "$logfile" &> /dev/null  # remove   has already been downloaded   from the end of the line.
    sed -i -e 's/^[ \t]*//' "$logfile" &> /dev/null  # remove spaces at beginning of line.
    #####################################################    

    done < "$input2"

done < "$input1"

###############################################
##########  END DOWNLOAD QUEUE LOOP  ########## 
###############################################

echo
echo
echo -e "$der" "\033[5mdone processing download queue . . .\033m\033[0m"
echo
echo "Press enter to exit this screen"

notify-send "Videoinfox messsage: Done Processing Download Queue . . ."

read -p ""
echo "" | xclip -sel clip  # clearing out the clipboard

cd "$savethedir"  # RESTORE DIRECTORY


else
    :
fi
;;

esac
done
;;


c)  # CREATE USER LIST  <DOWNLOAD LIST>
echo
echo " If the name starts with any spaces they will be ignored. Spaces are fine after the first character."
echo
echo " The first character for the filename can be:  a dash -  or  an underscore _   or  a dot ."
echo
read -r -p " Create New List: " createulist  # waiting fot user input. grabbing new filename
ulistname=""$PWD"/videoinfox-dl"$createulist""  # add user input to end of:  current directory/videoinfox-dl
echo > "$ulistname"  #  create user list with full path and filename
echo
echo " User List Created: "$ulistname""
echo
echo
sleep .75
;; 


s)  # SET USER LIST  <DOWNLOAD LIST>
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

###########################################################################################################################################################
# START Routine to find out if clipboard contents  =  The default download list or a user list.  only a user list can:  Set User List and Delete User List
###########################################################################################################################################################

# REFORMAT PASTECLIP VARIBLE FOR COMPARISON TO CONTROL VARIBLE
echo "$pasteclip" > ~/.config/videoinfox/videoinfox.c.tmp  # write clipboard contents to to file
cat ~/.config/videoinfox/videoinfox.c.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.c.tmp2  # remove all froward slashes / and write file
rm ~/.config/videoinfox/videoinfox.c.tmp   # remove .c.tmp file
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.c.tmp2 # remove horizontal whitespace from file an write
# REFORMATTED PASTECLIP
read -r ctmp2 < ~/.config/videoinfox/videoinfox.c.tmp2  # clipboard content with default list or user list.
                                                        # list name with full path: with slashes and spaces removed
# CONTROL VARIABLE
ctmpprefformat=""$HOME"/.config/videoinfox/videoinfox-dl-Default"
# REFORMAT CONTROL VARIABLE FOR COMPARISON TO PASTECLIP VARIBLE
echo "$ctmpprefformat" > ~/.config/videoinfox/videoinfox.dlname.tmp  # write clipboard contents to to file
cat ~/.config/videoinfox/videoinfox.dlname.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dlname.tmp2  # remove all froward slashes / and write file
rm ~/.config/videoinfox/videoinfox.dlname.tmp   # remove .dlname.tmp file
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dlname.tmp2  # remove horizontal whitespace from file an write
# REFORMATTED CONTROL VARIABLE
read -r ctmp3 < ~/.config/videoinfox/videoinfox.dlname.tmp2  # default list name with full path: with slashes and spaces removed


if [ -z "$pasteclip" ]  # if clipboard is empty goto then
   then
        :

   else
   
        if [[ "$ctmp2" = "$ctmp3" ]]  # if clipbaord = Default List goto then because the default list can't: Set User List or Delete User List
           then
                :

           else  # clipbaord = User List
                echo "$pasteclip" > ~/.config/videoinfox/videoinfox.set-user-list
                echo "" | xclip -sel clip  # clearing out the clipboard
                pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content   
        fi
fi


#  REMOVE TMP2 FILES
rm ~/.config/videoinfox/videoinfox.c.tmp2
rm ~/.config/videoinfox/videoinfox.dlname.tmp2

##########################################################################################################################################################
# END Routine to find out if clipboard contents  =  The default download list or a user list.  only a user list can:  Set User List and Delete User List
##########################################################################################################################################################

;;


r)  # DELETE USER LIST  <DOWNLOAD LIST>
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

###########################################################################################################################################################
# START Routine to find out if clipboard contents  =  The default download list or a user list.  only a user list can:  Set User List and Delete User List
###########################################################################################################################################################
# Also, check if the User List in the clipboard  =  Set User List  if it is, the set user list will be set to null
###########################################################################################################################################################

# REFORMAT PASTECLIP VARIBLE FOR COMPARISON TO CONTROL VARIBLE
echo "$pasteclip" > ~/.config/videoinfox/videoinfox.c.tmp  # write clipboard contents to to file
cat ~/.config/videoinfox/videoinfox.c.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.c.tmp2  # remove all froward slashes / and write file
rm ~/.config/videoinfox/videoinfox.c.tmp   # remove .c.tmp file
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.c.tmp2 # remove horizontal whitespace from file an write
# REFORMATTED PASTECLIP
read -r ctmp2 < ~/.config/videoinfox/videoinfox.c.tmp2  # clipboard content with default list or user list.
                                                        # list name with full path: with slashes and spaces removed
# CONTROL VARIABLE
ctmpprefformat=""$HOME"/.config/videoinfox/videoinfox-dl-Default"
# REFORMAT CONTROL VARIABLE FOR COMPARISON TO PASTECLIP VARIBLE
echo "$ctmpprefformat" > ~/.config/videoinfox/videoinfox.dlname.tmp  # write clipboard contents to to file
cat ~/.config/videoinfox/videoinfox.dlname.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dlname.tmp2  # remove all froward slashes / and write file
rm ~/.config/videoinfox/videoinfox.dlname.tmp   # remove .dlname.tmp file
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dlname.tmp2  # remove horizontal whitespace from file an write
# REFORMATTED CONTROL VARIABLE
read -r ctmp3 < ~/.config/videoinfox/videoinfox.dlname.tmp2  # default list name with full path: with slashes and spaces removed

# CONTROL VARIABLE 2  (clear Set User List filename)
read -r chkulistset < ~/.config/videoinfox/videoinfox.set-user-list
# REFORMAT CONTROL VARIABLE 2 FOR COMPARISON TO PASTECLIP VARIBLE
echo "$chkulistset" > ~/.config/videoinfox/videoinfox.chkulist.tmp  # write clipboard contents to to file
cat ~/.config/videoinfox/videoinfox.chkulist.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.chkulist.tmp2  # remove all froward slashes / and write file
rm ~/.config/videoinfox/videoinfox.chkulist.tmp   # remove .dlname.tmp file
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.chkulist.tmp2  # remove horizontal whitespace from file an write
# REFORMATTED CONTROL VARIABLE 2
read -r ctmp4 < ~/.config/videoinfox/videoinfox.chkulist.tmp2  # default list name with full path: with slashes and spaces removed


if [ -z "$pasteclip" ]  # if clipboard is empty goto then
   then
        :

   else
   
        if [[ "$ctmp2" = "$ctmp3" ]]  # if clipbaord = Default List goto then because the default list can't: Set User List or Delete User List
           then
                :

           else  # clipbaord = User List

                function menudul {
                clear
                echo
                echo " Delete User List:" "$pasteclip"
                echo
                echo " y - Yes     n - No"  
                echo 
                echo -en " Enter Option: "
                read -r -n1 option
                echo
                }

                while true
                do
	          menudul
	          case $option in

	
                y)  # YES
  
                if [[ "$ctmp2" = "$ctmp4" ]]  # if clipbaord = Set User List goto then
                   then
                        echo > ~/.config/videoinfox/videoinfox.set-user-list
                        echo "" | xclip -sel clip  # clearing out the clipboard
                        pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

                   else
                        :
                fi                


                rm "$pasteclip" 2>/dev/null
                rm "$pasteclip".log 2>/dev/null

                echo
                echo " User List DELETED . . ."
                echo 
                sleep .75
                break;; 

        
                n)  # NO 
                echo
                echo " User List SAVED . . ."
                echo   
                sleep .75
                break;;
      
                *)
                
                
                esac
                done     
                   
        fi
fi


#  REMOVE TMP2 FILES
rm ~/.config/videoinfox/videoinfox.c.tmp2
rm ~/.config/videoinfox/videoinfox.dlname.tmp2
rm ~/.config/videoinfox/videoinfox.chkulist.tmp2

##########################################################################################################################################################
# END Routine to find out if clipboard contents  =  The default download list or a user list.  only a user list can:  Set User List and Delete User List
##########################################################################################################################################################
;;



k)  # DEFAULT LIST  <DOWNLOAD LIST>

echo "" | xclip -sel clip  # clearing out the clipboard

function ddefault {

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content


########## start blinking and error correcting routine #################

# blinking
addtodefault1=$(echo -e "\033[5mAdd to Default List\033m\033[0m\033[5m\033[5m\033[0m")

# not blinking
addtodefault0=$(echo "Add to Default List")


checktheclip=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

if [ "$checktheclip" = "http" ]  # if the first 4 characters = <http> go then
  then
      atd="$addtodefault1"
      
  else      
      atd="$addtodefault0"
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content      

fi

########## end blinking and error correcting routine #################

# # DEFAULT LIST - REMOVE DUPLICATES, BLANK LINES and ANY LINES NOT STARTING WITH HTTP
cat -n ~/.config/videoinfox/videoinfox-dl-Default | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/videoinfox-dl-Default.tmp
mv ~/.config/videoinfox/videoinfox-dl-Default.tmp ~/.config/videoinfox/videoinfox-dl-Default

sed -i '/^$/d' ~/.config/videoinfox/videoinfox-dl-Default 2>/dev/null  # remove any blank lines in the list
sed -i '/http/!d' ~/.config/videoinfox/videoinfox-dl-Default  # remove all lines not starting with  http

clear
cat ~/.config/videoinfox/videoinfox-dl-Default  # display default download list
echo
echo "Copy 1 url to the clipboard then Add to Default List to add the url."
echo
echo "Directory:" "$PWD"
echo "Clipboard:" "$pasteclip"
echo "___________________________________________________________________________________________________________________"
echo  
echo " ""$der"" >>> DEFAULT DOWNLOAD LIST                                     Enter - Update Clipboard Display"
echo "___________________________________________________________________________________________________________________" 
echo
echo " a - "$atd"     r - Remove Last Entry     c - Clear Default List     x - Clear Clipboard     q - Quit"
echo
echo -en " Enter Option: "
read -r -n1 optiondd
echo
}

while true
do
ddefault
case $optiondd in
         
q)  # QUIT  <DEFAULT LIST>
echo "" | xclip -sel clip  # clearing out the clipboard
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
break;;


x) #  CLEAR CLIPBOARD  <DEFAULT LIST> 
echo "" | xclip -sel clip  # clearing out the clipboard
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
;;


c)  # CLEAR DEFAULT LIST   <DEFAULT LIST>  
function yesorno {
echo
echo " Clear the Default List?"
echo
echo " y - Yes     n - No"  
echo 
echo -en " Enter Option: "
read -r -n1 optionyn
echo
}

while true
do
    yesorno
    case $optionyn in
	
    y) 
    # CREATING EMPTY DEFAULT DOWNLOAD LIST WITH LIST EMPTY MESSAGE
    echo > ~/.config/videoinfox/videoinfox-dl-Default
    echo "Default Download List Empty" >> ~/.config/videoinfox/videoinfox-dl-Default
 
    rm ~/.config/videoinfox/videoinfox-dl-Default.log 2> /dev/null    
 
    echo
    echo " Default List CLEARED . . ."
    echo 
    sleep .75
    break;; 
 
       
    n) 
    echo
    echo " Default List SAVED . . ."
    echo     
    sleep .75

    break;;

*)
          
esac
done
;;

a)  # ADD TO DEFAULT LIST  <DEFAULT LIST>

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
echo "$pasteclip" >> ~/.config/videoinfox/videoinfox-dl-Default
# notify-send "Videoinfox Message: Added to Default Download List." ""$pasteclip"" # GUI Notification.
echo "" | xclip -sel clip  # clearing out the clipboard
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
;;


r)  # REMOVE LAST LINE IN THE DEFAULT DOWNLOAD LIST <DEFAULT LIST>

sed -i '$d' ~/.config/videoinfox/videoinfox-dl-Default
;;


*)

esac
done
;;


d)  # DOWNLOAD THE URL LIST <DOWNLOAD LIST>
clear

dirclip="$PWD"

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

if [ -f "$pasteclip" ]  # continue if file exists  
then

# check if   $pasteclip   contains   Default List   or   User Created list 
find ~/.config/videoinfox/videoinfox-dl-Default > ~/.config/videoinfox/videoinfox.default2
checkclip=$(cat ~/.config/videoinfox/videoinfox.default2)


# PROCESSING DEFAULT LIST
if [ "$checkclip" = "$pasteclip" ] 
then 

read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir 2> /dev/null
cd "$dirsaved" # Change directory to default download directory

# DEFAULT LIST - REMOVE DUPLICATES, BLANK LINES and ANY LINES NOT STARTING WITH HTTP
cat -n ~/.config/videoinfox/videoinfox-dl-Default | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/videoinfox-dl-Default.tmp
mv ~/.config/videoinfox/videoinfox-dl-Default.tmp ~/.config/videoinfox/videoinfox-dl-Default
sed -i '/^$/d' ~/.config/videoinfox/videoinfox-dl-Default 2>/dev/null  # remove any blank lines in the list
sed -i '/http/!d' ~/.config/videoinfox/videoinfox-dl-Default  # remove all lines not starting with  http


else # PROCESSING USER CREATED LIST

echo "$pasteclip" | sed 's|\(.*\)/.*|\1|' > ~/.config/videoinfox/videoinfox.userlist-tmp # remove last slash and filenname leaving only path
read -r grablistdir < ~/.config/videoinfox/videoinfox.userlist-tmp 2> /dev/null
cd "$grablistdir"  # change directory to list location

# USER CREATED LIST - REMOVE DUPLICATES, BLANK LINES and ANY LINES NOT STARTING WITH HTTP
cat -n "$pasteclip" | sort -uk2 | sort -n | cut -f2- > ~/.config/videoinfox/videoinfox-dl-userlist.tmp  # remove duplicates
mv ~/.config/videoinfox/videoinfox-dl-userlist.tmp "$pasteclip"
sed -i '/^$/d' "$pasteclip" 2>/dev/null  # remove any blank lines in the list
sed -i '/http/!d' "$pasteclip" 2>/dev/null  # remove all lines not starting with  http


#########################################################################################################################################################
# START Routine to find out if clipboard content  =  set user list filename  if it does, the file will be cleared from the screen after list download
#########################################################################################################################################################

# REFORMAT PASTECLIP VARIBLE FOR COMPARISON TO CONTROL VARIBLE
echo "$pasteclip" > ~/.config/videoinfox/videoinfox.c.tmp  # write clipboard contents to to file
cat ~/.config/videoinfox/videoinfox.c.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.c.tmp2  # remove all froward slashes / and write file
rm ~/.config/videoinfox/videoinfox.c.tmp   # remove .c.tmp file
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.c.tmp2 # remove horizontal whitespace from file an write
# REFORMATTED PASTECLIP
read -r ctmp2 < ~/.config/videoinfox/videoinfox.c.tmp2  # filename in clipboard with full path: with slashes and spaces removed
              
# CONTROL VARIABLE
read -r getuserlist < ~/.config/videoinfox/videoinfox.set-user-list
# REFORMAT CONTROL VARIABLE FOR COMPARISON TO PASTECLIP VARIBLE
echo "$getuserlist" > ~/.config/videoinfox/videoinfox.checku.tmp  # write filename to file: ~/.config/videoinfox/videoinfox.checku.tmp 
cat ~/.config/videoinfox/videoinfox.checku.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.checku.tmp2  # remove all froward slashes / and write file
rm ~/.config/videoinfox/videoinfox.checku.tmp   # remove .dlname.tmp file
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.checku.tmp2  # remove horizontal whitespace from file an write
# REFORMATTED CONTROL VARIABLE
read -r ctmp5 < ~/.config/videoinfox/videoinfox.checku.tmp2  # set user list filename with full path: with slashes and spaces removed


if [[ "$ctmp2" = "$ctmp5" ]]  # if clipbaord = Default List goto then because the default list can't: Set User List or Delete User List
           then
                echo > ~/.config/videoinfox/videoinfox.set-user-list
           
           else
                :
fi 


#  REMOVE TMP2 FILES
rm ~/.config/videoinfox/videoinfox.c.tmp2
rm ~/.config/videoinfox/videoinfox.checku.tmp2

fi


#########################################################################################################################################################
# END Routine to find out if clipboard content  =  set user list filename  if it does, the file will be cleared from the screen after list download
#########################################################################################################################################################


rm videoinfox-dl*~ &> /dev/null  # duplicate lists were showing up with   ~   added onto the filename

logfile="$pasteclip".log  # tag  .log  onto the users Download List  */.videoinfox-dl*.log 
echo ""$ver" >>> DOWNLOAD LIST >>> Logfile:" "$pasteclip"".log" > "$logfile"  # create file
echo >> "$logfile"

#justfile=$(echo "$pasteclip" | sed 's|.*/||')  # ended up not using. grabs filename minus path

input="$pasteclip"  # input file for download loop (clipboard contents)


################  DOWNLOAD LOOP START  ###################################################################################################################

while read -r line  # read line by line until end from  Download List  */.videoinfox-dl*
do

echo

~/.config/videoinfox/yt-dlp "$line"  # download url


echo
echo "Logging URL and Filename to:" "$logfile" 


# logging yt-dlp output
echo "$line" >> "$logfile" 
~/.config/videoinfox/yt-dlp "$line" | tee >> "$logfile"
echo >> "$logfile" 

done < "$input"

################  DOWNLOAD LOOP END  #####################################################################################################################


############  REMOVE UNWANTED LOG INFO  ############# 

sed -i '/\[youtube\]/d' "$pasteclip".log &> /dev/null  # removing lines that start with  [youtube]
sed -i '/\[info\]/d' "$pasteclip".log &> /dev/null  # removing lines that start with  [info]
sed -i 's/\[download\]//' "$pasteclip".log &> /dev/null  # remove   [download]   from the end of the line.
sed -i 's/has already been downloaded//' "$pasteclip".log &> /dev/null  # remove   has already been downloaded   from the end of the line.
sed -i -e 's/^[ \t]*//' "$pasteclip".log &> /dev/null  # remove spaces at beginning of line.

#####################################################


echo
echo
echo -e "$der" "\033[5mdone processing download list . . .\033m\033[0m"
echo
echo "List:" "$pasteclip"  # display list filename with full path
echo "Log :" "$logfile"  # display log filename with full path
echo
echo "Press enter to exit this screen"

notify-send "Videoinfox messsage: Done Processing Download List . . ." "$pasteclip"

read -p ""
echo "" | xclip -sel clip  # clearing out the clipboard


else  # File didn't exist. clipboard cleared

echo "" | xclip -sel clip  # clearing out the clipboard
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
fi


cd "$dirclip"  # restore directory to before  Download List
;;


v)  # VIEW A DOWNLOAD LIST

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

if [ -f "$pasteclip" ]  # continue if file exists  
then

clear
cat "$pasteclip" 2>/dev/null
echo
read -p "Up/Down arrows or mouse to scroll.  Press enter to quit"

else  # File didn't exist. clipboard cleared

echo "" | xclip -sel clip  # clearing out the clipboard
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
fi
;;


l)  # VIEW LOGS

echo "" | xclip -sel clip  # clearing out the clipboard clipboard

function viewlogs {

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content


########## blinking routine for display ##########

# blinking
viewlog1=$(echo -e "\033[5mView Log\033m\033[0m\033[5m\033[5m\033[0m")

# not blinking
viewlog0=$(echo "View Log")

# if file exists goto then
if [ -f "$pasteclip" ]
  then
      finalresult="$viewlog1"  # if the file exists, blinking   View Log

  else
      finalresult="$viewlog0"  # if the file doesn't exist, non blinking   View Log
fi
########## end blinking routine #################


clear


# find default download list and write to file.
find ~/.config/videoinfox/videoinfox-dl-Default.log > ~/.config/videoinfox/videoinfox.dowload.list.default.log 2> /dev/null

# find user created list logs 
find "$PWD" -type f \( -iname "videoinfox-dl*.log" \)  # find log files  */.videoinfox-dl*log
echo

cat ~/.config/videoinfox/videoinfox.dowload.list.default.log 

echo
echo "Copy 1 above log to the clipboard to view"
echo
echo "Directory:" "$PWD"
echo "Clipboard:" "$pasteclip"
echo "___________________________________________________________________________________________________________________"
echo  
echo " "$der" >>> DOWNLOAD LIST >>> VIEW LOGS                               Enter - Update Clipboard Display"
echo "___________________________________________________________________________________________________________________" 
echo
echo " l - "$finalresult"                                                                                             q - Quit"
echo
echo -en " Enter Option: "
read -r -n1 optionvl
echo
}

while true
do
viewlogs
case $optionvl in
         
q)  # QUIT
echo "$pastecliptemp" | xclip -sel clip  # restoring clipboard clipboard
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
break;;


l)  # VIEW LOG
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard contentclear

if [ -f "$pasteclip" ]
then

clear
cat "$pasteclip" 2>/dev/null
read -p "Up/Down arrows or mouse to scroll.  Press enter to quit"
echo "" | xclip -sel clip  # clearing out the clipboard clipboard

else
echo "" | xclip -sel clip  # clearing out the clipboard
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
fi

esac
done
;;


h) # DOWNLOAD LIST HELP
less ~/.config/videoinfox/videoinfox.download-list-help
;;

*)
;;

esac
done
;;


#######################################################################################################################################
########################   (PLAY ClIPBOARD) YT-DLP MENU   #############################################################################
#######################################################################################################################################

     p) 
     #  @PLAY CLIPBOARD - <VIEW DOWNLOADS>
          
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

if [ "$grabpaste" = "http" ]  # if the 4 characters = <http> go then
  then
      #  DOWNLOAD AND PLAY FILE if <$grabpaste> ONLY IF IT =  http        
   
     ################# grabdir="$PWD"  # storing directory to restore at the end of this function
        
      #  DOWNLOAD LINK AND PLAY
      
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir  # reading download directory 
      cd "$dirsaved"   # change to download directory
 
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      clear
    
      # make a backup copy of:   ~/.config/videoinfox/videoinfo.lastdownload   to restore on Play Clipboard with invalid url
      cp ~/.config/videoinfox/videoinfo.lastdownload ~/.config/videoinfox/videoinfo.lastdownload.bak
   
      ~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" > ~/.config/videoinfox/videoinfo.lastdownload 
      ~/.config/videoinfox/yt-dlp "$pasteclip"     
      
      # remove first dot and everything after it in filename. this was done because file names with dots before the extension were breking find results
      sed "s/\..*//" ~/.config/videoinfox/videoinfo.lastdownload > ~/.config/videoinfox/videoinfo.lastdownload.work

      # remove first [ and everything after it in filename. this was done because file names with [ 
      sed -i "s/\[.*//" ~/.config/videoinfox/videoinfo.lastdownload.work

      # rename videoinfo.lastdownload.work to videoinfox/videoinfo.lastdownload
      mv ~/.config/videoinfox/videoinfo.lastdownload.work ~/.config/videoinfox/videoinfo.lastdownload
      
      if [ -s ~/.config/videoinfox/videoinfo.lastdownload ]
         then
             # make a backup copy of:   ~/.config/videoinfox/videoinfo.lastdownload to restore on Play Clipboard with invalid url
             cp ~/.config/videoinfox/videoinfo.lastdownload ~/.config/videoinfox/videoinfo.lastdownload.bak
         else
             :
      fi

   
      read -r lastdownload < ~/.config/videoinfox/videoinfo.lastdownload  # reading last download attempt
      read -r lastdownloadbak < ~/.config/videoinfox/videoinfo.lastdownload.bak  # reading last successful download 
             
      ylast=$(find "$PWD" -maxdepth 1 -type f \( -iname "$lastdownload*" \))  # finding the file to play

      echo "$ylast" > ~/.config/videoinfox/videoinfo.find-last-download  # write find result to file

   
      # IF THERE ARE IDENTICAL FILENAMES WITH DIFFERENT FILE EXTENSIONS FIND WILL PRODUCE MORE THAN ONE RESULT      
      correcterror=$(wc -l ~/.config/videoinfox/videoinfo.find-last-download | cut -d' ' -f1)  # getting line count.
          
             if [ "$correcterror" -gt 1 ]  # If line count is greater than 1 goto then. More than 1 was caused from Play Clipboard on invalid url.
                then                
                     if [[ "$lastdownload" == "$lastdownloadbak" ]]                 
                        then
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download  # read first find result from file
                     
                        else
                            echo > ~/.config/videoinfox/videoinfo.find-last-download
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download
                     fi
                               
                else
                    read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download      
                                     
             fi      

      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY LAST DOWNLOAD"
      echo
      echo " [PLAY]> "$ytdlplast""
      echo "___________________________________________________________________________________________________________________"         
      echo
              
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$ytdlplast")  " Duration:" $(ffmpeg -i "$ytdlplast" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      
      if [ -z "$ytdlplast" ]
         then
             :
         else     
             notify-send "Videoinfox messsage: Playing last yt-dlp download . . ." "Play: $lastdownload"
             echo "$ytdlplast" >> ~/.config/videoinfox/videoinfo.playedlist  # write clipboard content to Played List File  
             ffplay -fs -autoexit &> /dev/null "$ytdlplast"  
      fi 
      
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      
      cd "$grabdir"   # restore dir prior to entering yt-dlp menu              

  else

      if [ -f "$pasteclip" ]
        then
      
      #  PLAY FILE if <$grabpaste> WAS ANYTHING BUT <HTTP> 
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY CLIPBOARD" 
      echo
      echo " [PLAY]> "$pasteclip" "
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip")  " Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      #read -p " Press enter to Continue"
      
       # video filename with full path <$pasteclip> strip from the bgininning of line to the last slash leaving only the filename <$getfilenameonly>
      getfilenameonly=$(echo "$pasteclip" |  awk -F '/' '{print $NF}')  
      notify-send "Videoinfox messsage: Playing . . ." "$getfilenameonly"
     
      echo "$pasteclip" >> ~/.config/videoinfox/videoinfo.playedlist  # write clipboard content to Played List file
      ffplay -fs -autoexit "$pasteclip" 2>/dev/null  # play video in clipboard

      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

      echo " Played List Closed"
      
       else
            
           echo
           echo
           echo " No playable content in the clipboard . . ."
           sleep 1.2
       fi
fi

cd "$grabdir"
;;

  
#####################################################################################
     v)  # VIEW DOWNLOADS
##################################################################################### 

clipsave=$(xclip -o -selection clipboard 2> /dev/null)  # save clipboard content         

keepdir="$PWD"  # save dir for exit      
     

      function menuyt {  # LIST ALL VIDEO FILES RECURSIVELY IN THE DEFAULT DOWNLOAD DIRECTORY 


cd "$dirsaved"

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

grabclip=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

if [ "$grabclip" = "http" ]  # if the first 4 characters = <http> go then
  then
      :

  else      
      if [ -f "$pasteclip" ]
        then
            :
        else
            echo "" | xclip -sel clip  # clearing out the clipboaed
            pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      fi
fi

# below was the method i used for this functions before switching to find   
# echo " " > ~/.config/videoinfox/videoinfo.viewdownloads
# ls "$PWD/"*.mp4 >> ~/.config/videoinfox/videoinfo.viewdownloads
# ls "$PWD/"*.mkv >> ~/.config/videoinfox/videoinfo.viewdownloads
# ls "$PWD/"*.avi >> ~/.config/videoinfox/videoinfo.
# ls "$PWD/"*.webm >> ~/.config/videoinfox/videoinfo.viewdownloads
# ls "$PWD/"*.divx >> ~/.config/videoinfox/videoinfo.viewdownloads
# sed -i '/ls: cannot access/d' ~/.config/videoinfox/videoinfo.viewdownloads  # removing file type(s) not found errors (remove beinnging of line pattern)

# Find video files.
find "$PWD" -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) > ~/.config/videoinfox/videoinfo.view-downloads

#tac ~/.config/videoinfox/videoinfo.viewdownloads >  ~/.config/videoinfox/videoinfo.viewdownloads.tmp
#mv ~/.config/videoinfox/videoinfo.viewdownloads.tmp ~/.config/videoinfox/videoinfo.viewdownloads

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content                  
clear
#cat ~/.config/videoinfox/videoinfo.view-downloads

# SORT BACK INTO ORDER
sort -u ~/.config/videoinfox/videoinfo.view-downloads > ~/.config/videoinfox/videoinfo.view-downloads.tmp
mv ~/.config/videoinfox/videoinfo.view-downloads.tmp ~/.config/videoinfox/videoinfo.view-downloads 

#  REMOVE BLANK LINES
sed '/^$/d' ~/.config/videoinfox/videoinfo.view-downloads > ~/.config/videoinfox/tmp/videoinfo-view-downloads.tmp 2>/dev/null

# REMOVE PATH ONLY LEAVING FILENAME
sed 's/.*\///' ~/.config/videoinfox/tmp/videoinfo-view-downloads.tmp > ~/.config/videoinfox/tmp/videoinfo-number-view-downloads.tmp2 2>/dev/null

# CREATE NUMBERED lIST
sed '/./=' ~/.config/videoinfox/tmp/videoinfo-number-view-downloads.tmp2 | sed '/./N; s/\n/ /' > ~/.config/videoinfox/tmp/videoinfo-number-view-downloads.tmp 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfo-number-view-downloads.tmp2 2>/dev/null

cat ~/.config/videoinfox/tmp/videoinfo-number-view-downloads.tmp  # display numbered find results 


echo
echo "Directory: ""$PWD"
echo "Clipboard: ""$pasteclip"


##################################################################################################################################################
#=================================================================================================================================================
#                           @CHECK TO SEE IF THE CLIPBOARD CONTENTS CONTAIN A URL OR A FILE AND ACT UPON THAT DISPLAY
#=================================================================================================================================================
##################################################################################################################################################

# the 2 lines of below code are creating two new variables for the following loop.
# 1st variable <$grabpaste>   <cut> is used to cut all characters after the 4th character from the variable. Only 4 chatacters are needed to look for <http>
# 2nd variable <$grabpaste2>  <cut> is used to cut all characters after the 1st character from the variable. Only 1 character is needed to look for </>  

# for main if loop - to look for <http>
grabpaste=$(echo "$pasteclip" | cut -c-4)   # cut everything after the 4th character

# for nested if loop - to look for </>
grabpaste2=$(echo "$pasteclip" | cut -c-1)  # cut everything after the 1st character

# the following code checks to see if the clipbooard has a url in it by lookin for <http> from <$grabpaste>  
# If it is <http>, YT-DLP will get the clipboard. yt-dlp will check if its a valid link by trying to extract the name of the video file.
# If it isn't <http>  the ytdlp loop will be skipped

if [ "$grabpaste" = "http" ]  # if the first 4 characters = <http> go then
  then
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir 2> /dev/null  # reding default download directory
      ytdlpconfirm=$(~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" 2> /dev/null)

            if [ "$ytdlpconfirm" = "" ]  
                  then

                      echo "" | xclip -sel clip  # clearing out the clipboard
                      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

                           # Videoinfox v2.00________________________________________ Videoinfox v2.00_________________________________________
                           #________________x________________________________________ _________________________________________________________
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " "$der" >>> VIEW DOWNLOADS"
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " p - Play Clipboard     d - Play Directory     o - Autoplay Line     j - Play Line     i - Info           q - Quit"      
                      echo

                  else 
                      echo
                      echo "YT-DLP Confirmed: "$ytdlpconfirm""
                      echo
                      echo "Download Directory: $dirsaved"  # dislpay default download directory
                      echo "___________________________________________________________________________________________________________________"
                      echo
                      echo " "$der" >>> VIEW DOWNLOADS"
                      echo "___________________________________________________________________________________________________________________"
                      echo

echo -e " p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m                                                                                       q - Quit"             
                      echo
                      echo " i - Info"         
                      echo                                                                                  
            fi
  else

      if [ -f "$pasteclip" ]  # 
        then
            echo      
            echo "Valid file in clipboard"
            echo "___________________________________________________________________________________________________________________"
            echo
            echo " "$der" >>> VIEW DOWNLOADS"
            echo "___________________________________________________________________________________________________________________"
            echo

echo -e " p - \033[5mPlay Clipboard\033m\033[0m\033[5m\033[5m\033[0m                                                                                       q - Quit"

            echo
            echo " i - Info"
            echo                                                             

        else 

            echo "" | xclip -sel clip  # clearing out the clipboard
            pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

            echo "___________________________________________________________________________________________________________________"
            echo
            echo " "$der" >>> VIEW DOWNLOADS"
            echo "___________________________________________________________________________________________________________________"
            echo
            echo " p - Play Clipboard     d - Play Directory     o - Autoplay Line     j - Play Line     i - Info           q - Quit"      
            echo                                          
fi
fi

echo -en " Enter Option: "
read -r -n1 optionyt

}
        
              while true
              do
              menuyt
	         case $optionyt in


              q)  # QUIT        
              cd "$keepdir"
              rm ~/.config/videoinfox/tmp/videoinfo-number-view-downloads.tmp 2> /dev/null
              rm ~/.config/videoinfox/tmp/videoinfo-view-downloads.tmp 2> /dev/null

              break;;

                            
              p)
 
          #  @PLAY CLIPBOARD - <VIEW DOWNLOADS>
          
pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

if [ "$grabpaste" = "http" ]  # if the 4 characters = <http> go then
  then
      #  DOWNLOAD AND PLAY FILE if <$grabpaste> ONLY IF IT =  http        
   
      grabdir="$PWD"  # storing directory to restore at the end of this function
        
      #  DOWNLOAD LINK AND PLAY
      
      read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir  # reading download directory 
      cd "$dirsaved"   # change to download directory
 
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      clear
    
      # make a backup copy of:   ~/.config/videoinfox/videoinfo.lastdownload   to restore on Play Clipboard with invalid url
      cp ~/.config/videoinfox/videoinfo.lastdownload ~/.config/videoinfox/videoinfo.lastdownload.bak
   
      ~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" > ~/.config/videoinfox/videoinfo.lastdownload 
      ~/.config/videoinfox/yt-dlp "$pasteclip"     
      
      # remove first dot and everything after it in filename. this was done because file names with dots before the extension were breking find results
      sed "s/\..*//" ~/.config/videoinfox/videoinfo.lastdownload > ~/.config/videoinfox/videoinfo.lastdownload.work

      # remove first [ and everything after it in filename. this was done because file names with [ 
      sed -i "s/\[.*//" ~/.config/videoinfox/videoinfo.lastdownload.work

      # rename videoinfo.lastdownload.work to videoinfox/videoinfo.lastdownload
      mv ~/.config/videoinfox/videoinfo.lastdownload.work ~/.config/videoinfox/videoinfo.lastdownload
      
      if [ -s ~/.config/videoinfox/videoinfo.lastdownload ]
         then
             # make a backup copy of:   ~/.config/videoinfox/videoinfo.lastdownload to restore on Play Clipboard with invalid url
             cp ~/.config/videoinfox/videoinfo.lastdownload ~/.config/videoinfox/videoinfo.lastdownload.bak
         else
             :
      fi


      read -r lastdownload < ~/.config/videoinfox/videoinfo.lastdownload  # reading last download attempt
      read -r lastdownloadbak < ~/.config/videoinfox/videoinfo.lastdownload.bak  # reading last successful download 
             
      ylast=$(find "$PWD" -maxdepth 1 -type f \( -iname "$lastdownload*" \))  # finding the file to play

      echo "$ylast" > ~/.config/videoinfox/videoinfo.find-last-download  # write find result to file

   
      # IF THERE ARE IDENTICAL FILENAMES WITH DIFFERENT FILE EXTENSIONS FIND WILL PRODUCE MORE THAN ONE RESULT      
      correcterror=$(wc -l ~/.config/videoinfox/videoinfo.find-last-download | cut -d' ' -f1)  # getting line count.
          
             if [ "$correcterror" -gt 1 ]  # If line count is greater than 1 goto then. More than 1 was caused from Play Clipboard on invalid url.
                then                
                     if [[ "$lastdownload" == "$lastdownloadbak" ]]                 
                        then
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download  # read first find result from file
                     
                        else
                            echo > ~/.config/videoinfox/videoinfo.find-last-download
                            read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download
                     fi
                               
             else
                  read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download      
                                     
             fi      

      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY LAST DOWNLOAD"
      echo
      echo " [PLAY]> "$ytdlplast""
      echo "___________________________________________________________________________________________________________________"         
      echo
              
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$ytdlplast")  " Duration:" $(ffmpeg -i "$ytdlplast" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      
      if [ -z "$ytdlplast" ]
         then
             :
         else     
             notify-send "Videoinfox messsage: Playing last yt-dlp download . . ." "Play: $lastdownload"
             echo "$ytdlplast" >> ~/.config/videoinfox/videoinfo.playedlist  # write clipboard content to Played List File  
             ffplay -fs -autoexit &> /dev/null "$ytdlplast"  
      fi 
      
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
      
      cd "$grabdir"   # restore dir prior to entering yt-dlp menu              

  else
      
      if [ -f "$pasteclip" ]
        then

      #  PLAY FILE if <$grabpaste> WAS ANYTHING BUT <HTTP> 
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> PLAY CLIPBOARD" 
      echo
      echo " [PLAY]> "$pasteclip" "
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip")  " Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      #read -p " Press enter to Continue"
      
       # video filename with full path <$pasteclip> strip from the bgininning of line to the last slash leaving only the filename <$getfilenameonly>
      getfilenameonly=$(echo "$pasteclip" |  awk -F '/' '{print $NF}')  
      notify-send "Videoinfox messsage: Playing . . ." "$getfilenameonly"
     
      echo "$pasteclip" >> ~/.config/videoinfox/videoinfo.playedlist  # write clipboard content to Played List file
      ffplay -fs -autoexit "$pasteclip" 2>/dev/null  # play video in clipboard
      echo "" | xclip -sel clip  # clearing out the clipboard
      pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content

      echo " Played List Closed"
 
        else
            
           echo
           echo
           echo " No playable content in the clipboard . . ."
           sleep 1.2
      fi 
fi

cd "$grabdir"
;;  


              i)  # INFO - <VIEW DOWNLOADS>
 
      if [ -f "$pasteclip" ]
        then
            pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content
            echo
            echo
            echo " ""$pasteclip"
            echo  

echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip")  " Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

            echo
            read -r -p " Press enter to Continue" 

        else
            if [ -f ~/.config/videoinfox/tmp/videoinfo-view-downloads.tmp ]  # if file exists goto then
              then
              echo
              echo
              read -r -p " Enter line number to get info: " linenumber  # waiting fot user input

             # create file moving selected line number to the top
             tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo-view-downloads.tmp > ~/.config/videoinfox/tmp/videoinfo-view-downloads-autoplay.tmp 2>/dev/null
      
             # read first line of file for play
             read playnumber < ~/.config/videoinfox/tmp/videoinfo-view-downloads-autoplay.tmp

                 if [ -z "$playnumber" ]
                   then
                       :
 
                   else
                       #echo
                       echo
                       echo "$playnumber"
                       echo
           
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$playnumber")  " Duration:" $(ffmpeg -i "$playnumber" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height & duration

                       echo
                       read -r -p " Press enter to Continue" 
                       rm ~/.config/videoinfox/tmp/videoinfo-view-downloads-autoplay.tmp 2>/dev/null

                 fi

        else
            :

            fi

      fi

;;


###### Check this area.  pulled possible misplaced code. test playclipboard


         ########################################################################################################################################
         d)  # (@PLAY DIRECTORY) VIEW DOWNLOADS  ################################################################################################
         ########################################################################################################################################

# WRITING VIDEO FILE LIST TO FILE: /.config/videoinfox/tmp/videoinfo.nt-play-directory-apa 
find "$PWD" -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) > ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa-work 2>/dev/null

# SORT BACK INTO ORDER
sort -u ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa-work > ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa

#  CHECK FOR AT LEAST ONE LINE THAT STARTS WITH A SLASH /
atleastone=$(grep '^/' ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa 2>/dev/null | wc -l)

#  IF THE NUMBER DOESN"T = 0  THEN PROCESS AUTO PLAY OF PLAYED LIST
if [ $atleastone -ne 0 ]  
   then

#  ASSIGN PLAYED LIST TO VARIABLE: $moddedplayedlist 
moddedplayedlist="$HOME""/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa"

#  PLAYED LIST INPUT FOR LOOP
input="$moddedplayedlist"  

#  CREATE TEMP FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2

#  #  START WRITING
while read -r line  # read line by line and write line by line until end of file
do

   if [ -f "$line" ]
      then # ONLY WRITE LINE TO FILE IF IT IS A VALID PATH AND FILE
           echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2  
      else
           :
   fi        

done < "$input"
#  DONE WRITING ONLY VALID FILES

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
mv ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa 2>/dev/null

#  CREATE FILE NEEDED FOR LOOP 
echo > ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2  

#  START WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx
while read -r line  # read line by line until end of file
do

   if [[ "$line" == *.mp4 ]] 
        then # IF FILE IS MP4, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2  
     
   elif [[ "$line" == *.webm ]]
        then # IF FILE IS WEBM, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2
      
   elif [[ "$line" == *.mkv ]]
        then # IF FILE IS MKV, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2

   elif [[ "$line" == *.avi ]]
        then # IF FILE IS AVI, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2

   elif [[ "$line" == *.divx ]]
        then  # IF FILE IS DIVX, WRITE LINE TO FILE
             echo "$line" >> ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2
   else
        :  # IF THERE IS NO FILE MATCH, THERE IS NO WRITE
   fi

done < "$input"
#  END WRITING FILENAMES TO LIST THAT END IN:  .mp4  .webm  .mkv  .avi  .divx

#  REMOVE BLANK LINES
sed -i '/^$/d' ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 2>/dev/null

#  MOVE apa2 BACK TO apa
cp ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa 2>/dev/null

# REMOVE PATH ONLY LEAVING FILENAME
sed -i 's/.*\///' ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2

# NUMBER THE LIST
sed '/./='  ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 | sed '/./N; s/\n/ /' > ~/.config/videoinfox/tmp/videoinfox.numbered-navtree-play-directory-list 2>/dev/null

   
else #  NO LINES START WITH A SLASH /   remove empty files
     rm ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.numbered-navtree-play-directory-list 2>/dev/null
     rm ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa-work 2>/dev/null    
fi


################clear

if [ -f ~/.config/videoinfox/tmp/videoinfox.numbered-navtree-play-directory-list ]
   then
        cat ~/.config/videoinfox/tmp/videoinfox.numbered-navtree-play-directory-list 2>/dev/null
   else
       echo
       echo " No video files in the current directory . . ."
       sleep 1.7
fi


linenumber=1

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa > ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa.tmp 2>/dev/null
mv ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa.tmp ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa 2>/dev/null

OLDIFS=$IFS
IFS=$'\n'

for line in $(cat "$input" 2>/dev/null)
 do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> VIEW DOWNLOADS >>> PLAY DIRECTORY" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      ffplay -fs -autoexit "$line" 2> /dev/null

      echo " To bypass the 3 second wait press enter with no entry"
      echo
      echo -e "\033[5m 3 seconds remaining to quit Played List Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      echo 
      read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           if [[ $playdir ]]                                             
             then                                                        # if no input is entered within 3 seconds the next video will play
                 break                                                   # if enter is pressed without any input the next video will play
             else                                                        
                 :                                                       # press any key then enter within 3 seconds to quit Play Played List
           fi
done
 
IFS=$OLDIFS

rm ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa2 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.numbered-navtree-play-directory-list 2>/dev/null
rm ~/.config/videoinfox/tmp/videoinfox.navtree-play-directory-apa-work 2>/dev/null 

;;           


              o)
##################################################################################################################################################
###########################   AUTOPLAY LINE  o   <VIEW DOWNLOADS>  ###############################################################################
##################################################################################################################################################

if [ -f ~/.config/videoinfox/tmp/videoinfo-view-downloads.tmp ]
  then

echo
echo
read -r -p " Autoplay Line Number: " linenumber  # waiting fot user input

tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo-view-downloads.tmp > ~/.config/videoinfox/tmp/videoinfo-view-downloads-autoplay.tmp 2>/dev/null
input="$HOME""/.config/videoinfox/tmp/videoinfo-view-downloads-autoplay.tmp"

OLDIFS=$IFS
IFS=$'\n'

for line in $(cat "$input" 2>/dev/null)
 do
      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> SEARCH RESULTS >>> AUTOPLAY LINE" 
      echo
      echo " [PLAY]>" "$line"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$line")  " Duration:" $(ffmpeg -i "$line" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
      
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"

      ffplay -fs -autoexit "$line" 2> /dev/null

      echo " To bypass the 3 second wait press enter with no entry"
      echo
      echo -e "\033[5m 3 seconds remaining to quit Autoplay\033m\033[0m\033[5m\033[5m\033[0m"      
      echo 
      read -t 3 -p " Press any key then press enter to quit : " playdir
           
           # option te escape loop everytime ffplay closes               # read will timeout for 3 seconds    
           if [[ $playdir ]]                                             
             then                                                        # if no input is entered within 3 seconds the next video will play
                 break                                                   # if enter is pressed without any input the next video will play
             else                                                        
                 :                                                       # press any key then enter within 3 seconds to quit                      
           fi
done
 
rm ~/.config/videoinfox/tmp/videoinfo-view-downloads-autoplay.tmp 2> /dev/null
IFS=$OLDIFS

else
    echo
    echo
    echo " Select Show All or use Find to acess this feature . . ."
    sleep 1.7
fi

;;


              j)
##################################################################################################################################################
###########################   PLAY LINE  j   <VIEW DOWNLOADS>  ###################################################################################
##################################################################################################################################################

if [ -f ~/.config/videoinfox/tmp/videoinfo-view-downloads.tmp ]  # if file exists goto then
  then
      echo
      echo
      read -r -p " Enter line number to play: " linenumber  # waiting fot user input

      # create file moving selected line number to the top
      tail -n +"$linenumber" ~/.config/videoinfox/tmp/videoinfo-view-downloads.tmp > ~/.config/videoinfox/tmp/videoinfo-view-downloads-playnumber.tmp 2>/dev/null
      
      # read first line of file for play
      read playnumber < ~/.config/videoinfox/tmp/videoinfo-view-downloads-playnumber.tmp

      if [ -z "$playnumber" ]
          then
              :

          else

      clear
      echo
      echo "___________________________________________________________________________________________________________________"
      echo
      echo " ""$der"" >>> SEARCH RESULTS >>> PLAY LINE" 
      echo
      echo " [PLAY]>" "$playnumber"
      echo "___________________________________________________________________________________________________________________"
      echo

      echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$playnumber")  " Duration:" $(ffmpeg -i "$playnumber" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height & duration
      echo
      echo
      echo " Video Player Controls:"
      echo                             
      echo " - Fullscreen Toggle: f"
      echo
      echo " - Play/Pause Toggle: space bar"
      echo
      echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
      echo
      echo " - Quit: q"      
      echo -e "\n"
      echo " This screen will exit when the video player is closed."
      echo
      
      # video filename with full path <$pasteclip> strip from the bgininning of line to the last slash leaving only the filename <$getfilenameonly>
      getfilenameonly=$(echo "$playnumber" |  awk -F '/' '{print $NF}')  
  
      notify-send "Videoinfox messsage: Playing . . ." "$getfilenameonly"      

      echo "$playnumber" >> ~/.config/videoinfox/videoinfo.playedlist  # write clipboard content to Played List file
      ffplay -fs -autoexit "$playnumber" 2>/dev/null  # play video
      rm ~/.config/videoinfox/tmp/videoinfo-view-downloads-playnumber.tmp 2>/dev/null

     fi

else
    echo
    echo
    echo " Select Show All or use Find to acess this feature . . ."
    sleep 1.7

fi

;;


                *)

                esac
                done  
                
              ;;


              s)  # DOWNLOAD VIDEO PLAY, THEN DELETE ON VIDEO PLAYER CLOSE 
              
              grabdir="$PWD"

              pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
              read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir  # reading download directory 
              cd "$dirsaved"   # change to download directory
         
              clear
              ~/.config/videoinfox/yt-dlp "$pasteclip" -o "$dirsaved"/download.tmp  # downloading temporary video
              notify-send "Videoinfox messsage: YT-DLP is done downloading . . ." "$pasteclip" 

              clear
              echo
              echo "___________________________________________________________________________________________________________________"
              echo
              echo " ""$der"" >>> YT-DLP MENU >>> Play Video >>> Self Destruct"
              echo
              echo " [PLAY]> ""$pasteclip"""
              echo "___________________________________________________________________________________________________________________"         
              echo
              echo
              echo " Video Player Controls:"
              echo                             
              echo " - Fullscreen Toggle: f"
              echo
              echo " - Play/Pause Toggle: space bar"
              echo
              echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
              echo
              echo " - Quit: q"      
              echo -e "\n"
              echo " This screen will exit when the video player is closed."
              echo
              
              ffplay -fs -autoexit &> /dev/null "$dirsaved"/download.tmp*  # play temporary video
              rm "$dirsaved"/download.tmp*  # on player close, delete temporary video
              echo "" | xclip -sel clip  # clearing out the clipboard
              pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
             
              cd "$grabdir" # restore dir
              ;; 


              l)  # play last download
               
              grabdir="$PWD"  # storing directory to restore at the end of this function
               
              read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir  # reading download directory 
              cd "$dirsaved"   # change to download directory

                 if [ -s ~/.config/videoinfox/videoinfo.lastdownload ]
                    then
                        read -r lastdownload < ~/.config/videoinfox/videoinfo.lastdownload  # reading last download attempt         
                        ylast=$(find "$PWD" -maxdepth 1 -type f \( -iname "$lastdownload*" \))
                        echo "$ylast" > ~/.config/videoinfox/videoinfo.find-last-download  # write find result to file
                        read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download  # read first find result from file

                    else
                        read -r lastdownloadbak < ~/.config/videoinfox/videoinfo.lastdownload.bak  # reading last successful download
                        ylast=$(find "$PWD" -maxdepth 1 -type f \( -iname "$lastdownloadbak*" \))
                        echo "$ylast" > ~/.config/videoinfox/videoinfo.find-last-download  # write find result to file
                        read -r ytdlplast < ~/.config/videoinfox/videoinfo.find-last-download  # read first find result from file
                 fi   


              clear
              echo
              echo "___________________________________________________________________________________________________________________"
              echo
              echo " ""$der"" >>> PLAY LAST DOWNLOAD"
              echo
              echo " [PLAY]> ""$ytdlplast"""
              echo "___________________________________________________________________________________________________________________"         
              echo
              
echo " "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$ytdlplast")  " Duration:" $(ffmpeg -i "$ytdlplast" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration

              echo
              echo " Video Player Controls:"
              echo                             
              echo " - Fullscreen Toggle: f"
              echo
              echo " - Play/Pause Toggle: space bar"
              echo
              echo " - Back/Fwd: Left/Right Arrows (tap or hold down)"
              echo
              echo " - Quit: q"      
              echo -e "\n"
              echo " This screen will exit when the video player is closed."
              echo
         
              notify-send "Videoinfox messsage: Playing last yt-dlp download . . ." "Play: $lastdownload"
                       
              echo "$ytdlplast" >> ~/.config/videoinfox/videoinfo.playedlist  # write clipboard content to file  
              ffplay -fs -autoexit &> /dev/null "$ytdlplast"
              pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
              cd "$grabdir"   # restore dir prior to entering yt-dlp menu
              ;;  


              d)  # DOWNLOAD DEFAULT
              read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir  # reading download directory 
              cd "$dirsaved"  # change to download directory
 
              pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
              clear
      
              ~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" > ~/.config/videoinfox/videoinfo.lastdownload 
              ~/.config/videoinfox/yt-dlp "$pasteclip"     
      
              # remove first dot and everything after it in filename. file names with dots before the extension were breking find results
              sed "s/\..*//" ~/.config/videoinfox/videoinfo.lastdownload > ~/.config/videoinfox/videoinfo.lastdownload.work

              # remove first [ and everything after it in filename. this was done because file names with [ 
              sed -i "s/\[.*//" ~/.config/videoinfox/videoinfo.lastdownload.work

              # rename videoinfo.lastdownload.work to videoinfox/videoinfo.lastdownload
              mv ~/.config/videoinfox/videoinfo.lastdownload.work ~/.config/videoinfox/videoinfo.lastdownload
      
              read -r lastdownload < ~/.config/videoinfox/videoinfo.lastdownload  # reading last download video file
              
              notify-send "Videoinfox messsage: YT-DLP done downloading . . ." "$lastdownload"
              
              echo "" | xclip -sel clip  # clearing out the clipboard
              pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
              
              cd "$grabdir"
              ;;


              c)  # DOWNLOAD CHOOSE
              pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
              
              read -r dirsaved < ~/.config/videoinfox/videoinfo.yt-download-dir  # reading download directory 
              cd "$dirsaved"   # change to download directory

              clear
              echo
              echo
              
              # <yt-dlp> gets the filename minus the extension. this is done becuase the user can pick different video file types to download.
              ~/.config/videoinfox/yt-dlp --get-filename -o "%(title)s" "$pasteclip" > ~/.config/videoinfox/videoinfo.lastdownload
 
              # <yt-dlp> giving options for quality and file type to download
              ~/.config/videoinfox/yt-dlp -F "$pasteclip"
              
              echo
              echo
              echo "Find what video quality and format you want. (Code on far left)"
              read -r -p "Enter that Code and Press enter : " svrcode
              echo
              clear
              ~/.config/videoinfox/yt-dlp -f "$svrcode" "$pasteclip"

              # remove first dot and everything after it in filename. file names with dots before the extension were breking find results
              sed "s/\..*//" ~/.config/videoinfox/videoinfo.lastdownload > ~/.config/videoinfox/videoinfo.lastdownload.work

              # remove first [ and everything after it in filename. this was done because file names with [ 
              sed -i "s/\[.*//" ~/.config/videoinfox/videoinfo.lastdownload.work

              # rename videoinfo.lastdownload.work to videoinfox/videoinfo.lastdownload
              mv ~/.config/videoinfox/videoinfo.lastdownload.work ~/.config/videoinfox/videoinfo.lastdownload
              
              read -r lastdownload < ~/.config/videoinfox/videoinfo.lastdownload  # reading last download video file
              notify-send "Videoinfox messsage: YT-DLP done downloading . . ." "$lastdownload"              
              
              echo "" | xclip -sel clip  # clearing out the clipboard
              pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
              
              cd "$grabdir"
              ;; 

*)

 esac
 done

fi


################################################## cd "$grabdir"   # restore dir prior to entering yt-dlp menu
;; 



##################################################################################################################################################
m)  # MORE OPTIONS   #############################################################################################################################
##################################################################################################################################################

function menu {

##################################################################################
##########  START   1 2 3 4 5 - DEFAULT DIRS   DISPLAY ROUTINE  ##################
################################################################################## 

# DIRECTORY SELECTED IS NORMAL TEXT AND THE OTHER 4 ARE LESS BOLD. 

# DEFAULT DIR NUMBER 1 FORMAT
dirdisplay1=$(echo -e "1\033[2m 2 3 4 5\033[0m")
# DEFAULT DIR NUMBER 2 FORMAT
dirdisplay2=$(echo -e "\033[2m1 \033[0m2 \033[2m3 4 5\033[0m") 
# DEFAULT DIR NUMBER 3 FORMAT
dirdisplay3=$(echo -e "\033[2m1 2 \033[0m3 \033[2m4 5\033[0m")
# DEFAULT DIR NUMBER 4 FORMAT
dirdisplay4=$(echo -e "\033[2m1 2 3 \033[0m4 \033[2m5\033[0m")
# DEFAULT DIR NUMBER 5 FORMAT
dirdisplay5=$(echo -e "\033[2m1 2 3 4 \033[0m5\033[0m")
# NO MATCH ALL LESS BOLD
dirdisplayno=$(echo -e "\033[2m1 2 3 4 5\033[0m")


# FORMAT PWD NAME FOR COMPARISON
echo "$PWD" > ~/.config/videoinfox/videoinfox.pwd.tmp  # write PWD to a tmp file: videoinfox.pwd.tmp
cat ~/.config/videoinfox/videoinfox.pwd.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.pwd  # remove all froward slashes / write file: videoinfox.pwd
rm  ~/.config/videoinfox/videoinfox.pwd.tmp  # remove tmp file: videoinfox.pwd.tmp
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.pwd  # remove horizontal whitespace write file: videoinfox.pwd

# FORMAT DEFAULT DIR 1 NAME FOR COMPARISON
echo "$dir1" > ~/.config/videoinfox/videoinfox.dir1.tmp  # write dir 1 to a tmp file: videoinfox.dir1.tmp
cat ~/.config/videoinfox/videoinfox.dir1.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir1  # remove all froward slashes / write file: videoinfox.dir1
rm ~/.config/videoinfox/videoinfox.dir1.tmp  # remove tmp file: videoinfox.dir1.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir1  # remove horizontal whitespace write file: videoinfox.dir1

# FORMAT DEFAULT DIR 2 NAME FOR COMPARISON
echo "$dir2" > ~/.config/videoinfox/videoinfox.dir2.tmp  # write dir 2 to a tmp file: videoinfox.dir2.tmp
cat ~/.config/videoinfox/videoinfox.dir2.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir2  # remove all froward slashes / write file: videoinfox.dir2
rm ~/.config/videoinfox/videoinfox.dir2.tmp   # remove tmp file: videoinfox.dir2.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir2 # remove horizontal whitespace write file: videoinfox.dir2

# FORMAT DEFAULT DIR 3 NAME FOR COMPARISON
echo "$dirsaved" > ~/.config/videoinfox/videoinfox.dir3.tmp  # write dir 3 to a tmp file: videoinfox.dir3.tmp
cat ~/.config/videoinfox/videoinfox.dir3.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir3  # remove all froward slashes / write file: videoinfox.dir3
rm ~/.config/videoinfox/videoinfox.dir3.tmp   # remove tmp file: videoinfox.dir3.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir3 # remove horizontal whitespace write file: videoinfox.dir3

# FORMAT DEFAULT DIR 4 NAME FOR COMPARISON
echo "$dir4" > ~/.config/videoinfox/videoinfox.dir4.tmp  # write dir 4 to a tmp file: videoinfox.dir4.tmp
cat ~/.config/videoinfox/videoinfox.dir4.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir4  # remove all froward slashes / write file: videoinfox.dir4
rm ~/.config/videoinfox/videoinfox.dir4.tmp   # remove tmp file: videoinfox.dir4.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir4 # remove horizontal whitespace write file: videoinfox.dir4

# FORMAT DEFAULT DIR 5 NAME FOR COMPARISON
echo "$dir5" > ~/.config/videoinfox/videoinfox.dir5.tmp  # write dir 5 to a tmp file: videoinfox.dir5.tmp
cat ~/.config/videoinfox/videoinfox.dir5.tmp | tr "/" " " > ~/.config/videoinfox/videoinfox.dir5  # remove all froward slashes / write file: videoinfox.dir5
rm ~/.config/videoinfox/videoinfox.dir5.tmp   # remove tmp file: videoinfox.dir5.tmp 
sed -i 's/[[:blank:]]//g' ~/.config/videoinfox/videoinfox.dir5 # remove horizontal whitespace write file: videoinfox.dir5


# LOAD EDITED PWD AND DEFAULT DIRECTORY NAMES FOR BELOW  IF LOOPS   (all frorward slashes / and white spaces removed from the below directory names)

read -r controldir < ~/.config/videoinfox/videoinfox.pwd    # load reformatted current directory name 
read -r dir1display < ~/.config/videoinfox/videoinfox.dir1  # load reformatted default directory 1 name
read -r dir2display < ~/.config/videoinfox/videoinfox.dir2  # load reformatted default directory 2 name
read -r dir3display < ~/.config/videoinfox/videoinfox.dir3  # load reformatted default directory 3 name
read -r dir4display < ~/.config/videoinfox/videoinfox.dir4  # load reformatted default directory 4 name
read -r dir5display < ~/.config/videoinfox/videoinfox.dir5  # load reformatted default directory 5 name


# DEFAULT DIR 5  DISPLAY     IF DIRECTORY ON EXIT  =  DEFAULT DIRECTORIES 1-4 then Display that directory number.

if [[ "$controldir" = "$dir5display" ]]
  then 

      if [[ "$dir5display" = "$dir1display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 1 then display 1 and not 5
        then
             dirdisp="$dirdisplay1"
      fi

      if [[ "$dir5display" = "$dir2display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 2 then display 2 and not 5
        then
             dirdisp="$dirdisplay2"
      fi

      if [[ "$dir5display" = "$dir3display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 3 then display 3 and not 5
        then
             dirdisp="$dirdisplay3"
      fi

      if [[ "$dir5display" = "$dir4display" ]]  # IF DIRECTORY ON EXIT = DEFAULT DIR 4 then display 4 and not 5
        then
             dirdisp="$dirdisplay4"
      fi
fi



# DEFAULT DIR 5 DISPLAY
if [[ "$controldir" = "$dir5display" ]] 
  then
       dirdisp="$dirdisplay5"  # if directory is changed to  Default Dir 5 :  The number 5 is normal text and the other 4 are less bold.
        
  else
       dirdisp="$dirdisplayno" # if directory doesn't match  Default Dirs 1-5 : All 5 numbers are less bold.  
fi 



# DEFAULT DIR 1  DISPLAY
if [[ "$controldir" = "$dir1display" ]]  # IF PWD = DEFAULT DIR 1 then display 1
  then 
       dirdisp="$dirdisplay1"
fi

# DEFAULT DIR 2  DISPLAY
if [[ "$controldir" = "$dir2display" ]]  # IF PWD = DEFAULT DIR 2 then display 2
  then 
       dirdisp="$dirdisplay2"
fi

# DEFAULT DIR 3  DISPLAY
if [[ "$controldir" = "$dir3display" ]]  # IF PWD = DEFAULT DIR 3 then display 3
  then 
       dirdisp="$dirdisplay3"
fi

# DEFAULT DIR 4  DISPLAY
if [[ "$controldir" = "$dir4display" ]]  # IF PWD = DEFAULT DIR 4 then display 4
  then 
       dirdisp="$dirdisplay4"  # if directory is changed to  Default Dir 4 :  The number 4 is normal text and the other 4 are less bold.
fi

################################################################################
##########  END   1 2 3 4 5 - DEFAULT DIRS   DISPLAY ROUTINE  ##################
################################################################################


clear
echo
echo "Directory: ""$PWD"
echo "Clipboard: ""$pasteclip"                                                                 #
echo "___________________________________________________________________________________________________________________"
echo
echo " $der >>> MORE OPTIONS                                                      "$dirdisp" - Default Dirs"
echo "___________________________________________________________________________________________________________________"
echo
echo " c - Change Directory     n - Video Count        v - Video File                                           q - Quit"                     
echo " f - Find Directory       d - Video Duration"
echo " l - List Directory"
echo
echo -en " Enter Option: "
read -r -n1 option
}

  
while true
do
	menu
	case $option in


q)  # QUIT - <HOME> 
break ;;



1) # CD DIRECTORY TO TV    
cd "$dir1" 
;;

    
2)  # CD DIRECTORY TO MOVIES
cd "$dir2" 
;;


3)  # CHANGE DIRECTORY TO DOWNLOADS
cd "$dirsaved" 
;;


4)  # CHANGE DIRECTORY TO EXTRA   
cd "$dir4" 
;;


5)  # CHANGE DIRECTORY TO LAST EXIT
cd "$dir5" 
;;



l)  # LIST DIRECTORY
##################################################################################################################################################
###########################   MORE OPTIONS l  LIST DIRECTORY  ####################################################################################
##################################################################################################################################################

#   The Line below gives a total count of all mp4, mkv, avi, & divx in Current Directory.
currentdirfilecount=$(find . -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) 2>/dev/null | wc -l)
	

if [ -f "videoinfo.List-Directory" ]  #  if file <videoinfo.List-Directory> exists goto <then>
  then
#     >>>>>>>>>>>>>>>>>>>>>>>>>> DISPLAY LAST DIRECTORY LISTING >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 

      less videoinfo.List-Directory  # display in <less>
  
  else

#     >>>>>>>>>>>>>>>>>>>>>>>>>> CREATE NEW DIRECTORY LISTING FILE >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>   

# The group of echo's below write a header to file <videoinfo.List-Directory> 
# echo > videoinfo.List-Directory
echo "$ver                                                                                  LIST DIRECTORY" >> videoinfo.List-Directory
echo >> videoinfo.List-Directory
echo "This File was Created $(date) by" "$USER" >> videoinfo.List-Directory
echo >> videoinfo.List-Directory  # Every line ending in  ' >> videoinfo.List-Directory '  is writing that line to text file <videoinfo.List-Directory>)
echo "SAVED RESULTS LOADED FROM FILE: videoinfo.List-Directory" >> videoinfo.List-Directory
echo  >> videoinfo.List-Directory
echo "Working Directory: ""$PWD" >> videoinfo.List-Directory
echo  >> videoinfo.List-Directory 
echo "___________________________________________________________________________________________________________________" >> videoinfo.List-Directory
echo  >> videoinfo.List-Directory 
echo " Up & Down Arrows or Mouse wheel - scroll                                                            Home - top" >> videoinfo.List-Directory
echo " q - quit                                                                                            End - bottom" >> videoinfo.List-Directory
echo "___________________________________________________________________________________________________________________" >> videoinfo.List-Directory       
echo >> videoinfo.List-Directory
echo  >> videoinfo.List-Directory

# Display & Write <videoinfo.List-Directory>  The Results of:  - ffprobe for Codec & Resolution <$codecres>
#                                                              - ffmpeg for Duration in (hrs:min)
clear

for i in *.mp4  # list all <mp4> files in the current directory
do 
  echo "$i";  # display <mp4> filename
  echo "$i" >> videoinfo.List-Directory  
  $codecres "$i"  # display <mp4> Codec & Resolution
  $codecres "$i" >> videoinfo.List-Directory
  ffmpeg -i "$i" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//  # grep out duration, cut everything after "," then remove the ","
  ffmpeg -i "$i" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,// >> videoinfo.List-Directory  # writing the same thing to a file
  echo
  echo >> videoinfo.List-Directory
done

for i in *.mkv  # list all <mkv> files in the current directory
do 
  echo "$i"  # display <mkv> filename
  echo "$i" >> videoinfo.List-Directory
  $codecres "$i"  # display <mkv> Codec & Resolution$
  $codecres "$i" >> videoinfo.List-Directory
  ffmpeg -i "$i" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//  # grep out duration, cut everything after "," then remove the ","
  ffmpeg -i "$i" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,// >> videoinfo.List-Directory  # writing the same thing to a file
  echo
  echo
  echo >> videoinfo.List-Directory
  done

for i in *.avi  # list all <avi> files in the current directory
do 
  echo "$i"  # display <avi> filename
  echo "$i" >> videoinfo.List-Directory
  $codecres "$i"  # display <avi> Codec & Resolution
  $codecres "$i" >> videoinfo.List-Directory  
  ffmpeg -i "$i" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//  # grep out duration, cut everything after "," then remove the ","
  ffmpeg -i "$i" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,// >> videoinfo.List-Directory  # writing the same thing to a file
  echo
  echo >> videoinfo.List-Directory
done


for i in *.webm  # list all <webm> files in the current directory
do 
  echo "$i"  # display <avi> filename
  echo "$i" >> videoinfo.List-Directory
  $codecres "$i"  # display <avi> Codec & Resolution
  $codecres "$i" >> videoinfo.List-Directory  
  ffmpeg -i "$i" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//  # grep out duration, cut everything after "," then remove the ","
  ffmpeg -i "$i" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,// >> videoinfo.List-Directory  # writing the same thing to a file
  echo
  echo >> videoinfo.List-Directory
done


for i in *.divx  # list all <divx> files in the current directory
do 
  echo "$i"  # display <divx> filename
  echo "$i" >> videoinfo.List-Directory
  $codecres "$i"  # display <divx> Codec & Resolution
  $codecres "$i" >> videoinfo.List-Directory
  ffmpeg -i "$i" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//  # grep out duration, cut everything after "," then remove the ","
  ffmpeg -i "$i" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,// >> videoinfo.List-Directory  # writing the same thing to a file
  echo
  echo >> videoinfo.List-Directory
done
 	
# echo >> videoinfo.List-Directory
echo "Total Video Files:" "$currentdirfilecount"
echo >> videoinfo.List-Directory
echo "Total Video Files:" "$currentdirfilecount" >> videoinfo.List-Directory
echo
echo
echo >> videoinfo.List-Directory
echo ">>> Listing is not recursive <<<"
echo ">>> Listing is not recursive <<<" >> videoinfo.List-Directory
echo
echo >> videoinfo.List-Directory
echo "Working Directory: ""$PWD"  # <pwd>  print current working directory to the screen   
echo "Working Directory: ""$PWD" >> videoinfo.List-Directory
echo


if [ "$currentdirfilecount" = 0 ]  # if find returned no results goto <then>
  then
      :  # the colon can be used in place of a command to 'Do Nothing'
  else 
      echo "$rer"
      echo
      echo -e "\033[5mProbing $currentdirfilecount \033[5mVideo Files for Duration\033[0m"  #  file count of find results
      echo
      echo "This can take a while if there are a lot of video files to process."
      echo "You will get a GUI Notification when this process is complete."
      echo
     
      #  This is where the file <~/.config/videoinfox/videoinfo.duration.tmp> is created to store duration in seconds with the format being  (x.xxxxxx)
      #  Video files are found in current directory and processed with ffprobe and written to <~/.config/videoinfox/videoinfo.duration.tmp>. 
find . -maxdepth 1 -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) -exec ffprobe -show_entries format=duration -v quiet -of csv="p=0" {} \; > ~/.config/videoinfox/videoinfo.duration.tmp 2>/dev/null

      #  ffprobe outputs video duration in seconds 6 places past the decimal point.
      #  bash can't do floating point math.  So  <bc>  is needed first to get sum of   <~/.config/videoinfox/videoinfo.duration.tmp>
      #  The  <paste -sd+ ~/.config/videoinfox/videoinfo.duration.tmp>  puts a +  between each line of the file and  <bc>  gives you the sum. 
      floatingseconds=$(paste -sd+ ~/.config/videoinfox/videoinfo.duration.tmp | bc)
         
      #  The total in seconds <$floatingseconds> is taken from line above and the format needs changed from  (x.xxxxxx) to (x)
      #  Below, <awk> is stripping 7 characters in from the right of the sum of  <$floatingseconds>
      #  In this case, the decimal point and the 6 trailing numbers are stripped from the string.
      totalseconds=$(echo "$floatingseconds" | awk '{ print substr( $0, 1, length($0)-7 ) }')
        
      #  Calculation of  <$totalseconds>  into different formats.
      secs=$(echo "$totalseconds")  # $totalseconds variable stored in $secs variable
      totalminutes=$(($(($totalseconds/60))))  # total minutes calculation

      echo >> videoinfo.List-Directory
      echo >> videoinfo.List-Directory
      echo "Seconds"
      echo "Seconds" >> videoinfo.List-Directory
      echo "$totalseconds"  # display total seconds
      echo "$totalseconds" >> videoinfo.List-Directory
      echo
      echo >> videoinfo.List-Directory 
      echo "Minutes"
      echo "Minutes" >> videoinfo.List-Directory
      echo "$totalminutes"  # display total minutes
      echo "$totalminutes" >> videoinfo.List-Directory
      echo
      echo >> videoinfo.List-Directory
      echo "Hrs:Mi:Sec"
      echo "Hrs:Mi:Sec" >> videoinfo.List-Directory
      printf '%d:%d:%d\n' $((secs/3600)) $((secs%3600/60)) $((secs%60))  # calculation to display hours, minutes and seconds
      printf '%d:%d:%d\n' $((secs/3600)) $((secs%3600/60)) $((secs%60)) >> videoinfo.List-Directory
      echo
      echo >> videoinfo.List-Directory
      echo "Days     Hrs:Min:Sec"
      echo "Days     Hrs:Min:Sec" >> videoinfo.List-Directory
      printf '%d        %d:%d:%d\n' $(($secs/86400)) $(($secs%86400/3600)) $(($secs%3600/60)) $(($secs%60))  # same as above except Days are added
      printf '%d        %d:%d:%d\n' $(($secs/86400)) $(($secs%86400/3600)) $(($secs%3600/60)) $(($secs%60)) >> videoinfo.List-Directory
      echo
      echo >> videoinfo.List-Directory
      echo -e "\033[5mNEW RESULTS LOADED \033[5m \033[0m(use Mouse Wheel to Scroll)"
      echo "EXISTING RESULTS LOADED FROM FILE videoinfo.List-Directory " $(stat -c %y "videoinfo.List-Directory") >> videoinfo.List-Directory
      echo >> videoinfo.List-Directory
      echo
      echo >> videoinfo.List-Directory
      notify-send "Videoinfox is done processing: List Directory" "$PWD"  # GUI Notification is displayed when this function <option 1> has completed.
      # The file  <~/.config/videoinfox/videoinfo.duration.tmp>  was created for <ffprobe> to store video duration in seconds of all find results.
      # The math was already performed on this file and it is no longer needed.  So it is being removed.  
      rm ~/.config/videoinfox/videoinfo.duration.tmp
   fi
fi


# Everytime You Save.  The File <videoinfo.List-Directory> is saved to the directory that option 1 was run in.
function menu1 {

clear
less videoinfo.List-Directory  # view results from file
echo
echo " Directory: ""$PWD"
echo "___________________________________________________________________________________________________________________"
echo
echo " ""$der"" >>> LIST DIRECTORY"                                                  
echo "___________________________________________________________________________________________________________________"
echo
echo " Save or Delete Directory Listing"
echo
echo " s - Save     d - Delete"  
echo 
echo -en " Enter Option: "
read -r -n1 option1
echo
}

while true
do
	menu1
	case $option1 in
	
    s) 
    echo
    echo " Results SAVED . . ."
    echo 
    #read -p "Press enter to Continue"
    sleep .75
    break;; 
        
    d) 
    rm videoinfo.List-Directory
    echo
    echo " Results DELETED . . ."
    echo 
    #read -p "Press enter to Continue"    
    sleep .75
    break;;
      
        *)
    
        esac
        done
        ;;


c)
##################################################################################################################################################
###########################   MORE OPTIONS c  CHANGE DIRECTORY  ##################################################################################
##################################################################################################################################################

##############xmodmap -e 'keycode 55=v'  #  enable v key 

pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
clear
echo
echo "Directory: ""$PWD"
echo "Clipboard: ""$pasteclip"
echo "___________________________________________________________________________________________________________________"
echo
echo " $ver >>> CHANGE DIRECTORY"
echo "___________________________________________________________________________________________________________________"
echo
echo " No quotations needed for paths with spaces. Case sensative."
echo 
read -r -p " Enter Directory: " specifydir  # waiting fot user input - the directory you want to chang to 
	
	if [ -z "$specifydir" ]  # if no input was entered goto  <then> 
          then
               echo
               echo " error: Nothing was entered"
               sleep .75
          else
              if [ -d "$specifydir" ]  #  if directoty exists goto  <then>
                then
                     echo
                     cd "$specifydir"   # change the directory
                     echo " Working Driectory changed to: $PWD"  # <pwd>  print current working directory to the screen
                     sleep 1.5                   
                else
                     echo
                     echo " error:  No such file or directory"
                     sleep 1.5                   
          fi
    fi       
echo
#read -p "     Press enter to Continue" 
;;
	

f)	 
##################################################################################################################################################
###########################   MORE OPTIONS f  FIND DIRECTORY  ####################################################################################
##################################################################################################################################################

pasteclip=$(xclip -o -selection clipboard > /dev/null)  # grab clipboard content
clear
echo
echo "Directory: ""$PWD"
echo "Clipboard: ""$pasteclip"
echo "___________________________________________________________________________________________________________________"
echo  
echo " ""$ver"" >>> FIND DIRECTORY                                                               wildcard * ok"
echo "___________________________________________________________________________________________________________________" 
echo
read -r -p " Directory Name: " dirfind  # waiting fot user input - dierectory that you want to find
findmeadir=$(find . -type d -iname "$dirfind" 2>/dev/null | wc -l)   # number of files found
       
                                                                                   	
	if [ -z "$dirfind" ]  # if no input was entered goto  <then>  
          then
               echo
               echo " error: Nothing was entered"  
               sleep .75  # EXIT THIS LOOP
          else
               
               
               if echo "$dirfind" | grep "/" > /dev/null 2>/dev/null  # if any slashes were entered goto <then>
                 then
                      echo
                      echo " error: No slashes directory name only"
                      sleep .75  # EXIT THIS LOOP  
                 else
                      echo
		             find . -type d -iname "$dirfind" | sort -u 2>/dev/null  # directory(s) found   
	                  echo
	                  echo " Total Directories Found:" "$findmeadir"  # number of files found
	  
	              
	             if [ "$findmeadir" = 0 ]  # if find returned no results goto <then>
	               then
	                   sleep .75
                        :  # the colon can be used in place of a command to 'Do Nothing'  Exit this nested loop
	               else 	                    
                        pastetemp=$(xclip -o -selection clipboard 2>/dev/null)  # perserve clipboard content prioir to runnin this function
                        notify-send "Videoinfox is done processing: Find Directory" "Total Directories Found: $findmeadir" # GUI Notification.
                        echo       
	                   echo " Chang the directory: Copy 1 line (including the dot) to the Clipboard then press enter"
                        echo     		                
                        echo " Stay in current directory: enter without copy."
		              read -r -p " "
		              pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content
                        cd "$pasteclip" 2>/dev/null 
                        echo " Working Driectory: ""$PWD"""  # <pwd>  print current working directory to the screen 
                        echo "$pastetemp" | xclip -sel clip 2>/dev/null  #  reload clipboard content prior to running this function
                        pasteclip=$(xclip -o -selection clipboard 2>/dev/null)  # grab clipboard content
                        sleep 1.5            
        fi
        fi
        fi              
echo

#read -p "Press enter to Continue"              

;;


n)
##################################################################################################################################################
###########################   MORE OPTIONS  4  VIDEO COUNT  ######################################################################################
##################################################################################################################################################


clear
echo
echo "Directory: ""$PWD"
echo "Clipboard: ""$pasteclip"
echo "___________________________________________________________________________________________________________________"
echo  
echo " $der >>> VIDEO COUNT - Recursive"
echo "___________________________________________________________________________________________________________________" 
echo
echo " RECURSIVE COUNT OF VIDEO FILES"
echo
mp4count=$(find . -type f \( -iname "*.mp4" \) 2>/dev/null | wc -l)  # total number of <mp4> files found
echo " MP4   = " "$mp4count"
mkvcount=$(find . -type f \( -iname "*.mkv" \) 2>/dev/null | wc -l)  # total number of <mkv> files found
echo " MKV   = " "$mkvcount"
avicount=$(find . -type f \( -iname "*.avi" \) 2>/dev/null | wc -l)  # total number of <avi> files found
echo " AVI   = " "$avicount"
webmcount=$(find . -type f \( -iname "*.webm" \) 2>/dev/null | wc -l) # total number of <webm files found
echo " WEBM  = " "$webmcount"
divxcount=$(find . -type f \( -iname "*.divx" \) 2>/dev/null | wc -l) # total number of <divx> files found
echo " DIVX  = " "$divxcount"
echo "------------------"
totalcount=$(($mp4count + $mkvcount + $avicount + $webmcount + $divxcount))  # calcutation for Sum of All 4 file types
echo " TOTAL = " $totalcount  # display Sum
# GUI Notification is displayed when this function <option 6> has completed. 
notify-send  "Videoinfox is done processing Video File Count " "Total Video Files located in $PWD : $totalcount"
echo
read -r -p " Press enter to Continue" 
;;
	

d)
##################################################################################################################################################
###########################  MORE OPTIONS  d  VIDEO DURATION  ####################################################################################
##################################################################################################################################################

if [ -f "videoinfo.Video-Duration" ]  #  if <videoinfo.Video-Durationy> exists goto <then>
  then
#     >>>>>>>>>>>>>>>>>>>>>>>>>> DISPLAY Saved RESULTS >>>>>>>>>>>>>>>>>>>>>>>>>> 
      cat videoinfo.Video-Duration
  else
#     >>>>>>>>>>>>>>>>>>>>>>>>>> CREATE NEW RESULTS >>>>>>>>>>>>>>>>>>>>>>>>>>
#   The Line below gives a total count of all mp4, mkv, avi, & divx Recursively.
alldirfilecount=$(find . -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -name "*.webm" -o -iname "*.divx" \) 2>/dev/null | wc -l)

#  The group of echo's below write a header to file <videoinfo.Video-Duration> 
echo > videoinfo.Video-Duration
echo "$ver                                                                                              VIDEO DURATION" >> videoinfo.Video-Duration
echo >> videoinfo.Video-Duration
echo "This File was Created $(date) by" "$USER" >> videoinfo.Video-Duration
echo >> videoinfo.Video-Duration  # Every line ending in  ' >> videoinfo.Video-Duration '  is writing that line to text file <videoinfo.Video-Duration>

#  The rest of this function Writes the Results to the Screen and File <videoinfo.Video-Duration>
clear
echo
echo "Directory: ""$PWD"
echo "Clipboard: ""$pasteclip"
echo "___________________________________________________________________________________________________________________"  
echo
echo " ""$der"" >>> VIDEO DURATION - Recursive"
echo "___________________________________________________________________________________________________________________" 
echo
echo "Working Directory: ""$PWD" >> videoinfo.Video-Duration
echo >> videoinfo.Video-Duration
echo "RECURSIVE DURATION OF VIDEO FILES"
echo "RECURSIVE DURATION OF $alldirfilecount VIDEO FILES" >> videoinfo.Video-Duration
echo
echo "This can take a while if there are a lot of video files to process."
echo "You will get a GUI Notification when this process is complete."
echo
echo -e "\033[5mProbing $alldirfilecount \033[5mVideo Files for Duration\033[0m"  #  file count of find results
echo -e "\n"
echo >> videoinfo.Video-Duration


#  This is where the file <~/.config/videoinfox/videoinfo.duration.tmp> is created to store duration in seconds with the format being  (x.xxxxxx)
#  Video files are found recursively and processed with ffprobe and written to <~/.config/videoinfox/videoinfo.duration.tmp>. 
find . -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm" -o -iname "*.divx" \) -exec ffprobe -show_entries format=duration -v quiet -of csv="p=0" {} \; > ~/.config/videoinfox/videoinfo.duration.tmp 2>/dev/null


#  ffprobe outputs video duration in seconds 6 places past the decimal point.
#  bash can't do floating point math.  So  <bc>  is needed first to get sum of  <~/.config/videoinfox/videoinfo.duration.tmp>
#  The  <paste -sd+ ~/.config/videoinfox/videoinfo.duration.tmp>  puts a +  between each line of the file and  <bc>  gives you the sum. 
floatingseconds=$(paste -sd+  ~/.config/videoinfox/videoinfo.duration.tmp | bc)


#  The total in seconds is taken from line above and the format needs changed from  (x.xxxxxx) to (x)
#  Below, <awk> is stripping 7 characters in from the right of the sum of  <$floatingseconds>
#  In this case, the decimal point and the 6 trailing numbers are stripped from the string.
totalseconds=$(echo "$floatingseconds" | awk '{ print substr( $0, 1, length($0)-7 ) }')

clear
echo "Working Directory: ""$PWD"  # <pwd>  print current working directory to the screen 
echo
echo "$der"
echo
echo "RECURSIVE DURATION OF VIDEO FILES"
echo
echo "DONE Probing ""$alldirfilecount"" Video Files for Duration"  #  file count of find results
echo
#  Calculation of  <$totalseconds>  into different formats.
secs=$(echo "$totalseconds")
totalminutes=$(($(($totalseconds/60))))  # convert seconds into minutes

echo "Seconds"
echo "Seconds" >> videoinfo.Video-Duration
echo "$totalseconds"  # display total seconds
echo "$totalseconds" >> videoinfo.Video-Duration  
echo
echo >> videoinfo.Video-Duration
echo "Minutes"
echo "Minutes" >> videoinfo.Video-Duration
echo $totalminutes  # display total minutes
echo $totalminutes >> videoinfo.Video-Duration  
echo
echo >> videoinfo.Video-Duration
echo "Hrs:Mi:Sec"
echo "Hrs:Mi:Sec" >> videoinfo.Video-Duration
printf '%d:%d:%d\n' $((secs/3600)) $((secs%3600/60)) $((secs%60))  # calculation to display hours, minutes and seconds
printf '%d:%d:%d\n' $((secs/3600)) $((secs%3600/60)) $((secs%60)) >> videoinfo.Video-Duration  
echo
echo >> videoinfo.Video-Duration
echo "Days     Hrs:Min:Sec" 
echo "Days     Hrs:Min:Sec" >> videoinfo.Video-Duration
printf '%d        %d:%d:%d\n' $(($secs/86400)) $(($secs%86400/3600)) $(($secs%3600/60)) $(($secs%60)) # same as above + Days
printf '%d        %d:%d:%d\n' $(($secs/86400)) $(($secs%86400/3600)) $(($secs%3600/60)) $(($secs%60)) >> videoinfo.Video-Duration  
echo
echo >> videoinfo.Video-Duration
echo
echo -e "\033[5mNEW RESULTS LOADED \033[5m \033[0m"
echo "SAVED RESULTS LOADED FROM FILE: videoinfo.Video-Duration" $(stat -c %y "videoinfo.Video-Duration") >> videoinfo.Video-Duration
echo >> videoinfo.Video-Duration
#echo
#echo "     q  to quit" >> videoinfo.Video-Duration
echo >> videoinfo.Video-Duration
notify-send  "Videoinfox is done processing: Video Duration" "$PWD"  # GUI Notification is displayed when this function has completed.
# The file  <~/.config/videoinfox/videoinfo.duration.tmp>  was created for <ffprobe> to store video duration in seconds of all find results.
# The math was already performed on this file and it is no longer needed.  So it is being removed.  
#rm ~/.config/videoinfox/videoinfo.duration.tmp
fi


function menu5 {
clear
cat videoinfo.Video-Duration
echo
echo "___________________________________________________________________________________________________________________" 
echo
echo " ""$der"" >>> VIDEO DURATION - Recursive"
echo "___________________________________________________________________________________________________________________" 
echo
echo " s - Save     d - Delete"  
echo 
echo -en " Enter Option: "
read -r -n1 option5
echo
}

while true
do
	menu5
	case $option5 in
	
    s) 
    echo
    echo " Results SAVED . . ."
    echo 
    #read -p "Press enter to Continue"
     .75
    break;; 
        
    d) 
    rm videoinfo.Video-Duration
    echo
    echo " Results DELETED . . ."
    echo 
    #read -p "Press enter to Continue"    
    sleep .75
    break;;

         *)

         esac
         done
         ;;


v)
##################################################################################################################################################
###########################   MORE OPTIONS v  ENTER VIDEO FILE  ##################################################################################
##################################################################################################################################################

clear
echo
echo "Directory: ""$PWD"
echo "Clipboard: ""$pasteclip"
echo "___________________________________________________________________________________________________________________"
echo
echo " ""$ver"" >>> ENTER VIDEO FILE - For Info"
echo "___________________________________________________________________________________________________________________"
echo
echo " Full path needed. No quotations needed for paths or files with spaces. Case Sensative."
echo
read -r -p " Video File: " specifyfile  # waiting fot user input - video file to display
echo

        if [ -z "$specifyfile" ]  # if no input was entered goto  <then>
          then
              echo " error: Nothing was entered"
              sleep .7
          else  
               if [ -f "$specifyfile" ]  # if file exists goto  <then>
                then
                       echo "$specifyfile"  | xclip -sel clip  # copy valid file to the cilpboard for play
                       pasteclip=$(xclip -o -selection clipboard 2> /dev/null)  # grab clipboard content
                       
echo " Video Info: "$(ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 "$pasteclip") "Duration:" $(ffmpeg -i "$pasteclip" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//)  # codec, width, height and duration
                       echo
                       echo " Filename copied to clipboard for play"
                       echo
                       read -r -p " Press enter to Continue" 
                else
                       echo " error: No such file or directory"
                       sleep .7
          fi	  
          fi

    echo
    ;;


    esac
    done
    ;;


esac    
done

##################################################################################################################################################
###########################  END MAIN LOOP  ######################################################################################################
##################################################################################################################################################


#  EXIT MESSAGE
clear
echo -e "\n"
echo
echo "___________________________________________________________________________________________________________________"
echo  
echo " ""$ver"" >>> EXIT"
echo "___________________________________________________________________________________________________________________" 
echo -e "\n"


# Error: target STRING not available is an xclip error


#   FYI :

#   The Line Below performs a Recursive Search and outputs ffprobe's Duration of every find in seconds format (x.xxxxxx).
#   find . -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname ".avi" -o -iname "*.webm -o -iname "*.divx"\) -exec ffprobe -show_entries format=duration -v quiet -of csv="p=0" {} \;

#   The Line Below performs a Recursive Search and outputs Video File Count.
#   find . -type f \( -iname "*.mp4" -o -iname "*.mkv" -o -iname "*.avi" -o -iname "*.webm -o -iname "*.divx" \) | wc -l

#   The Line Below gets the Codec & Resolution from a video file.
#   NOTE : Do NOT include  <  >   around the filename. 
#   ffprobe -v error -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 -select_streams v:0 -show_entries stream=width,height -of default=nw=1 <filename>

#   The Line Below gets the Duration from video file and dsiplays in  <Days:Hours:Minutes:Seconds>
#   NOTE :  Save Double Quotes around the filename. 
#   ffmpeg -i "filename" 2>&1 | grep Duration | cut -d ' ' -f 4 | sed s/,//
#
